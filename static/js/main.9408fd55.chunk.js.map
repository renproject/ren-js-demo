{"version":3,"sources":["../../../src/networks.ts","../../../src/lockAndMint.ts","lib/ethereum.ts","lib/burn.ts","ui/burnForm.tsx","ui/burnObject.tsx","ui/icons/index.ts","ui/icons/bsc.png","ui/icons/metamask.png","ui/icons/walletconnect.png","lib/multiwallet.tsx","ui/connectWallet.tsx","ui/depositObject.tsx","ui/main.tsx","index.tsx","ui/useTransactionStorage.ts","../../../src/hash.ts","../../../src/ethereum.ts","../../../../../src/v2/pack/pack.ts","../../../src/bsc.ts","../../../src/fantom.ts","../../../src/polygon.ts","../../../../src/v1/unmarshal.ts","../../../../../src/v2/pack/marshal.ts","lib/chains.ts","../../../../src/v1/value.ts","../../../src/common.ts","../../../../src/v2/transaction.ts","../../../src/renVMHashes.ts","../../../src/base.ts","../../../src/httpProvider.ts","../../../src/abi.ts","../../../src/callableClass.ts","../../../src/chainUtils.ts","../../../src/contractCalls.ts","../../../src/renVMUtils.ts","../../../src/value.ts","../../../src/assert.ts","../../../../src/v1/renVMProvider.ts","lib/mint.ts","../../../src/utils.ts","../../../src/signatureUtils.ts","network.ts","../../../src/errors.ts","../../../src/logger.ts","../../../src/promiEvent.ts","../../../src/types.ts","../../../src/index.ts","../../../src/burnAndRelease.ts","../../../src/defaultDepositHandler.ts","ui/mintForm.tsx","ui/styles/metamask.svg","../../../../src/v2/value.ts","../../../../src/v2/methods.ts","../../../../src/v2/unmarshal.ts","../../../../src/v2/renVMProvider.ts","../../../src/combinedProvider.ts","../../../../src/v1/methods.ts"],"names":["this","ERC20ABI","inputs","name","type","outputs","Wallet","getBalance","mintChain","mintChainProvider","token","a","web3","Web3","network","getNetwork","NETWORK","isTestnet","EthereumConfigMap","eth","getAccounts","web3Address","getMintChainObject","getTokenContractAddress","tokenAddress","tokenContract","Contract","methods","decimals","call","balanceOf","balance","amount","BigNumber","div","exponentiatedBy","toNumber","toFixed","ROUND_DOWN","addressIsValid","address","match","BurnStatus","startBurn","renJS","asset","recipientAddress","fromAddress","updateTransaction","Asset","BTC","ZEC","BCH","FIL","DGB","LUNA","DOGE","to","Bitcoin","Address","Zcash","BitcoinCash","Filecoin","DigiByte","Terra","Dogecoin","Error","initialize","utils","assetDecimals","value","times","from","burnAndRelease","confirmationTarget","target","burn","on","confs","txHash","confirmations","targetConfs","release","renVMStatus","then","status","DONE","BurnForm","connectMintChain","getDefaultMintChainAddress","addBurn","React","errorMessage","setErrorMessage","setRecipientAddress","setAmount","submitting","setSubmitting","onSubmit","event","preventDefault","lte","burnDetails","console","error","String","message","JSON","stringify","burnMaximumValue","className","onChange","e","placeholder","Assets","get","toUpperCase","role","onClick","undefined","disabled","style","display","alignItems","justifyContent","alt","ExternalLink","children","props","rel","BurnObject","params","showingFullError","setShowingFullError","showFullError","amountReadable","setAmountReadable","newValue","catch","BURNT","transaction","transactionExplorerLink","href","transactionID","length","slice","color","cursor","Icons","ethNetworkToRenNetwork","id","1","RenNetwork","Mainnet","4","Testnet","42","parseInt","multiwalletOptions","chains","Chain","Ethereum","logo","connector","EthereumInjectedConnector","debug","networkIdMapper","EthereumWalletConnectConnector","rpc","process","3","qrcode","Fantom","Polygon","BSC","BinanceSmartChainInjectedConnector","56","97","ConnectWallet","chain","close","open","options","targetNetwork","onClose","config","DepositObject","deposit","depositDetails","onStatus","newStatus","log","setConfirmations","targetConfirmations","setTargetConfirmations","onConfirmation","setRenVMStatus","mintTransaction","setMintTransaction","step1","DepositStatus","DETECTED","handleDeposit","ERROR","step2","submitDeposit","CONFIRMED","SIGNED","Tab","Main","enabledChains","useMultiwallet","defaultAsset","setAsset","defaultMintChain","setMintChain","RenJS","logLevel","setBalance","provider","updateBalance","assetIn","toString","Mint","tab","setTab","useState","OrderedMap","deposits","setDeposits","addDeposit","useCallback","set","newDetails","currentDeposit","useTransactionStorage","multiwalletChain","setMultiwalletChain","top","thisToken","otherToken","allTokens","onMarketChange","getMarket","Chains","Burn","startMint","account","Array","keys","map","reverse","ReactDOM","document","getElementById","msg","PackPrimitive","Map","symbol","RenVMType","hex","logger","txConfig","LogLevel","Trace","indexOf","getRenNetworkDetails","Account","bsc","BinanceSmartChain","fantom","polygon","showAddress","setMinimumAmount","onDeposit","getFees","fees","lock","minimumAmount","dividedBy","lockAndMint","gatewayAddress","onTarget","onRenVMStatus","onTransactionHash","hash","findTransaction","_state","nHash","Buffer","repeat","SimpleLogger","confirmed","retries","signed","lastError","sleep","mint","s","TestnetVDot3","legacy","MainnetVDot3","RenJSErrors","Log","debugPrefix","LockAndMintStatus","BurnAndReleaseStatus","TxStatus","ClickToCopy","text","copied","setCopied","setTimeout","MintForm","generatingAddress","setGeneratingAddress","depositAddress","setDepositAddress","useMetaMaskAccount","validAddress","memo","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","_ref3","points","_ref4","SvgMetamask","_ref","svgRef","title","titleId","x","y","viewBox","enableBackground","xmlSpace","ref","ForwardRef","out","RPCMethod"],"mappings":"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,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,sCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,yCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,sCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,0CACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eACXsO,OAAQ,wCACO,gBAAoB,UAAW,CAC9CtO,UAAW,eA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","file":"static/js/main.9408fd55.chunk.js","sourcesContent":["export var RenNetwork;\n(function (RenNetwork) {\n    RenNetwork[\"Mainnet\"] = \"mainnet\";\n    RenNetwork[\"Testnet\"] = \"testnet\";\n    // Staging\n    RenNetwork[\"MainnetVDot3\"] = \"mainnet-v0.3\";\n    RenNetwork[\"TestnetVDot3\"] = \"testnet-v0.3\";\n    RenNetwork[\"DevnetVDot3\"] = \"devnet-v0.3\";\n})(RenNetwork || (RenNetwork = {}));\nconst renMainnet = {\n    name: RenNetwork.Mainnet,\n    lightnode: \"https://lightnode-mainnet.herokuapp.com\",\n    isTestnet: false,\n};\nconst renTestnet = {\n    name: RenNetwork.Testnet,\n    lightnode: \"https://lightnode-testnet.herokuapp.com\",\n    isTestnet: true,\n};\nconst renMainnetVDot3 = {\n    name: RenNetwork.MainnetVDot3,\n    lightnode: \"https://lightnode-new-mainnet.herokuapp.com/\",\n    isTestnet: false,\n};\nconst renTestnetVDot3 = {\n    name: RenNetwork.TestnetVDot3,\n    lightnode: \"https://lightnode-new-testnet.herokuapp.com/\",\n    isTestnet: true,\n};\nconst renDevnetVDot3 = {\n    name: RenNetwork.DevnetVDot3,\n    lightnode: \"https://lightnode-devnet.herokuapp.com/\",\n    isTestnet: true,\n};\nexport const getRenNetworkDetails = (renNetwork) => {\n    switch (renNetwork) {\n        case RenNetwork.Mainnet:\n        case RenNetwork.Mainnet:\n            return renMainnet;\n        case RenNetwork.Testnet:\n        case RenNetwork.Testnet:\n            return renTestnet;\n        case RenNetwork.MainnetVDot3:\n        case RenNetwork.MainnetVDot3:\n            return renMainnetVDot3;\n        case RenNetwork.TestnetVDot3:\n        case RenNetwork.TestnetVDot3:\n            return renTestnetVDot3;\n        case RenNetwork.DevnetVDot3:\n        case RenNetwork.DevnetVDot3:\n            return renDevnetVDot3;\n        default:\n            return renNetwork;\n    }\n};\nexport const RenNetworks = [\n    RenNetwork.Mainnet,\n    RenNetwork.Testnet,\n    RenNetwork.MainnetVDot3,\n    RenNetwork.TestnetVDot3,\n    RenNetwork.DevnetVDot3,\n];\n//# sourceMappingURL=networks.js.map","import { getRenNetworkDetails, newPromiEvent, NullLogger, RenJSErrors, TxStatus, TxStatusIndex, } from \"@renproject/interfaces\";\nimport { assertObject, assertType, emptyNonce, extractError, fromBase64, fromHex, generateGHash, generateNHash, generatePHash, generateSHash, isDefined, overrideContractCalls, Ox, payloadToMintABI, renVMHashToBase64, retryNTimes, SECONDS, sleep, strip0x, toBase64, toURLBase64, } from \"@renproject/utils\";\nimport { EventEmitter } from \"events\";\nimport { OrderedMap } from \"immutable\";\nimport { AbiCoder } from \"web3-eth-abi\";\n/**\n * A `LockAndMint` object tied to a particular gateway address. LockAndMint\n * should not be created directly. Instead, [[RenJS.lockAndMint]] will create a\n * `LockAndMint` object.\n *\n * `LockAndMint` extends the EventEmitter class, and emits a `\"deposit\"` event\n * for each new deposit that is observed. Deposits will only be watched for if\n * there is an active listener for the `\"deposit\"` event.\n *\n * A LockAndMint object watches transactions to the [[gatewayAddress]] on the\n * lock-chain.\n *\n * Deposits to the gateway address can be listened to with the `\"deposit\"`\n * event using [[on]], which will return [[LockAndMintDeposit]] instances.\n *\n * ```ts\n * console.log(`Deposit to ${JSON.stringify(lockAndMint.gatewayAddress)}`);\n *\n * lockAndMint.on(\"deposit\", async (deposit) => {\n *    console.log(`Received deposit`, deposit);\n *    await RenJS.defaultDepositHandler(deposit);\n * });\n * ```\n *\n * @noInheritDoc\n */\nexport class LockAndMint extends EventEmitter {\n    /**\n     * @hidden - should be created using [[RenJS.lockAndMint]] instead.\n     */\n    constructor(renVM, params, config = {}) {\n        super();\n        /**\n         * Deposits represents the lock deposits that have been so far.\n         */\n        this.deposits = OrderedMap();\n        this.confirmationTarget = async () => {\n            if (isDefined(this._state.targetConfirmations)) {\n                return this._state.targetConfirmations;\n            }\n            let target;\n            const getConfirmationTarget = this.renVM.getConfirmationTarget;\n            console.log(\"Getting target\");\n            if (getConfirmationTarget) {\n                target = await retryNTimes(async () => getConfirmationTarget(this._state.selector, this.params.from), 2);\n            }\n            console.log(\"target\", target);\n            const defaultConfirmations = this._state.renNetwork && this._state.renNetwork.isTestnet ? 2 : 6;\n            this._state.targetConfirmations = isDefined(target)\n                ? target\n                : defaultConfirmations;\n            return this._state.targetConfirmations;\n        };\n        /**\n         * @hidden - Called automatically when calling [[RenJS.lockAndMint]]. It has\n         * been split from the constructor because it's asynchronous.\n         */\n        this._initialize = async () => {\n            this._state.renNetwork =\n                this._state.renNetwork ||\n                    getRenNetworkDetails(await this.renVM.getNetwork(this._state.selector));\n            if (!this.params.from.renNetwork) {\n                await this.params.from.initialize(this._state.renNetwork);\n            }\n            if (!this.params.to.renNetwork) {\n                await this.params.to.initialize(this._state.renNetwork);\n            }\n            const overwriteParams = this.params.to.getMintParams &&\n                (await this.params.to.getMintParams(this.params.asset));\n            this.params = {\n                ...overwriteParams,\n                ...this.params,\n            };\n            try {\n                this.gatewayAddress = await this.generateGatewayAddress();\n            }\n            catch (error) {\n                throw error;\n            }\n            // Will fetch deposits as long as there's at least one deposit.\n            this.wait().catch(console.error);\n            try {\n                this._state.targetConfirmations = await this.confirmationTarget();\n            }\n            catch (error) {\n                console.error(error);\n            }\n            return this;\n        };\n        /**\n         * `processDeposit` allows you to manually provide the details of a deposit\n         * and returns a [[LockAndMintDeposit]] object.\n         *\n         * @param deposit The deposit details in the format defined by the\n         * LockChain. This should be the same format as `deposit.depositDetails` for\n         * a deposit returned from `.on(\"deposit\", ...)`.\n         *\n         * ```ts\n         * lockAndMint\n         *   .processDeposit({\n         *       transaction: {\n         *           cid:\n         *               \"bafy2bzacedvu74e7ohjcwlh4fbx7ddf6li42fiuosajob6metcj2qwkgkgof2\",\n         *           to: \"t1v2ftlxhedyoijv7uqgxfygiziaqz23lgkvks77i\",\n         *           amount: (0.01 * 1e8).toString(),\n         *           params: \"EzGbvVHf8lb0v8CUfjh8y+tLbZzfIFcnNnt/gh6axmw=\",\n         *           confirmations: 1,\n         *           nonce: 7,\n         *       },\n         *       amount: (0.01 * 1e8).toString(),\n         *   })\n         *   .on(deposit => RenJS.defaultDepositHandler)\n         *   .catch(console.error);\n         * ```\n         *\n         * @category Main\n         */\n        this.processDeposit = async (deposit) => {\n            if (!this._state.renNetwork ||\n                !this._state.pHash ||\n                !this._state.gHash ||\n                !this._state.gPubKey ||\n                !this.gatewayAddress) {\n                throw new Error(\"Gateway address must be generated before calling 'wait'.\");\n            }\n            const depositID = this.params.from.transactionID(deposit.transaction);\n            let depositObject = this.deposits.get(depositID);\n            // If the confidence has increased.\n            if (!depositObject\n            // || (existingConfidenceRatio !== undefined &&\n            // confidenceRatio > existingConfidenceRatio)\n            ) {\n                depositObject = new LockAndMintDeposit(deposit, this.params, this.renVM, {\n                    ...this._state,\n                    renNetwork: this._state.renNetwork,\n                    pHash: this._state.pHash,\n                    gHash: this._state.gHash,\n                    gPubKey: this._state.gPubKey,\n                    targetConfirmations: isDefined(this._state.targetConfirmations)\n                        ? this._state.targetConfirmations\n                        : undefined,\n                });\n                await depositObject._initialize();\n                // Check if deposit has already been submitted.\n                if (this._state.config.loadCompletedDeposits ||\n                    depositObject.status !== DepositStatus.Submitted) {\n                    this.emit(\"deposit\", depositObject);\n                    // this.deposits.set(deposit);\n                    this._state.logger.debug(\"new deposit:\", deposit);\n                    this.deposits = this.deposits.set(depositID, depositObject);\n                }\n            }\n            return depositObject;\n        };\n        this.addListener = (event, listener) => {\n            // Emit previous deposit events.\n            if (event === \"deposit\") {\n                this.deposits.map((deposit) => {\n                    listener(deposit);\n                });\n            }\n            super.on(event, listener);\n            return this;\n        };\n        /**\n         * `on` creates a new listener to `\"deposit\"` events, returning\n         * [[LockAndMintDeposit]] instances.\n         *\n         * `on` extends `EventEmitter.on`, modifying it to immediately return all\n         * previous `\"deposit\"` events, in addition to new events, when a new\n         * listener is created.\n         *\n         * @category Main\n         */\n        this.on = (event, listener) => this.addListener(event, listener);\n        // Private methods /////////////////////////////////////////////////////////\n        this.generateGatewayAddress = async () => {\n            if (this.gatewayAddress) {\n                return this.gatewayAddress;\n            }\n            const { nonce, contractCalls } = this.params;\n            if (!nonce) {\n                throw new Error(`Must call 'initialize' before calling 'generateGatewayAddress'.`);\n            }\n            if (!contractCalls) {\n                throw new Error(`Must provide contract call details.`);\n            }\n            // Last contract call\n            const { contractParams, sendTo } = contractCalls[contractCalls.length - 1];\n            const tokenGatewayContract = this.renVM.version(this._state.selector) >= 2\n                ? Ox(generateSHash(this._state.selector))\n                : await this.params.to.resolveTokenGatewayContract(this.params.asset);\n            this._state.pHash = generatePHash(contractParams || [], this._state.logger);\n            const gHash = generateGHash(contractParams || [], sendTo, tokenGatewayContract, fromHex(nonce), this.renVM.version(this._state.selector) >= 2, this._state.logger);\n            this._state.gHash = gHash;\n            this._state.gPubKey = await this.renVM.selectPublicKey(this._state.selector, this.renVM.version(this._state.selector) >= 2\n                ? this.params.from.name\n                : this.params.asset);\n            this._state.logger.debug(\"gPubKey:\", Ox(this._state.gPubKey));\n            const gatewayAddress = await this.params.from.getGatewayAddress(this.params.asset, this._state.gPubKey, gHash);\n            this.gatewayAddress = gatewayAddress;\n            this._state.logger.debug(\"gateway address:\", this.gatewayAddress);\n            return this.gatewayAddress;\n        };\n        this.wait = async () => {\n            if (!this._state.pHash ||\n                !this._state.gHash ||\n                !this._state.gPubKey ||\n                !this.gatewayAddress) {\n                throw new Error(\"Gateway address must be generated before calling 'wait'.\");\n            }\n            while (true) {\n                const listenerCancelled = () => this.listenerCount(\"deposit\") === 0;\n                try {\n                    // If there are no listeners, continue. TODO: Exit loop entirely\n                    // until a lister is added again.\n                    if (listenerCancelled()) {\n                        await sleep(1 * SECONDS);\n                        continue;\n                    }\n                }\n                catch (error) {\n                    this._state.logger.error(extractError(error));\n                }\n                // Change the return type of `this.processDeposit` to `void`.\n                const onDeposit = async (deposit) => {\n                    await this.processDeposit(deposit);\n                };\n                // TODO: Flag deposits that have been cancelled, updating their status.\n                const cancelDeposit = async () => Promise.resolve();\n                try {\n                    this.getDepositsProgress = await this.params.from.getDeposits(this.params.asset, this.gatewayAddress, this.getDepositsProgress, onDeposit, cancelDeposit, listenerCancelled);\n                }\n                catch (error) {\n                    this._state.logger.error(extractError(error));\n                }\n                await sleep(this._state.config.networkDelay);\n            }\n        };\n        this.params = params;\n        this.renVM = renVM;\n        this._state = {\n            logger: config.logger || NullLogger,\n            selector: this.renVM.selector(this.params),\n            config: {\n                ...config,\n                networkDelay: config.networkDelay || 15 * SECONDS,\n            },\n        };\n        const txHash = this.params.txHash;\n        // Decode nonce or use empty nonce 0x0.\n        const nonce = this.params.nonce\n            ? fromHex(this.params.nonce)\n            : emptyNonce();\n        this.params.nonce = nonce;\n        if (!txHash) {\n            this.params.nonce = nonce;\n        }\n        {\n            // Debug log\n            const { to: _to, from: _from, ...restOfParams } = this.params;\n            this._state.logger.debug(\"lockAndMint created:\", restOfParams);\n        }\n    }\n}\nexport var DepositStatus;\n(function (DepositStatus) {\n    DepositStatus[\"Detected\"] = \"detected\";\n    DepositStatus[\"Confirmed\"] = \"confirmed\";\n    DepositStatus[\"Signed\"] = \"signed\";\n    DepositStatus[\"Reverted\"] = \"reverted\";\n    DepositStatus[\"Submitted\"] = \"submitted\";\n})(DepositStatus || (DepositStatus = {}));\nexport const DepositStatusIndex = {\n    [DepositStatus.Detected]: 0,\n    [DepositStatus.Confirmed]: 1,\n    [DepositStatus.Signed]: 2,\n    [DepositStatus.Reverted]: 3,\n    [DepositStatus.Submitted]: 4,\n};\n/**\n * A LockAndMintDeposit represents a deposit that has been made to a gateway\n * address.\n *\n * Once it has been detected, the steps required to complete the mint are:\n * 1. Wait for the transaction to be mined. The number of confirmations here\n * depends on the asset.\n * 2. Submit the deposit to RenVM and wait for a signature.\n * 3. Submit the deposit to the lock-chain.\n *\n * Each of these steps can be performed using their respective methods. Each\n * of these return a PromiEvent, meaning that in addition to being a promise,\n * they also emit events that can be listened to.\n *\n * ```ts\n * await deposit.confirmed();\n * await deposit.signed();\n * await deposit.mint();\n * ```\n */\nexport class LockAndMintDeposit {\n    /** @hidden */\n    constructor(depositDetails, params, renVM, state) {\n        /** @hidden */\n        this._initialize = async () => {\n            await this.refreshStatus();\n            this._state.token = await this.params.to.resolveTokenGatewayContract(this.params.asset);\n            return this;\n        };\n        /**\n         * `txHash` returns the RenVM transaction hash, which is distinct from the\n         * lock or mint chain transaction hashes. It can be used to query the\n         * lock-and-mint details from RenVM  once they've been submitted to it.\n         *\n         * The RenVM txHash is a URL-base64 string.\n         *\n         * ```ts\n         * deposit.txHash();\n         * // > \"QNM87rNDuxx54H7VK7D_NAU0u_mjk09-G25IJZL1QrI\"\n         * ```\n         */\n        this.txHash = () => {\n            // The type of `txHash` is a function instead of a string to match the\n            // interface of BurnAndRelease.\n            return this._state.txHash;\n        };\n        /**\n         * `queryTx` fetches the RenVM transaction details of the deposit.\n         *\n         * ```ts\n         * await deposit.queryTx();\n         * // > { to: \"...\", hash: \"...\", status: \"done\", in: {...}, out: {...} }\n         */\n        this.queryTx = async () => {\n            if (DepositStatusIndex[this.status] >=\n                DepositStatusIndex[DepositStatus.Signed] &&\n                this._state.queryTxResult) {\n                return this._state.queryTxResult;\n            }\n            const response = await this.renVM.queryMintOrBurn(this._state.selector, fromBase64(this.txHash()));\n            this._state.queryTxResult = response;\n            // Update status.\n            if (response.out && response.out.revert !== undefined) {\n                this.status = DepositStatus.Reverted;\n                this.revertReason = response.out.revert.toString();\n            }\n            else if (response.out && response.out.signature) {\n                if (DepositStatusIndex[this.status] <\n                    DepositStatusIndex[DepositStatus.Signed]) {\n                    this.status = DepositStatus.Signed;\n                }\n            }\n            return response;\n        };\n        /**\n         * `refreshStatus` fetches the deposit's status on the mint-chain, RenVM\n         * and lock-chain to calculate it's [[DepositStatus]].\n         *\n         * ```ts\n         * await deposit.refreshStatus();\n         * // > \"signed\"\n         * ```\n         */\n        this.refreshStatus = async () => {\n            const status = await (async () => {\n                let queryTxResult;\n                // Fetch sighash.\n                try {\n                    queryTxResult = await this.queryTx();\n                }\n                catch (_error) {\n                    // Ignore error.\n                    queryTxResult = null;\n                }\n                try {\n                    // Ensure that\n                    const transaction = await this.findTransaction();\n                    if (transaction !== undefined) {\n                        return DepositStatus.Submitted;\n                    }\n                }\n                catch (_error) {\n                    // Ignore error.\n                }\n                try {\n                    queryTxResult =\n                        queryTxResult === undefined\n                            ? await this.queryTx()\n                            : queryTxResult;\n                    if (queryTxResult &&\n                        queryTxResult.txStatus === TxStatus.TxStatusDone) {\n                        // Check if transaction was reverted.\n                        if (queryTxResult.out &&\n                            queryTxResult.out.revert !== undefined) {\n                            this.status = DepositStatus.Reverted;\n                            this.revertReason = queryTxResult.out.revert.toString();\n                        }\n                        else {\n                            return DepositStatus.Signed;\n                        }\n                    }\n                }\n                catch (_error) {\n                    // Ignore error.\n                }\n                try {\n                    const confirmations = await this.confirmations();\n                    if (confirmations.current >= confirmations.target) {\n                        return DepositStatus.Confirmed;\n                    }\n                }\n                catch (_error) {\n                    // Ignore error.\n                }\n                return DepositStatus.Detected;\n            })();\n            this.status = status;\n            return status;\n        };\n        /**\n         * `confirmations` returns the deposit's current and target number of\n         * confirmations on the lock-chain.\n         *\n         * ```ts\n         * await deposit\n         *  .confirmations();\n         * // > { current: 4, target: 6 }\n         * ```\n         */\n        this.confirmations = async () => {\n            const { current, target, } = await this.params.from.transactionConfidence(this.depositDetails.transaction);\n            return {\n                current,\n                target: isDefined(this._state.targetConfirmations)\n                    ? this._state.targetConfirmations\n                    : target,\n            };\n        };\n        this.confirmationTarget = async () => {\n            if (isDefined(this._state.targetConfirmations)) {\n                return this._state.targetConfirmations;\n            }\n            let target;\n            const getConfirmationTarget = this.renVM.getConfirmationTarget;\n            if (getConfirmationTarget) {\n                target = await retryNTimes(async () => getConfirmationTarget(this._state.selector, this.params.from), 2);\n            }\n            const defaultConfirmations = this._state.renNetwork && this._state.renNetwork.isTestnet ? 2 : 6;\n            this._state.targetConfirmations = target || defaultConfirmations;\n            return this._state.targetConfirmations;\n        };\n        /**\n         * `confirmed` will return once the deposit has reached the target number of\n         * confirmations.\n         *\n         * It returns a PromiEvent which emits a `\"confirmation\"` event with the\n         * current and target number of confirmations as the event parameters.\n         *\n         * The events emitted by the PromiEvent are:\n         * 1. `\"confirmation\"` - called when a new confirmation is seen\n         * 2. `\"target\"` - called immediately to make the target confirmations\n         * available.\n         *\n         * ```ts\n         * await deposit\n         *  .confirmed()\n         *  .on(\"target\", (target) => console.log(`Waiting for ${target} confirmations`))\n         *  .on(\"confirmation\", (confs, target) => console.log(`${confs}/${target}`))\n         * ```\n         *\n         * @category Main\n         */\n        this.confirmed = () => {\n            const promiEvent = newPromiEvent();\n            (async () => {\n                try {\n                    promiEvent.emit(\"target\", await this.confirmationTarget());\n                }\n                catch (error) {\n                    this._state.logger.error(error);\n                }\n                // If the transaction has been confirmed according to RenVM, return.\n                const transactionIsConfirmed = () => DepositStatusIndex[this.status] >=\n                    DepositStatusIndex[DepositStatus.Confirmed] ||\n                    (this._state.queryTxResult &&\n                        TxStatusIndex[this._state.queryTxResult.txStatus] >=\n                            TxStatusIndex[TxStatus.TxStatusPending]);\n                let iterationCount = 0;\n                let currentConfidenceRatio = 0;\n                // Continue while the transaction isn't confirmed and the promievent\n                // isn't cancelled.\n                while (!promiEvent._isCancelled() && !transactionIsConfirmed()) {\n                    // In the first loop, submit to RenVM immediately.\n                    if (iterationCount % 5 === 0) {\n                        try {\n                            if (!this._state.renTxSubmitted) {\n                                await this._submitMintTransaction();\n                            }\n                            await this.queryTx();\n                            if (transactionIsConfirmed()) {\n                                break;\n                            }\n                        }\n                        catch (error) {\n                            // Ignore error.\n                            this._state.logger.debug(error);\n                        }\n                    }\n                    try {\n                        const confidence = await this.confirmations();\n                        const confidenceRatio = confidence.target === 0\n                            ? 1\n                            : confidence.current / confidence.target;\n                        if (confidenceRatio > currentConfidenceRatio) {\n                            currentConfidenceRatio = confidenceRatio;\n                            promiEvent.emit(\"confirmation\", confidence.current, confidence.target);\n                        }\n                        if (confidenceRatio >= 1) {\n                            break;\n                        }\n                        this._state.logger.debug(`deposit confidence: ${confidence.current} / ${confidence.target}`);\n                    }\n                    catch (error) {\n                        this._state.logger.error(`Error fetching transaction confidence: ${extractError(error)}`);\n                    }\n                    await sleep(this._state.config.networkDelay);\n                    iterationCount += 1;\n                }\n                // Update status.\n                if (DepositStatusIndex[this.status] <\n                    DepositStatusIndex[DepositStatus.Confirmed]) {\n                    this.status = DepositStatus.Confirmed;\n                }\n                return this;\n            })()\n                .then(promiEvent.resolve)\n                .catch(promiEvent.reject);\n            return promiEvent;\n        };\n        /**\n         * `signed` waits for RenVM's signature to be available.\n         *\n         * It returns a PromiEvent which emits a `\"txHash\"` event with the deposit's\n         * RenVM txHash (aka Transaction ID).\n         *\n         * ```ts\n         * await deposit\n         *  .signed()\n         *  .on(\"txHash\", (txHash) => console.log(txHash))\n         * ```\n         *\n         * The events emitted by the PromiEvent are:\n         * 1. `txHash` - the RenVM transaction hash of the deposit.\n         * 2. `status` - the RenVM status of the transaction, of type [[TxStatus]].\n         *\n         * @category Main\n         */\n        this.signed = () => {\n            const promiEvent = newPromiEvent();\n            (async () => {\n                let txHash = this.txHash();\n                // If the transaction has been reverted, throw the revert reason.\n                if (this.status === DepositStatus.Reverted) {\n                    throw new Error(this.revertReason ||\n                        `RenVM transaction ${txHash} reverted.`);\n                }\n                // Check if the signature is already available.\n                if (DepositStatusIndex[this.status] >=\n                    DepositStatusIndex[DepositStatus.Signed] &&\n                    this._state.queryTxResult &&\n                    this._state.queryTxResult.out) {\n                    return this;\n                }\n                promiEvent.emit(\"txHash\", txHash);\n                this._state.logger.debug(\"RenVM txHash:\", txHash);\n                // Try to submit to RenVM. If that fails, see if they already\n                // know about the transaction.\n                try {\n                    txHash = await this._submitMintTransaction();\n                }\n                catch (error) {\n                    // this.logger.error(error);\n                    try {\n                        // Check if the darknodes have already seen the transaction\n                        const queryTxResponse = await this.queryTx();\n                        if (queryTxResponse.txStatus === TxStatus.TxStatusNil) {\n                            throw new Error(`Transaction ${txHash} has not been submitted previously.`);\n                        }\n                        txHash = queryTxResponse.hash;\n                    }\n                    catch (errorInner) {\n                        let submitted = false;\n                        // If transaction is not found, check for RenVM v0.2 error message.\n                        if (errorInner.code === RenJSErrors.RenVMTransactionNotFound) {\n                            if (error.code === RenJSErrors.AmountTooSmall ||\n                                error.code === RenJSErrors.DepositSpentOrNotFound) {\n                                this.status = DepositStatus.Reverted;\n                                this.revertReason = String((error || {}).message).replace(/Node returned status \\d+ with reason: /, \"\");\n                                throw new Error(this.revertReason);\n                            }\n                            else {\n                                // Retry submitting 2 more times to reduce chance\n                                // of network issues causing problems.\n                                txHash = await retryNTimes(async () => this._submitMintTransaction(), 2, 5 * SECONDS);\n                                submitted = true;\n                            }\n                        }\n                        // Ignore errorInner.\n                        this._state.logger.debug(errorInner);\n                        if (!submitted) {\n                            throw error;\n                        }\n                    }\n                }\n                const response = await this.renVM.waitForTX(this._state.selector, fromBase64(txHash), (status) => {\n                    promiEvent.emit(\"status\", status);\n                    this._state.logger.debug(\"transaction status:\", status);\n                }, () => promiEvent._isCancelled(), this._state.config.networkDelay);\n                this._state.queryTxResult = response;\n                // Update status.\n                if (response.out && response.out.revert !== undefined) {\n                    this.status = DepositStatus.Reverted;\n                    this.revertReason = response.out.revert.toString();\n                    throw new Error(this.revertReason);\n                }\n                else if (response.out && response.out.signature) {\n                    if (DepositStatusIndex[this.status] <\n                        DepositStatusIndex[DepositStatus.Signed]) {\n                        this.status = DepositStatus.Signed;\n                    }\n                    this._state.logger.debug(\"signature:\", response.out && response.out.signature);\n                }\n                return this;\n            })()\n                .then(promiEvent.resolve)\n                .catch(promiEvent.reject);\n            return promiEvent;\n        };\n        /**\n         * `findTransaction` checks if the deposit signature has already been\n         * submitted to the mint chain.\n         *\n         * ```ts\n         * await deposit.findTransaction();\n         * // > \"0x1234\" // (or undefined)\n         * ```\n         */\n        this.findTransaction = async () => {\n            const sigHash = this._state.queryTxResult &&\n                this._state.queryTxResult.out &&\n                this._state.queryTxResult.out.revert === undefined\n                ? this._state.queryTxResult.out.sighash\n                : undefined;\n            // Check if the signature has already been submitted\n            this.mintTransaction = await this.params.to.findTransaction(this.params.asset, this._state.nHash, sigHash);\n            return this.mintTransaction;\n        };\n        /**\n         * `mint` submits the RenVM signature to the mint chain.\n         *\n         * It returns a PromiEvent and the events emitted depend on the mint chain.\n         *\n         * The PromiEvent's events are defined by the mint-chain implementation. For\n         * Ethereum, it emits the same events as a Web3 PromiEvent.\n         *\n         * @category Main\n         */\n        this.mint = (override) => {\n            const promiEvent = newPromiEvent();\n            (async () => {\n                if (!this._state.queryTxResult) {\n                    throw new Error(`Unable to submit to Ethereum without signature. Call 'signed' first.`);\n                }\n                const overrideArray = Object.keys(override || {}).map((key) => ({\n                    name: key,\n                    value: (override || {})[key],\n                }));\n                // Override contract call parameters that have been passed in to\n                // \"mint\".\n                let contractCalls = overrideContractCalls(this.params.contractCalls || [], { contractParams: overrideArray });\n                // Filter parameters that should be included in the payload hash but\n                // not the contract call.\n                contractCalls = contractCalls.map((call) => ({\n                    ...call,\n                    contractParams: call.contractParams\n                        ? call.contractParams.filter((param) => !param.onlyInPayload)\n                        : call.contractParams,\n                }));\n                const asset = this.params.asset;\n                this.mintTransaction = await this.params.to.submitMint(asset, contractCalls, this._state.queryTxResult, promiEvent);\n                // Update status.\n                this.status = DepositStatus.Submitted;\n                return this.mintTransaction;\n            })()\n                .then(promiEvent.resolve)\n                .catch(promiEvent.reject);\n            return promiEvent;\n        };\n        // Private methods /////////////////////////////////////////////////////////\n        /**\n         * `_submitMintTransaction` will create the RebVN mint transaction and return\n         * its txHash. If `config.submit` is true, it will also submit it to RenVM.\n         *\n         * Note that `_submitMintTransaction`'s return type changes from `string` to\n         * `Promise<string>` if `config.submit` is true. This may be split up into\n         * two methods in the future to avoid this weirdness - likely once the `v1`\n         * RPC format is phased out.\n         *\n         * @param config Set `config.submit` to `true` to submit the transaction.\n         */\n        this._submitMintTransaction = async () => {\n            const { token } = this._state;\n            if (!token) {\n                throw new Error(`Deposit object must be initialized.`);\n            }\n            const expectedTxHash = this.txHash();\n            // Return if the transaction has already been successfully submitted.\n            if (this._state.renTxSubmitted) {\n                return expectedTxHash;\n            }\n            // The transaction has already been submitted and accepted.\n            if (this._state.renTxSubmitted) {\n                return expectedTxHash;\n            }\n            const encodedHash = await this.renVM.submitMint({\n                ...this._state,\n                token,\n            });\n            const returnedTxHash = this.renVM.version(this._state.selector) >= 2\n                ? toURLBase64(encodedHash)\n                : toBase64(encodedHash);\n            // Indicate that the tx has been submitted successfully.\n            this._state.renTxSubmitted = true;\n            if (returnedTxHash !== expectedTxHash) {\n                this._state.logger.warn(`Unexpected txHash returned from RenVM. Received: ${returnedTxHash}, expected: ${expectedTxHash}`);\n            }\n            this._state.renTxSubmitted = true;\n            return returnedTxHash;\n        };\n        this.validateParams = () => {\n            assertObject({\n                from: \"object\",\n                to: \"object\",\n                contractCalls: \"any[]\",\n                asset: \"string\",\n                txHash: \"string | undefined\",\n                nonce: \"Buffer | string | undefined\",\n                tags: \"string[] | undefined\",\n            }, { params: this.params });\n            if (this.params.contractCalls) {\n                this.params.contractCalls.map((contractCall) => {\n                    assertType(\"string\", {\n                        sendTo: contractCall.sendTo,\n                        contractFn: contractCall.contractFn,\n                    });\n                });\n            }\n        };\n        assertObject({\n            transaction: \"any\",\n            amount: \"string\",\n        }, {\n            depositDetails: depositDetails,\n        });\n        assertObject({\n            selector: \"string\",\n            logger: \"object\",\n            renNetwork: \"object\",\n            gPubKey: \"Buffer\",\n            gHash: \"Buffer\",\n            pHash: \"Buffer\",\n            targetConfirmations: \"number | undefined\",\n            config: \"object\",\n        }, { state });\n        this.depositDetails = depositDetails;\n        this.params = params;\n        this.renVM = renVM;\n        // this._state = state;\n        // `processDeposit` will call `refreshStatus` which will set the proper\n        // status.\n        this.status = DepositStatus.Detected;\n        const { txHash, contractCalls, nonce } = this.params;\n        if (!nonce) {\n            throw new Error(`No nonce passed in to LockAndMintDeposit.`);\n        }\n        if (!txHash && (!contractCalls || !contractCalls.length)) {\n            throw new Error(`Must provide Ren transaction hash or contract call details.`);\n        }\n        this.validateParams();\n        const deposit = this.depositDetails;\n        const providedTxHash = this.params.txHash\n            ? renVMHashToBase64(this.params.txHash, this.renVM.version(state.selector) >= 2)\n            : undefined;\n        if (!nonce) {\n            throw new Error(\"Unable to submit to RenVM without nonce.\");\n        }\n        if (!contractCalls || !contractCalls.length) {\n            throw new Error(`Unable to submit to RenVM without contract call details.`);\n        }\n        // Last contract call\n        const { contractParams, sendTo, contractFn } = contractCalls[contractCalls.length - 1];\n        const filteredContractParams = contractParams\n            ? contractParams.filter((contractParam) => !contractParam.notInPayload)\n            : contractParams;\n        const encodedParameters = new AbiCoder().encodeParameters((filteredContractParams || []).map((i) => i.type), (filteredContractParams || []).map((i) => i.value));\n        if (this.params.tags && this.params.tags.length > 1) {\n            throw new Error(\"Providing multiple tags is not supported yet.\");\n        }\n        const { pHash } = state;\n        const transactionDetails = this.params.from.transactionRPCFormat(this.depositDetails.transaction, renVM.version(state.selector) >= 2);\n        const nHash = generateNHash(fromHex(nonce), transactionDetails.txid, transactionDetails.txindex, renVM.version(state.selector) >= 2);\n        const outputHashFormat = renVM.version(state.selector) >= 2\n            ? \"\"\n            : this.params.from.depositV1HashString(deposit);\n        const fnABI = payloadToMintABI(contractFn, filteredContractParams || []);\n        const tags = this.params.tags && this.params.tags.length\n            ? [this.params.tags[0]]\n            : [];\n        this._state = {\n            ...state,\n            // gHash\n            // gPubKey\n            nHash,\n            nonce: fromHex(nonce),\n            output: this.params.from.transactionRPCFormat(deposit.transaction, renVM.version(state.selector) >= 2),\n            amount: deposit.amount,\n            payload: fromHex(encodedParameters),\n            pHash,\n            to: renVM.version(state.selector) >= 2\n                ? strip0x(sendTo)\n                : Ox(sendTo),\n            fn: contractFn,\n            fnABI,\n            tags,\n            // Will be set in the next statement.\n            txHash: \"\",\n            renTxSubmitted: false,\n        };\n        this._state.txHash = (renVM.version(this._state.selector) >= 2\n            ? toURLBase64\n            : toBase64)(this.renVM.mintTxHash({\n            ...this._state,\n            outputHashFormat,\n        }));\n        if (providedTxHash &&\n            !fromBase64(providedTxHash).equals(fromBase64(this.txHash()))) {\n            throw new Error(`Inconsistent RenVM transaction hash: got ${providedTxHash} but expected ${this.txHash()}.`);\n        }\n        {\n            // Debug log\n            const { to: _to, from: _from, ...restOfParams } = this.params;\n            this._state.logger.debug(\"LockAndMintDeposit created\", depositDetails, restOfParams);\n        }\n    }\n}\n//# sourceMappingURL=lockAndMint.js.map","/**\n *\n *\n *\n * These functions will be abstracted away behind Ren's `multiwallet` library.\n *\n *\n *\n */\n\nimport Web3 from \"web3\";\nimport { Ethereum, EthereumConfigMap } from \"@renproject/chains-ethereum\";\nimport { AbiItem, RenNetwork } from \"@renproject/interfaces\";\nimport BigNumber from \"bignumber.js\";\nimport { HttpProvider } from \"web3-providers\";\n\nimport { getNetwork, NETWORK } from \"../network\";\nimport { Chain } from \"./chains\";\nimport { getMintChainObject } from \"./mint\";\n\nexport type Wallet = Web3;\n\ninterface InjectedEthereum extends HttpProvider {\n    enable: () => Promise<void>;\n}\n\n// tslint:disable-next-line: no-any\ndeclare global {\n    interface Window {\n        ethereum?: InjectedEthereum;\n        web3?: Web3 | undefined;\n    }\n}\n\nconst ERC20ABI: AbiItem[] = [\n    {\n        inputs: [\n            {\n                name: \"_owner\",\n                type: \"address\",\n            },\n        ],\n        name: \"balanceOf\",\n        outputs: [\n            {\n                name: \"balance\",\n                type: \"uint256\",\n            },\n        ],\n        type: \"function\",\n    },\n    {\n        inputs: [],\n        name: \"decimals\",\n        outputs: [\n            {\n                name: \"\",\n                type: \"uint8\",\n            },\n        ],\n        type: \"function\",\n    },\n];\n\nconst getBalance = async (\n    mintChain: Chain,\n    mintChainProvider: any,\n    token: string\n): Promise<string> => {\n    const web3 = new Web3(mintChainProvider);\n\n    const network = getNetwork(mintChain, token, NETWORK.isTestnet);\n    const expectedNetwork = EthereumConfigMap[network];\n\n    // const connectedNetID = await new Web3(mintChainProvider).eth.net.getId();\n    // if (connectedNetID !== expectedNetwork.networkID) {\n    //     throw new Error(\n    //         `Wrong wallet network ${connectedNetID} - expected ${expectedNetwork.networkID}.`\n    //     );\n    // }\n    const web3Address = (await web3.eth.getAccounts())[0];\n    const tokenAddress = await (getMintChainObject(\n        mintChain,\n        mintChainProvider,\n        token\n    ) as Ethereum).getTokenContractAddress(token);\n    const tokenContract = new web3.eth.Contract(\n        ERC20ABI as AbiItem[],\n        tokenAddress\n    );\n    const decimals = await tokenContract.methods.decimals().call();\n    const balance = await tokenContract.methods.balanceOf(web3Address).call();\n    const amount = new BigNumber(balance)\n        .div(\n            new BigNumber(10).exponentiatedBy(\n                new BigNumber(decimals).toNumber()\n            )\n        )\n        .toFixed(4, BigNumber.ROUND_DOWN);\n    return amount;\n};\n\nconst addressIsValid = (address: string): boolean => {\n    return !!(address && address.match(/(^0x[A-Fa-f0-9]{40}$)|(^.*\\.eth$)/));\n};\n\nexport const Wallet = {\n    // getWallet,\n    getBalance,\n    addressIsValid,\n};\n","// tslint:disable: no-console\n\n// The following are also available from a combined \"@renproject/chains\" package.\nimport { Filecoin } from \"@renproject/chains-filecoin\";\nimport { Terra } from \"@renproject/chains-terra\";\nimport {\n    Bitcoin,\n    BitcoinCash,\n    DigiByte,\n    Dogecoin,\n    Zcash,\n} from \"@renproject/chains-bitcoin\";\nimport { LockChain, MintChain, TxStatus } from \"@renproject/interfaces\";\nimport RenJS from \"@renproject/ren\";\nimport { BurnAndRelease } from \"@renproject/ren/build/main/burnAndRelease\";\nimport BigNumber from \"bignumber.js\";\n\nimport { NETWORK } from \"../network\";\nimport { BurnDetails, DepositDetails } from \"../ui/useTransactionStorage\";\nimport { Asset, Chain } from \"./chains\";\nimport { getMintChainObject } from \"./mint\";\n\nexport enum BurnStatus {\n    BURNT = \"Burnt\",\n    DONE = \"Done\",\n    ERROR = \"Error\",\n}\n\nexport const startBurn = async (\n    renJS: RenJS,\n    mintChain: Chain,\n    mintChainProvider: any,\n    asset: Asset,\n    recipientAddress: string,\n    amount: string,\n    fromAddress: string,\n    updateTransaction: (\n        txHash: string,\n        status: Partial<BurnDetails> | Partial<DepositDetails>\n    ) => void\n): Promise<BurnAndRelease> => {\n    let to: LockChain;\n    switch (asset) {\n        case Asset.BTC:\n            to = Bitcoin().Address(recipientAddress);\n            break;\n        case Asset.ZEC:\n            to = Zcash().Address(recipientAddress);\n            break;\n        case Asset.BCH:\n            to = BitcoinCash().Address(recipientAddress);\n            break;\n        case Asset.FIL:\n            to = Filecoin().Address(recipientAddress);\n            break;\n        case Asset.DGB:\n            to = DigiByte().Address(recipientAddress);\n            break;\n        case Asset.LUNA:\n            to = Terra().Address(recipientAddress);\n            break;\n        case Asset.DOGE:\n            to = Dogecoin().Address(recipientAddress);\n            break;\n        default:\n            throw new Error(`Unsupported asset ${asset}.`);\n    }\n    await to.initialize(NETWORK);\n    if (to.utils.addressIsValid && !to.utils.addressIsValid(recipientAddress)) {\n        throw new Error(`Invalid recipient address ${recipientAddress}`);\n    }\n    const value = new BigNumber(amount)\n        .times(new BigNumber(10).exponentiatedBy(await to.assetDecimals(asset)))\n        .toFixed();\n    const from: MintChain = getMintChainObject(\n        mintChain,\n        mintChainProvider,\n        asset,\n        fromAddress,\n        value\n    );\n\n    const burnAndRelease = await renJS.burnAndRelease({\n        asset,\n        from,\n        to,\n    });\n\n    let txHash: string | undefined;\n\n    const target = await burnAndRelease.confirmationTarget();\n\n    await burnAndRelease.burn().on(\"confirmation\", (confs) => {\n        if (txHash) {\n            updateTransaction(txHash, {\n                confirmations: confs,\n                targetConfs: target,\n            });\n        }\n    });\n\n    txHash = await burnAndRelease.txHash();\n\n    burnAndRelease\n        .release()\n        .on(\"status\", (renVMStatus: TxStatus) => {\n            if (txHash) {\n                updateTransaction(txHash, { renVMStatus });\n            }\n        })\n        .then(() => {\n            if (txHash) {\n                updateTransaction(txHash, { status: BurnStatus.DONE });\n            }\n        });\n\n    return burnAndRelease;\n};\n","import * as React from \"react\";\n\nimport BigNumber from \"bignumber.js\";\nimport RenJS from \"@renproject/ren\";\nimport { BurnAndRelease } from \"@renproject/ren/build/main/burnAndRelease\";\nimport { Loading } from \"@renproject/react-components\";\n\nimport { Asset, Assets, Chain } from \"../lib/chains\";\nimport { NETWORK } from \"../network\";\nimport { BurnDetails, DepositDetails } from \"./useTransactionStorage\";\n\ninterface Props {\n    asset: Asset;\n    renJS: RenJS;\n    mintChain: Chain;\n    mintChainProvider: any | null;\n    balance: string | null;\n    addBurn: (txHash: string, deposit: BurnAndRelease) => void;\n    startBurn: (\n        renJS: RenJS,\n        mintChain: Chain,\n        mintChainProvider: any,\n        asset: Asset,\n        recipientAddress: string,\n        amount: string,\n        fromAddress: string,\n        updateTransaction: (\n            txHash: string,\n            transaction: Partial<BurnDetails | DepositDetails>\n        ) => void\n    ) => Promise<BurnAndRelease>;\n    connectMintChain: () => void;\n    getDefaultMintChainAddress: () => Promise<string> | string;\n    updateTransaction: (\n        txHash: string,\n        transaction: Partial<BurnDetails | DepositDetails>\n    ) => void;\n}\n\nexport const BurnForm: React.FC<Props> = ({\n    asset,\n    renJS,\n    mintChain,\n    mintChainProvider,\n    balance,\n    startBurn,\n    connectMintChain,\n    getDefaultMintChainAddress,\n    addBurn,\n    updateTransaction,\n}) => {\n    const [errorMessage, setErrorMessage] = React.useState(\n        null as string | null\n    );\n\n    const [recipientAddress, setRecipientAddress] = React.useState(\"\");\n    const [amount, setAmount] = React.useState(\"\");\n\n    const [submitting, setSubmitting] = React.useState(false);\n\n    const onSubmit = React.useCallback(\n        async (event: React.FormEvent<HTMLFormElement>) => {\n            event.preventDefault();\n            setSubmitting(true);\n            try {\n                if (!mintChainProvider) {\n                    throw new Error(\"Please use a Web3 browser\");\n                }\n                if (!amount) {\n                    throw new Error(\"Please enter a valid amount.\");\n                }\n                if (new BigNumber(amount).lte(0.00005)) {\n                    throw new Error(\"Amount must be greater than 0.00005\");\n                }\n                setErrorMessage(null);\n                const burn = await startBurn(\n                    renJS,\n                    mintChain,\n                    mintChainProvider,\n                    asset,\n                    recipientAddress,\n                    amount,\n                    await getDefaultMintChainAddress(),\n                    updateTransaction\n                );\n                const txHash = await burn.txHash();\n                if (burn.burnDetails) {\n                    addBurn(txHash, burn);\n                }\n            } catch (error) {\n                console.error(error);\n                setErrorMessage(\n                    String(\n                        error.message || error.error || JSON.stringify(error)\n                    )\n                );\n            }\n            setSubmitting(false);\n        },\n        [\n            amount,\n            mintChainProvider,\n            asset,\n            mintChain,\n            recipientAddress,\n            renJS,\n            startBurn,\n            updateTransaction,\n            addBurn,\n            getDefaultMintChainAddress,\n        ]\n    );\n\n    const burnMaximumValue = React.useCallback(() => {\n        if (balance === null) {\n            return;\n        }\n        setAmount(balance);\n    }, [balance]);\n\n    return (\n        <form onSubmit={onSubmit}>\n            <div className=\"send\">\n                <input\n                    value={recipientAddress}\n                    onChange={(e) => {\n                        setRecipientAddress(e.target.value);\n                    }}\n                    placeholder={`Recipient (${\n                        NETWORK.isTestnet ? \"Testnet\" : \"\"\n                    } ${\n                        (\n                            Assets.get(asset) || {\n                                name: asset.toUpperCase(),\n                            }\n                        ).name\n                    } address)`}\n                />\n            </div>\n            <div className=\"send\">\n                <div className=\"send\">\n                    <input\n                        className={\"no-right-border\"}\n                        value={amount}\n                        onChange={(e) => {\n                            setAmount(e.target.value);\n                        }}\n                        placeholder=\"Amount\"\n                    />\n                    <div\n                        role=\"button\"\n                        className={`box box-action box-blue ${\n                            !balance ? \"disabled\" : \"\"\n                        }`}\n                        onClick={balance ? burnMaximumValue : undefined}\n                    >\n                        max\n                    </div>\n\n                    <div className=\"box\">{asset.toUpperCase()}</div>\n                </div>\n            </div>\n            <div className=\"send\">\n                {mintChainProvider ? (\n                    <button\n                        type=\"submit\"\n                        disabled={!amount || !recipientAddress || submitting}\n                        className={`button blue`}\n                    >\n                        {submitting ? (\n                            <span\n                                style={{\n                                    display: \"flex\",\n                                    alignItems: \"center\",\n                                    justifyContent: \"center\",\n                                }}\n                            >\n                                Confirm in wallet... <Loading alt={true} />\n                            </span>\n                        ) : (\n                            <>Burn</>\n                        )}\n                    </button>\n                ) : (\n                    <button\n                        type=\"button\"\n                        className={`button light-blue`}\n                        onClick={connectMintChain}\n                    >\n                        Connect {mintChain} wallet\n                    </button>\n                )}\n            </div>\n            {errorMessage ? <p className=\"box red\">{errorMessage}</p> : <></>}\n        </form>\n    );\n};\n","import * as React from \"react\";\n\nimport { BurnAndRelease } from \"@renproject/ren/build/main/burnAndRelease\";\nimport BigNumber from \"bignumber.js\";\nimport { Loading } from \"@renproject/react-components\";\nimport { TxStatus } from \"@renproject/interfaces\";\n\nimport { BurnStatus } from \"../lib/burn\";\nimport { BurnDetails, DepositDetails } from \"./useTransactionStorage\";\n\nexport const ExternalLink: React.FC<\n    React.AnchorHTMLAttributes<HTMLAnchorElement>\n> = ({ children, ...props }) => (\n    <a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n        {children}\n    </a>\n);\n\ninterface Props {\n    txHash: string;\n    burn: BurnAndRelease;\n    status: BurnStatus;\n    confirmations: number;\n    targetConfs: number | undefined;\n    renVMStatus: TxStatus | undefined;\n    updateTransaction: (\n        txHash: string,\n        transaction: Partial<BurnDetails> | Partial<DepositDetails>\n    ) => void;\n}\n\nexport const BurnObject: React.FC<Props> = ({\n    txHash,\n    burn,\n    status,\n    confirmations,\n    targetConfs,\n    renVMStatus,\n    updateTransaction,\n}) => {\n    const {\n        params: { asset, from },\n        burnDetails,\n    } = burn;\n\n    const [errorMessage] = React.useState<string | null>(null);\n    const [showingFullError, setShowingFullError] = React.useState(false);\n    const showFullError = React.useCallback(() => setShowingFullError(true), [\n        setShowingFullError,\n    ]);\n\n    const [amountReadable, setAmountReadable] = React.useState<string | null>(\n        null\n    );\n\n    React.useEffect(() => {\n        (async () => {\n            const newValue: string | null =\n                (burn.burnDetails &&\n                    new BigNumber(burn.burnDetails.amount)\n                        .div(\n                            new BigNumber(10).exponentiatedBy(\n                                await burn.params.to.assetDecimals(\n                                    burn.params.asset\n                                )\n                            )\n                        )\n                        .toFixed()) ||\n                null;\n            setAmountReadable(newValue);\n        })().catch(console.error);\n    });\n\n    return (\n        <div className={`deposit ${status === BurnStatus.DONE ? \"done\" : \"\"}`}>\n            <p>\n                <b>\n                    Burnt{\" \"}\n                    {amountReadable ? (\n                        amountReadable\n                    ) : (\n                        <Loading style={{ display: \"inline-block\" }} />\n                    )}{\" \"}\n                    {asset}\n                </b>\n                {burnDetails && burnDetails.to ? (\n                    <> to {burnDetails.to}</>\n                ) : null}\n            </p>\n            <p>\n                <b>RenVM Hash:</b> {txHash}\n            </p>\n\n            <p>\n                <b>Status:</b>{\" \"}\n                {status === BurnStatus.BURNT ? (\n                    <>\n                        Submitting to RenVM...{\" \"}\n                        <Loading style={{ display: \"inline-block\" }} />\n                    </>\n                ) : (\n                    status\n                )}\n            </p>\n\n            {status === BurnStatus.BURNT && renVMStatus ? (\n                <p>\n                    <b>RenVM status:</b> {renVMStatus}\n                </p>\n            ) : null}\n\n            {status === BurnStatus.BURNT && confirmations !== null ? (\n                <p>\n                    <b>Confirmations:</b> {confirmations}\n                    {targetConfs ? <>/{targetConfs}</> : <></>}\n                </p>\n            ) : null}\n\n            {burnDetails && burnDetails.transaction ? (\n                <p>\n                    <b>{from.name} tx:</b>{\" \"}\n                    {from.utils.transactionExplorerLink ? (\n                        <ExternalLink\n                            href={from.utils.transactionExplorerLink(\n                                burnDetails.transaction\n                            )}\n                        >\n                            {from.transactionID(burnDetails.transaction)}\n                        </ExternalLink>\n                    ) : (\n                        burnDetails.transaction\n                    )}\n                </p>\n            ) : null}\n\n            {errorMessage ? (\n                <div className=\"red\" onClick={showFullError}>\n                    {errorMessage.length > 100 && !showingFullError ? (\n                        <>\n                            {errorMessage.slice(0, 74)}...{\" \"}\n                            <span\n                                style={{ color: \"darkgray\", cursor: \"pointer\" }}\n                            >\n                                (click for full error)\n                            </span>\n                        </>\n                    ) : (\n                        errorMessage\n                    )}\n                </div>\n            ) : null}\n        </div>\n    );\n};\n","import BSC from \"./bsc.png\";\nimport Metamask from \"./metamask.png\";\nimport WalletConnect from \"./walletconnect.png\";\n\nexport const Icons = {\n    BSC,\n    Metamask,\n    WalletConnect,\n};\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,/9j/2wCEAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDIBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIADwAPAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APf6KKKACiiigAooooAKKKKACkJABJ6Clrk4PHVnJrTWkkZjtc7Enbj5vcdh/k+2tOhUq35FexlUrQp253a5ka545uJ5jb6R+7jzjziuWf6Dt/P6VnJoPii/Xz2S5OeQZptp/InNeg2+g6Zb6lJqMNuomkHXsPUgdiay9d8ZW2k3aWsMf2iRW/fYOAg9PrXp0cTtTwlPXrc8+rh954menkcgNR8R+G51Wdp1XP3J/nRvof8AA13vh7xBDr1qzKhjniwJYzyBnoQe44NWopdP8QaXuASe2lGCp7H0PoRWddXOl+DtJCRRgMc7Iwfnkb1J/rWNarHELk9napfoa0qcqD5ue9PzOgorG8Oa+mvWTSeWY5oiBIvbnoQa2a4KlOVOThJWaO2E4zipR2YVx3ivwkLwSahp6YuRzJEP+WnuPf8AnXY0VdCvOjPngya1GFaPLI8ntPFmqWOlPp6vyPlSRvvRjuB/T0q3oXg6fV7SS7upXgR1JhyMlj/eOe3867K88K6Ze6qmoSxfOOXjH3ZD2JH+c1tAADAGAK9CrmMVH/Z48rerZwUsBJy/fu6Wx5RaX2qeD9VkhdOP44mPyyDswP8AWlsrLUfGOsPLNIdv/LSXHyxr2UD+lei6zodprdsIrlSHU5SVfvLVmwsLfTbRLW1jCRoPxJ9T6mqlmUOTnjH949L/AKiWAlzckpe4tbCadp1tpdmlraptjX82PqferVFFeRKTk7vc9RJRVkFFFFIYUUUUAFFFFABRRRQB/9k=\"","import { EthereumInjectedConnector } from \"@renproject/multiwallet-ethereum-injected-connector\";\nimport { EthereumWalletConnectConnector } from \"@renproject/multiwallet-ethereum-walletconnect-connector\";\nimport { BinanceSmartChainInjectedConnector } from \"@renproject/multiwallet-binancesmartchain-injected-connector\";\nimport { WalletPickerConfig } from \"@renproject/multiwallet-ui\";\nimport { RenNetwork } from \"@renproject/interfaces\";\n\nimport { Chain } from \"./chains\";\nimport { Icons } from \"../ui/icons\";\n\nexport const ethNetworkToRenNetwork = (id: string | number): RenNetwork => {\n    const network = {\n        1: RenNetwork.Mainnet,\n        4: RenNetwork.Testnet,\n        42: RenNetwork.Testnet,\n    }[parseInt(id as string)];\n    if (!network) {\n        throw new Error(`Unsupported network chain ${id}`);\n    }\n    return network;\n};\n\nexport const fantomNetworkToRenNetwork = (id: string | number): RenNetwork => {\n    const network = {\n        [250]: RenNetwork.Mainnet,\n        [0xfa2]: RenNetwork.Testnet,\n    }[parseInt(id as string)];\n    if (!network) {\n        throw new Error(`Unsupported network chain ${id}`);\n    }\n    return network;\n};\n\nexport const polygonNetworkToRenNetwork = (id: string | number): RenNetwork => {\n    const network = {\n        [137]: RenNetwork.Mainnet,\n        [80001]: RenNetwork.Testnet,\n    }[parseInt(id as string)];\n    if (!network) {\n        throw new Error(`Unsupported network chain ${id}`);\n    }\n    return network;\n};\n\nexport const bscNetworkToRenNetwork = (id: string | number): RenNetwork => {\n    const network = {\n        56: RenNetwork.Mainnet,\n        97: RenNetwork.Testnet,\n    }[parseInt(id as string)];\n    if (!network) {\n        throw new Error(`Unsupported network chain ${id}`);\n    }\n    return network;\n};\n\nexport const multiwalletOptions: WalletPickerConfig<any, any> = {\n    chains: {\n        [Chain.Ethereum]: [\n            {\n                name: \"Metamask\",\n                logo: Icons.Metamask,\n                connector: new EthereumInjectedConnector({\n                    debug: true,\n                    networkIdMapper: ethNetworkToRenNetwork,\n                }),\n            },\n            {\n                name: \"WalletConnect\",\n                logo: Icons.WalletConnect,\n                connector: new EthereumWalletConnectConnector({\n                    rpc: {\n                        1: `https://mainnet.infura.io/v3/${process.env.REACT_APP_INFURA_KEY}`,\n                        3: `https://kovan.infura.io/v3/${process.env.REACT_APP_INFURA_KEY}`,\n                        4: `https://rinkeby.infura.io/v3/${process.env.REACT_APP_INFURA_KEY}`,\n                        42: `https://kovan.infura.io/v3/${process.env.REACT_APP_INFURA_KEY}`,\n                    },\n                    qrcode: true,\n                    debug: false,\n                    networkIdMapper: ethNetworkToRenNetwork,\n                }),\n            },\n        ],\n        [Chain.Fantom]: [\n            {\n                name: \"Metamask\",\n                logo: Icons.Metamask,\n                connector: new EthereumInjectedConnector({\n                    debug: true,\n                    networkIdMapper: fantomNetworkToRenNetwork,\n                }),\n            },\n        ],\n        [Chain.Polygon]: [\n            {\n                name: \"Metamask\",\n                logo: Icons.Metamask,\n                connector: new EthereumInjectedConnector({\n                    debug: true,\n                    networkIdMapper: polygonNetworkToRenNetwork,\n                }),\n            },\n        ],\n        [Chain.BSC]: [\n            {\n                name: \"BinanceSmartWallet\",\n                logo: Icons.BSC,\n                connector: new BinanceSmartChainInjectedConnector({\n                    debug: true,\n                    networkIdMapper: bscNetworkToRenNetwork,\n                }),\n            },\n        ],\n    },\n};\n","import React from \"react\";\nimport { WalletPickerModal } from \"@renproject/multiwallet-ui\";\nimport { RenNetwork } from \"@renproject/interfaces\";\n\nimport { multiwalletOptions } from \"../lib/multiwallet\";\nimport { NETWORK } from \"../network\";\n\ninterface Props {\n    chain: string | null;\n    close: () => void;\n}\n\nexport const ConnectWallet: React.FC<Props> = ({ chain, close }) => {\n    return (\n        <WalletPickerModal\n            open={chain !== null}\n            options={{\n                targetNetwork: NETWORK.isTestnet\n                    ? RenNetwork.Testnet\n                    : RenNetwork.Mainnet,\n                chain: chain || \"\",\n                onClose: close,\n                config: multiwalletOptions,\n            }}\n        />\n    );\n};\n","import * as React from \"react\";\n\nimport { LockAndMintDeposit } from \"@renproject/ren/build/main/lockAndMint\";\nimport BigNumber from \"bignumber.js\";\nimport { Loading } from \"@renproject/react-components\";\nimport { TxStatus } from \"@renproject/interfaces\";\n\nimport { DepositStatus, handleDeposit, submitDeposit } from \"../lib/mint\";\nimport { BurnDetails, DepositDetails } from \"./useTransactionStorage\";\n\nexport const ExternalLink: React.FC<\n    React.AnchorHTMLAttributes<HTMLAnchorElement>\n> = ({ children, ...props }) => (\n    <a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n        {children}\n    </a>\n);\n\ninterface Props {\n    txHash: string;\n    deposit: LockAndMintDeposit;\n    status: DepositStatus;\n    updateTransaction: (\n        txHash: string,\n        transaction: Partial<BurnDetails> | Partial<DepositDetails>\n    ) => void;\n}\n\nexport const DepositObject: React.FC<Props> = ({\n    txHash,\n    deposit,\n    status,\n    updateTransaction,\n}) => {\n    const { asset, from, to } = deposit.params;\n    const { amount } = deposit.depositDetails;\n\n    const [errorMessage, setErrorMessage] = React.useState<string | null>(null);\n    const [showingFullError, setShowingFullError] = React.useState(false);\n    const showFullError = React.useCallback(() => setShowingFullError(true), [\n        setShowingFullError,\n    ]);\n\n    const [amountReadable, setAmountReadable] = React.useState<string | null>(\n        null\n    );\n\n    const onStatus = React.useCallback(\n        (newStatus: DepositStatus) => {\n            console.log(\"Step: handling status\", newStatus);\n            updateTransaction(txHash, { status: newStatus });\n        },\n        [updateTransaction, txHash]\n    );\n\n    // Confirmations\n    const [confirmations, setConfirmations] = React.useState<number | null>(\n        null\n    );\n    const [targetConfirmations, setTargetConfirmations] = React.useState<\n        number | null\n    >(null);\n    const onConfirmation = React.useCallback(\n        (confs: number, target: number) => {\n            console.log(\"Step: handle confirmation\", confs, target);\n            setConfirmations(confs);\n            setTargetConfirmations(target);\n        },\n        []\n    );\n\n    // The RenVM Status - see the TxStatus type.\n    const [renVMStatus, setRenVMStatus] = React.useState<TxStatus | null>(null);\n\n    const [mintTransaction, setMintTransaction] = React.useState<string | null>(\n        null\n    );\n\n    const step1 = React.useCallback(() => {\n        onStatus(DepositStatus.DETECTED);\n        console.log(\"Step: calling handleDeposit\");\n        handleDeposit(\n            deposit,\n            onStatus,\n            setTargetConfirmations,\n            onConfirmation,\n            setRenVMStatus,\n            setMintTransaction\n        ).catch((error) => {\n            console.error(error);\n            setErrorMessage(String(error.message || error));\n            onStatus(DepositStatus.ERROR);\n        });\n    }, [\n        onConfirmation,\n        setErrorMessage,\n        onStatus,\n        deposit,\n        setRenVMStatus,\n        setMintTransaction,\n    ]);\n\n    React.useEffect(() => {\n        (async () => {\n            console.log(\"Step: inside useEffect\");\n            step1();\n\n            const decimals = await from.assetDecimals(asset);\n            setAmountReadable(\n                new BigNumber(amount)\n                    .div(new BigNumber(10).exponentiatedBy(decimals))\n                    .toFixed()\n            );\n        })().catch(console.error);\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n    const [submitting, setSubmitting] = React.useState(false);\n    const step2 = React.useCallback(async () => {\n        setSubmitting(true);\n        setErrorMessage(null);\n        try {\n            await submitDeposit(deposit, onStatus, setMintTransaction);\n        } catch (error) {\n            console.error(error);\n            setErrorMessage(String(error.message || error));\n        }\n        setSubmitting(false);\n    }, [setSubmitting, deposit, onStatus]);\n\n    return (\n        <div\n            className={`deposit ${status === DepositStatus.DONE ? \"done\" : \"\"}`}\n        >\n            <p>\n                <b>\n                    Received{\" \"}\n                    {amountReadable ? (\n                        amountReadable\n                    ) : (\n                        <Loading style={{ display: \"inline-block\" }} />\n                    )}{\" \"}\n                    {asset}\n                </b>\n            </p>\n            <p>\n                <b>RenVM Hash:</b> {txHash}\n            </p>\n\n            <p>\n                <b>Status:</b>{\" \"}\n                {status === DepositStatus.CONFIRMED ? (\n                    <>\n                        Submitting to RenVM...{\" \"}\n                        <Loading style={{ display: \"inline-block\" }} />\n                    </>\n                ) : (\n                    status\n                )}\n            </p>\n            {deposit.depositDetails.transaction ? (\n                <p>\n                    <b>{from.name} tx:</b>{\" \"}\n                    {from.utils.transactionExplorerLink ? (\n                        <ExternalLink\n                            href={from.utils.transactionExplorerLink(\n                                deposit.depositDetails.transaction\n                            )}\n                        >\n                            {from.transactionID(\n                                deposit.depositDetails.transaction\n                            )}\n                        </ExternalLink>\n                    ) : typeof deposit.depositDetails.transaction ===\n                      \"string\" ? (\n                        deposit.depositDetails.transaction\n                    ) : (\n                        JSON.stringify(deposit.depositDetails.transaction)\n                    )}\n                </p>\n            ) : null}\n            {mintTransaction ? (\n                <p>\n                    <b>{to.name} tx:</b>{\" \"}\n                    {to.utils.transactionExplorerLink ? (\n                        <ExternalLink\n                            href={to.utils.transactionExplorerLink(\n                                mintTransaction\n                            )}\n                        >\n                            {mintTransaction}\n                        </ExternalLink>\n                    ) : typeof mintTransaction === \"string\" ? (\n                        mintTransaction\n                    ) : (\n                        JSON.stringify(mintTransaction)\n                    )}\n                </p>\n            ) : null}\n            {status === DepositStatus.CONFIRMED && renVMStatus ? (\n                <p>\n                    <b>RenVM status:</b> {renVMStatus}\n                </p>\n            ) : null}\n            {status === DepositStatus.DETECTED && confirmations !== null ? (\n                <p>\n                    <b>Confirmations:</b> {confirmations}/{targetConfirmations}\n                </p>\n            ) : null}\n            {status === DepositStatus.SIGNED ? (\n                <button\n                    disabled={submitting}\n                    onClick={step2}\n                    className=\"button blue\"\n                >\n                    {submitting ? <Loading /> : <>Submit to {to.name}</>}\n                </button>\n            ) : null}\n            {status === DepositStatus.ERROR ? (\n                <button\n                    disabled={submitting}\n                    onClick={step1}\n                    className=\"button blue\"\n                >\n                    Retry\n                </button>\n            ) : null}\n            {errorMessage ? (\n                <div className=\"red\" onClick={showFullError}>\n                    {errorMessage.length > 100 && !showingFullError ? (\n                        <>\n                            {errorMessage.slice(0, 74)}...{\" \"}\n                            <span\n                                style={{ color: \"darkgray\", cursor: \"pointer\" }}\n                            >\n                                (click for full error)\n                            </span>\n                        </>\n                    ) : (\n                        errorMessage\n                    )}\n                </div>\n            ) : null}\n        </div>\n    );\n};\n","// tslint:disable: no-console react-this-binding-issue\n\nimport * as React from \"react\";\n\nimport { Loading, SelectMarket } from \"@renproject/react-components\";\nimport { useMultiwallet } from \"@renproject/multiwallet-ui\";\nimport RenJS from \"@renproject/ren\";\nimport { RenNetwork } from \"@renproject/interfaces\";\n\nimport {\n    Asset,\n    Assets,\n    Chain,\n    Chains,\n    defaultAsset,\n    defaultMintChain,\n} from \"../lib/chains\";\nimport { Wallet } from \"../lib/ethereum\";\nimport { logLevel, startMint } from \"../lib/mint\";\nimport { startBurn } from \"../lib/burn\";\nimport { NETWORK } from \"../network\";\nimport { BurnForm } from \"./burnForm\";\nimport { BurnObject } from \"./burnObject\";\nimport { ConnectWallet } from \"./connectWallet\";\nimport { DepositObject } from \"./depositObject\";\nimport { MintForm } from \"./mintForm\";\nimport { useTransactionStorage } from \"./useTransactionStorage\";\n\nenum Tab {\n    Mint = \"Mint\",\n    Burn = \"Burn\",\n}\n\nexport const Main = () => {\n    const { enabledChains } = useMultiwallet();\n\n    const [asset, setAsset] = React.useState<Asset>(defaultAsset);\n    const [mintChain, setMintChain] = React.useState<Chain>(defaultMintChain);\n\n    const renJS = React.useMemo(\n        () =>\n            new RenJS(\n                NETWORK.isTestnet ? RenNetwork.Testnet : RenNetwork.Mainnet,\n                { logLevel }\n            ),\n        []\n    );\n\n    const [errorMessage, setErrorMessage] = React.useState(\n        null as string | null\n    );\n\n    const [balance, setBalance] = React.useState<string | null>(null);\n\n    const mintChainProvider =\n        enabledChains[mintChain] && enabledChains[mintChain].provider;\n\n    const updateBalance = React.useCallback(\n        (assetIn?: Asset) => {\n            setErrorMessage(null);\n\n            if (assetIn && assetIn !== asset) {\n                return;\n            }\n\n            setBalance(null);\n\n            if (mintChainProvider) {\n                Wallet.getBalance(mintChain, mintChainProvider, asset)\n                    .then(setBalance)\n                    .catch((error) => setErrorMessage(error.toString()));\n            } else {\n                setBalance(\"?\");\n            }\n        },\n        [mintChain, mintChainProvider, asset, setBalance]\n    );\n\n    React.useEffect(() => {\n        (async () => {\n            updateBalance();\n        })().catch(console.error);\n    }, [updateBalance]);\n\n    const [tab, setTab] = React.useState<Tab.Mint | Tab.Burn>(Tab.Mint);\n\n    const {\n        deposits,\n        addDeposit,\n        addBurn,\n        updateTransaction,\n    } = useTransactionStorage(updateBalance);\n\n    // Multiwallet modal\n    const [multiwalletChain, setMultiwalletChain] = React.useState<\n        string | null\n    >(null);\n    const closeMultiwallet = () => setMultiwalletChain(null);\n    const connectMintChain = React.useCallback(\n        () => setMultiwalletChain(mintChain),\n        [mintChain, setMultiwalletChain]\n    );\n    // const connectBurnChain = React.useCallback(() => setMultiwalletChain(mintChain), [mintChain, setMultiwalletChain]);\n\n    return (\n        <>\n            {NETWORK.isTestnet ? (\n                <div className=\"box testnet-warning\">TESTNET</div>\n            ) : null}\n            <div className=\"test-environment\">\n                <SelectMarket\n                    top\n                    thisToken={asset}\n                    otherToken={\"\"}\n                    allTokens={Assets}\n                    key={\"assetSelector\"}\n                    onMarketChange={setAsset as (asset: string) => void}\n                    getMarket={() => undefined}\n                />\n                <SelectMarket\n                    top\n                    thisToken={mintChain}\n                    otherToken={\"\"}\n                    allTokens={Chains}\n                    key={\"chainSelector\"}\n                    onMarketChange={setMintChain as (chain: string) => void}\n                    getMarket={() => undefined}\n                />\n                <div className=\"box\">\n                    {mintChainProvider ? (\n                        <>\n                            Your ren{asset} balance:{\" \"}\n                            {balance ? balance : <Loading />} ren{asset}\n                        </>\n                    ) : (\n                        <>Connect to see your balance.</>\n                    )}\n                </div>\n\n                <div>\n                    <div\n                        className={`tab ${\n                            tab === Tab.Mint ? \"tab--selected\" : \"\"\n                        }`}\n                        onClick={() => setTab(Tab.Mint)}\n                    >\n                        Mint\n                    </div>\n                    <div\n                        className={`tab ${\n                            tab === Tab.Burn ? \"tab--selected\" : \"\"\n                        }`}\n                        onClick={() => setTab(Tab.Burn)}\n                    >\n                        Burn\n                    </div>\n                </div>\n\n                <div className=\"form-outer\">\n                    {tab === Tab.Mint ? (\n                        <MintForm\n                            // Reset state when the asset is changed.\n                            key={asset + mintChain}\n                            asset={asset}\n                            mintChain={mintChain}\n                            mintChainProvider={mintChainProvider}\n                            renJS={renJS}\n                            startMint={startMint}\n                            addDeposit={addDeposit}\n                            connectMintChain={connectMintChain}\n                            getDefaultMintChainAddress={() =>\n                                enabledChains[mintChain].account as string\n                            }\n                            addressIsValid={() => true}\n                        />\n                    ) : (\n                        <BurnForm\n                            // Reset state when the asset is changed.\n                            key={asset + mintChain}\n                            asset={asset}\n                            mintChain={mintChain}\n                            mintChainProvider={\n                                enabledChains[mintChain] &&\n                                enabledChains[mintChain].provider\n                            }\n                            connectMintChain={connectMintChain}\n                            startBurn={startBurn}\n                            addBurn={addBurn}\n                            renJS={renJS}\n                            balance={balance}\n                            updateTransaction={updateTransaction}\n                            getDefaultMintChainAddress={() =>\n                                enabledChains[mintChain].account as string\n                            }\n                        />\n                    )}\n                </div>\n\n                {errorMessage ? (\n                    <p className=\"box red\">{errorMessage}</p>\n                ) : (\n                    <></>\n                )}\n            </div>\n\n            <div className=\"connect-wallets\">\n                <ConnectWallet\n                    chain={multiwalletChain}\n                    close={closeMultiwallet}\n                />\n            </div>\n\n            <div className=\"deposits\">\n                {Array.from(deposits.keys())\n                    .map((txHash) => {\n                        const depositDetails = deposits.get(txHash)!;\n                        if (depositDetails.type === \"BURN\") {\n                            const {\n                                burn,\n                                status,\n                                confirmations,\n                                targetConfs,\n                                renVMStatus,\n                            } = depositDetails;\n                            return (\n                                <BurnObject\n                                    key={txHash}\n                                    txHash={txHash}\n                                    burn={burn}\n                                    status={status}\n                                    confirmations={confirmations}\n                                    targetConfs={targetConfs}\n                                    updateTransaction={updateTransaction}\n                                    renVMStatus={renVMStatus}\n                                />\n                            );\n                        }\n                        const { deposit, status } = depositDetails;\n                        return (\n                            <DepositObject\n                                key={txHash}\n                                txHash={txHash}\n                                deposit={deposit}\n                                status={status}\n                                updateTransaction={updateTransaction}\n                            />\n                        );\n                    })\n                    .reverse()}\n            </div>\n        </>\n    );\n};\n","// tslint:disable: no-console react-this-binding-issue\n\nimport \"./ui/styles/index.scss\";\n\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport { MultiwalletProvider } from \"@renproject/multiwallet-ui\";\n\nimport { Main } from \"./ui/main\";\n\nconst render = (Main: () => JSX.Element) => {\n    ReactDOM.render(\n        <MultiwalletProvider>\n            <div className=\"main\">{<Main />}</div>\n        </MultiwalletProvider>,\n        document.getElementById(\"root\") as HTMLElement\n    );\n};\n\nrender(Main);\n\n// tslint:disable-next-line: no-any\nif ((module as any).hot) {\n    // tslint:disable-next-line: no-any\n    (module as any).hot.accept(\"./ui/main\", () => {\n        const NextMain = require(\"./ui/main\").Main;\n        render(NextMain);\n    });\n}\n","import React from \"react\";\nimport { OrderedMap } from \"immutable\";\nimport { LockAndMintDeposit } from \"@renproject/ren/build/main/lockAndMint\";\nimport { BurnAndRelease } from \"@renproject/ren/build/main/burnAndRelease\";\nimport { TxStatus } from \"@renproject/interfaces\";\n\nimport { Asset } from \"../lib/chains\";\nimport { DepositStatus } from \"../lib/mint\";\nimport { BurnStatus } from \"../lib/burn\";\n\nexport interface DepositDetails {\n    type: \"MINT\";\n    deposit: LockAndMintDeposit;\n    status: DepositStatus;\n}\n\nexport interface BurnDetails {\n    type: \"BURN\";\n    burn: BurnAndRelease;\n    status: BurnStatus;\n    confirmations: number;\n    targetConfs: number | undefined;\n    renVMStatus: TxStatus | undefined;\n}\n\nexport const useTransactionStorage = (\n    updateBalance: (asset: Asset) => void\n) => {\n    const [deposits, setDeposits] = React.useState(\n        OrderedMap<string, DepositDetails | BurnDetails>()\n    );\n\n    const addDeposit = React.useCallback(\n        (txHash: string, deposit: LockAndMintDeposit) => {\n            setDeposits((deposits) =>\n                deposits.get(txHash)\n                    ? deposits\n                    : deposits.set(txHash, {\n                          type: \"MINT\",\n                          deposit: deposit,\n                          status: DepositStatus.DETECTED,\n                      })\n            );\n        },\n        [setDeposits]\n    );\n\n    const addBurn = React.useCallback(\n        (txHash: string, burn: BurnAndRelease) => {\n            setDeposits((deposits) =>\n                deposits.get(txHash)\n                    ? deposits\n                    : deposits.set(txHash, {\n                          type: \"BURN\",\n                          burn: burn,\n                          status: BurnStatus.BURNT,\n                          confirmations: 0,\n                          targetConfs: undefined,\n                          renVMStatus: undefined,\n                      })\n            );\n        },\n        [setDeposits]\n    );\n\n    const updateTransaction = React.useCallback(\n        (txHash: string, newDetails: Partial<DepositDetails | BurnDetails>) => {\n            setDeposits((deposits) => {\n                const currentDeposit = deposits.get(txHash);\n                if (!currentDeposit) {\n                    return deposits;\n                }\n                if (currentDeposit.type === \"MINT\") {\n                    if (newDetails.status === DepositStatus.DONE) {\n                        updateBalance(\n                            currentDeposit.deposit.params.asset as Asset\n                        );\n                    }\n                    return deposits.set(txHash, {\n                        ...currentDeposit,\n                        ...newDetails,\n                    } as DepositDetails);\n                } else {\n                    if (newDetails.status === BurnStatus.BURNT) {\n                        updateBalance(\n                            currentDeposit.burn.params.asset as Asset\n                        );\n                    }\n                    return deposits.set(txHash, {\n                        ...currentDeposit,\n                        ...newDetails,\n                    } as BurnDetails);\n                }\n            });\n        },\n        [setDeposits, updateBalance]\n    );\n\n    return { deposits, addDeposit, addBurn, updateTransaction };\n};\n","import createHash from \"create-hash\";\nimport createKeccakHash from \"keccak\";\nexport const keccak256 = (msg) => createKeccakHash(\"keccak256\").update(msg).digest();\nexport const ripemd160 = (msg) => createHash(\"rmd160\").update(msg).digest();\nexport const sha256 = (msg) => createHash(\"sha256\").update(msg).digest();\nexport const hash160 = (publicKey) => ripemd160(sha256(publicKey));\n//# sourceMappingURL=hash.js.map","import { Callable, Ox } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nimport { EthereumBaseChain } from \"./base\";\nexport class EthereumClass extends EthereumBaseChain {\n    constructor(web3Provider, renNetwork) {\n        super(web3Provider, renNetwork);\n        this.getMintParams = (asset) => this._getParams ? this._getParams(asset) : undefined;\n        this.getBurnParams = (asset, burnPayload) => this._getParams ? this._getParams(asset, burnPayload) : undefined;\n        /** @category Main */\n        this.Address = (address, txConfig) => this.Account({ address }, txConfig);\n        /** @category Main */\n        this.Account = ({ value, address, }, txConfig) => {\n            this._getParams = async (asset, burnPayload) => {\n                if (!this.renNetworkDetails || !this.web3) {\n                    throw new Error(`Ethereum must be initialized before calling 'getContractCalls'.`);\n                }\n                if (!value) {\n                    // Mint\n                    if (!address) {\n                        throw new Error(`Must provide Ethereum recipient address.`);\n                    }\n                    // Resolve .ens name\n                    if (/.*\\.ens/.exec(address)) {\n                        address = await this.web3.eth.ens.getAddress(address);\n                    }\n                    return {\n                        contractCalls: [\n                            {\n                                sendTo: this.renNetworkDetails.addresses\n                                    .BasicAdapter,\n                                contractFn: \"mint\",\n                                contractParams: [\n                                    {\n                                        type: \"string\",\n                                        name: \"_symbol\",\n                                        value: asset,\n                                    },\n                                    {\n                                        type: \"address\",\n                                        name: \"_address\",\n                                        value: address,\n                                    },\n                                ],\n                                txConfig,\n                            },\n                        ],\n                    };\n                }\n                else {\n                    // Burn\n                    if (!value) {\n                        throw new Error(`Send amount must be provided in order to send directly to an address.`);\n                    }\n                    if (!burnPayload) {\n                        throw new Error(`Must provide burn recipient address`);\n                    }\n                    const addressToBuffer = Buffer.from(burnPayload);\n                    const gateway = await this.getGatewayContractAddress(asset);\n                    return {\n                        contractCalls: [\n                            {\n                                sendTo: gateway,\n                                contractFn: \"burn\",\n                                contractParams: [\n                                    {\n                                        type: \"bytes\",\n                                        name: \"_to\",\n                                        value: Ox(addressToBuffer),\n                                    },\n                                    {\n                                        type: \"uint256\",\n                                        name: \"_amount\",\n                                        value: new BigNumber(value).toFixed(),\n                                    },\n                                ],\n                                txConfig,\n                            },\n                        ],\n                    };\n                }\n            };\n            return this;\n        };\n        /** @category Main */\n        this.Contract = (contractCall) => {\n            this._getParams = (asset, burnPayload) => {\n                if (!this.renNetworkDetails) {\n                    throw new Error(`Ethereum must be initialized before calling 'getContractCalls'`);\n                }\n                if (typeof contractCall === \"function\") {\n                    if (!burnPayload) {\n                        throw new Error(`Must provide burn payload`);\n                    }\n                    const addressToBuffer = Buffer.from(burnPayload);\n                    return {\n                        contractCalls: [contractCall(Ox(addressToBuffer), asset)],\n                    };\n                }\n                else {\n                    return { contractCalls: [contractCall] };\n                }\n            };\n            return this;\n        };\n        /** @category Main */\n        this.Transaction = (transaction) => {\n            this._getParams = (_asset, _burnPayload) => {\n                return {\n                    transaction,\n                };\n            };\n            return this;\n        };\n        /** @category Main */\n        this.BurnNonce = (burnNonce) => {\n            this._getParams = (_asset, _burnPayload) => {\n                return {\n                    burnNonce,\n                };\n            };\n            return this;\n        };\n        this.toWei = (value) => new BigNumber(value)\n            .times(new BigNumber(10).exponentiatedBy(18))\n            .decimalPlaces(0)\n            .toFixed();\n        this.fromWei = (value) => new BigNumber(value)\n            .dividedBy(new BigNumber(10).exponentiatedBy(18))\n            .toFixed();\n    }\n}\n// @dev Removes any static fields, except `utils`.\nexport const Ethereum = Callable(EthereumClass);\n//# sourceMappingURL=ethereum.js.map","import { fromBase64 } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nexport var PackPrimitive;\n(function (PackPrimitive) {\n    PackPrimitive[\"Bool\"] = \"bool\";\n    PackPrimitive[\"U8\"] = \"u8\";\n    PackPrimitive[\"U16\"] = \"u16\";\n    PackPrimitive[\"U32\"] = \"u32\";\n    PackPrimitive[\"U64\"] = \"u64\";\n    PackPrimitive[\"U128\"] = \"u128\";\n    PackPrimitive[\"U256\"] = \"u256\";\n    PackPrimitive[\"Str\"] = \"string\";\n    PackPrimitive[\"Bytes\"] = \"bytes\";\n    PackPrimitive[\"Bytes32\"] = \"bytes32\";\n    PackPrimitive[\"Bytes65\"] = \"bytes65\";\n})(PackPrimitive || (PackPrimitive = {}));\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const unmarshalPackPrimitive = (type, value) => {\n    switch (type) {\n        // Booleans\n        case PackPrimitive.Bool:\n            return value;\n        // Integers\n        case PackPrimitive.U8:\n        case PackPrimitive.U16:\n        case PackPrimitive.U32:\n        case PackPrimitive.U64:\n        case PackPrimitive.U128:\n        case PackPrimitive.U256:\n            return new BigNumber(value);\n        // Strings\n        case PackPrimitive.Str:\n            return Buffer.from(value);\n        // Bytes\n        case PackPrimitive.Bytes:\n        case PackPrimitive.Bytes32:\n        case PackPrimitive.Bytes65:\n            return fromBase64(value);\n    }\n};\nexport const unmarshalPackStruct = (type, value) => {\n    const struct = {};\n    for (const member of type.struct) {\n        const keys = Object.keys(member);\n        if (keys.length === 0) {\n            throw new Error(`Invalid struct member with no entries.`);\n        }\n        if (keys.length > 1) {\n            throw new Error(`Invalid struct member with multiple entries.`);\n        }\n        const key = Object.keys(member)[0];\n        const memberType = member[key];\n        if (value && !value.hasOwnProperty(key)) {\n            throw new Error(`Missing pack value for key ${key}.`);\n        }\n        struct[key] = unmarshalPackValue(memberType, value[key]);\n    }\n    return struct;\n};\nexport const unmarshalPackValue = (type, value) => {\n    if (typeof type === \"object\") {\n        return unmarshalPackStruct(type, value);\n    }\n    else if (typeof type === \"string\") {\n        if (type === \"nil\")\n            return null;\n        return unmarshalPackPrimitive(type, value);\n    }\n    throw new Error(`Unknown value type ${String(type)}${!type ? ` for value ${String(value)}` : \"\"}.`);\n};\nexport const unmarshalTypedPackValue = ({ t, v }) => {\n    return unmarshalPackValue(t, v);\n};\n//# sourceMappingURL=pack.js.map","import { getRenNetworkDetails, RenNetwork, } from \"@renproject/interfaces\";\nimport { Callable, utilsWithChainNetwork } from \"@renproject/utils\";\nimport { EthereumClass } from \"./ethereum\";\nimport { addressIsValid, findTransactionBySigHash } from \"./utils\";\nexport const renBscTestnet = {\n    name: \"BSC Testnet\",\n    chain: \"bscTestnet\",\n    isTestnet: true,\n    chainLabel: \"BSC Testnet\",\n    networkID: 97,\n    infura: \"https://data-seed-prebsc-1-s1.binance.org:8545\",\n    // etherscan: \"https://explorer.binance.org/smart-testnet\",\n    etherscan: \"https://testnet.bscscan.com\",\n    addresses: {\n        GatewayRegistry: \"0x838F881876f53a772D2F8E2f8aa2e4a996431495\",\n        BasicAdapter: \"0x7de1253A8da6620351ec477b38BdC6a55FCd0f85\",\n    },\n};\nexport const renBscDevnet = {\n    ...renBscTestnet,\n    addresses: {\n        GatewayRegistry: \"0x87e83f957a2F3A2E5Fe16d5C6B22e38FD28bdc06\",\n        BasicAdapter: \"0x105435a9b0f375B179e5e43A16228C04F01Fb2ee\",\n    },\n};\nexport const renBscMainnet = {\n    name: \"BSC Mainnet\",\n    chain: \"bscMainnet\",\n    isTestnet: false,\n    chainLabel: \"BSC Mainnet\",\n    networkID: 56,\n    infura: \"https://bsc-dataseed.binance.org/\",\n    etherscan: \"https://bscscan.com\",\n    addresses: {\n        GatewayRegistry: \"0x21C482f153D0317fe85C60bE1F7fa079019fcEbD\",\n        BasicAdapter: \"0xAC23817f7E9Ec7EB6B7889BDd2b50e04a44470c5\",\n    },\n};\nexport const BscConfigMap = {\n    [RenNetwork.MainnetVDot3]: renBscMainnet,\n    [RenNetwork.TestnetVDot3]: renBscTestnet,\n    [RenNetwork.DevnetVDot3]: renBscDevnet,\n};\nconst resolveBSCNetwork = (renNetwork) => {\n    if (!renNetwork) {\n        return BscConfigMap[RenNetwork.MainnetVDot3];\n    }\n    if (renNetwork.addresses) {\n        return renNetwork;\n    }\n    else {\n        const details = getRenNetworkDetails(renNetwork);\n        return details.isTestnet\n            ? details.name === RenNetwork.DevnetVDot3\n                ? renBscDevnet\n                : renBscTestnet\n            : renBscMainnet;\n    }\n};\nexport class BinanceSmartChainClass extends EthereumClass {\n    constructor(web3Provider, renNetwork) {\n        // To be compatible with the Ethereum chain class, the first parameter\n        // is a web3Provider and the second the RenVM network. However,\n        super(web3Provider, resolveBSCNetwork(renNetwork));\n        this.chain = BinanceSmartChainClass.chain;\n        this.name = BinanceSmartChainClass.chain;\n        this.legacyName = undefined;\n        this.utils = utilsWithChainNetwork(BinanceSmartChainClass.utils, () => this.renNetworkDetails);\n        this.initialize = (renNetwork) => {\n            this.renNetworkDetails =\n                this.renNetworkDetails ||\n                    BscConfigMap[getRenNetworkDetails(renNetwork).name];\n            if (!this.renNetworkDetails) {\n                throw new Error(`Unable to set ${this.name} network for RenVM network ${getRenNetworkDetails(renNetwork).name}. Please provide ${this.name} network details to ${this.name} constructor.`);\n            }\n            return this;\n        };\n        // Override findTransaction for BSC to impose 5000 log limit.\n        this.findTransaction = async (asset, nHash, sigHash) => {\n            if (!this.renNetworkDetails || !this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            return findTransactionBySigHash(this.renNetworkDetails, this.web3, asset, nHash, sigHash, 5000);\n        };\n    }\n}\nBinanceSmartChainClass.chain = \"BinanceSmartChain\";\nBinanceSmartChainClass.utils = {\n    resolveChainNetwork: resolveBSCNetwork,\n    addressIsValid,\n    addressExplorerLink: (address, network) => `${(BinanceSmartChain.utils.resolveChainNetwork(network) ||\n        renBscMainnet).etherscan}/address/${address}`,\n    transactionExplorerLink: (transaction, network) => `${(BinanceSmartChain.utils.resolveChainNetwork(network) ||\n        renBscMainnet).etherscan}/tx/${transaction}`,\n};\n// @dev Removes any static fields, except `utils`.\nexport const BinanceSmartChain = Callable(BinanceSmartChainClass);\n//# sourceMappingURL=bsc.js.map","import { getRenNetworkDetails, RenNetwork, } from \"@renproject/interfaces\";\nimport { Callable, utilsWithChainNetwork } from \"@renproject/utils\";\nimport { EthereumClass } from \"./ethereum\";\nimport { addressIsValid } from \"./utils\";\nexport const renFantomTestnet = {\n    name: \"Fantom Testnet\",\n    chain: \"fantomTestnet\",\n    isTestnet: true,\n    chainLabel: \"Fantom Testnet\",\n    networkID: 0xfa2,\n    infura: \"https://rpc.testnet.fantom.network/\",\n    etherscan: \"https://testnet.ftmscan.com\",\n    addresses: {\n        GatewayRegistry: \"0x1207765B53697a046DCF4AE95bd4dE99ef9D3D3C\",\n        BasicAdapter: \"0x07deB3917d234f787AEd86E0c88E829277D4a33b\",\n    },\n};\nexport const renFantomDevnet = {\n    ...renFantomTestnet,\n    addresses: {\n        GatewayRegistry: \"0xD881213F5ABF783d93220e6bD3Cc21706A8dc1fC\",\n        BasicAdapter: \"0xD087b0540e172553c12DEEeCDEf3dFD21Ec02066\",\n    },\n};\nexport const renFantomMainnet = {\n    name: \"Fantom Mainnet\",\n    chain: \"fantomMainnet\",\n    isTestnet: false,\n    chainLabel: \"Fantom Mainnet\",\n    networkID: 250,\n    infura: \"https://rpcapi.fantom.network/\",\n    etherscan: \"https://ftmscan.com\",\n    addresses: {\n        GatewayRegistry: \"\",\n        BasicAdapter: \"\",\n    },\n};\nexport const FantomConfigMap = {\n    [RenNetwork.TestnetVDot3]: renFantomTestnet,\n    [RenNetwork.MainnetVDot3]: renFantomMainnet,\n    [RenNetwork.DevnetVDot3]: renFantomDevnet,\n};\nconst resolveFantomNetwork = (renNetwork) => {\n    if (!renNetwork) {\n        return FantomConfigMap[RenNetwork.MainnetVDot3];\n    }\n    if (renNetwork.addresses) {\n        return renNetwork;\n    }\n    else {\n        const details = getRenNetworkDetails(renNetwork);\n        return details.isTestnet\n            ? details.name === RenNetwork.DevnetVDot3\n                ? renFantomDevnet\n                : renFantomTestnet\n            : renFantomMainnet;\n    }\n};\nexport class FantomClass extends EthereumClass {\n    constructor(web3Provider, renNetwork) {\n        // To be compatible with the Ethereum chain class, the first parameter\n        // is a web3Provider and the second the RenVM network. However,\n        super(web3Provider, resolveFantomNetwork(renNetwork));\n        this.chain = FantomClass.chain;\n        this.name = FantomClass.chain;\n        this.legacyName = undefined;\n        this.utils = utilsWithChainNetwork(FantomClass.utils, () => this.renNetworkDetails);\n        this.initialize = (renNetwork) => {\n            this.renNetworkDetails =\n                this.renNetworkDetails ||\n                    FantomConfigMap[getRenNetworkDetails(renNetwork).name];\n            if (!this.renNetworkDetails) {\n                throw new Error(`Unable to set ${this.name} network for RenVM network ${getRenNetworkDetails(renNetwork).name}. Please provide ${this.name} network details to ${this.name} constructor.`);\n            }\n            return this;\n        };\n    }\n}\nFantomClass.chain = \"Fantom\";\nFantomClass.utils = {\n    resolveChainNetwork: resolveFantomNetwork,\n    addressIsValid,\n    addressExplorerLink: (address, network) => `${(FantomClass.utils.resolveChainNetwork(network) ||\n        renFantomMainnet).etherscan}/address/${address}`,\n    transactionExplorerLink: (transaction, network) => `${(Fantom.utils.resolveChainNetwork(network) || renFantomMainnet)\n        .etherscan}/tx/${transaction}`,\n};\n// @dev Removes any static fields, except `utils`.\nexport const Fantom = Callable(FantomClass);\n//# sourceMappingURL=fantom.js.map","import { getRenNetworkDetails, RenNetwork, } from \"@renproject/interfaces\";\nimport { Callable, utilsWithChainNetwork } from \"@renproject/utils\";\nimport { EthereumClass } from \"./ethereum\";\nimport { addressIsValid } from \"./utils\";\nexport const renPolygonTestnet = {\n    name: \"Polygon Testnet\",\n    chain: \"polygonTestnet\",\n    isTestnet: true,\n    chainLabel: \"Polygon Testnet\",\n    networkID: 80001,\n    infura: \"https://rpc-mumbai.maticvigil.com/\",\n    etherscan: \"https://testnet.ftmscan.com\",\n    addresses: {\n        GatewayRegistry: \"0xD881213F5ABF783d93220e6bD3Cc21706A8dc1fC\",\n        BasicAdapter: \"0xD087b0540e172553c12DEEeCDEf3dFD21Ec02066\",\n    },\n};\nexport const renPolygonMainnet = {\n    name: \"Polygon Mainnet\",\n    chain: \"polygonMainnet\",\n    isTestnet: false,\n    chainLabel: \"Polygon Mainnet\",\n    networkID: 137,\n    infura: \"https://rpc-mainnet.maticvigil.com/\",\n    etherscan: \"https://explorer.matic.network\",\n    addresses: {\n        GatewayRegistry: \"\",\n        BasicAdapter: \"\",\n    },\n};\nexport const PolygonConfigMap = {\n    [RenNetwork.TestnetVDot3]: renPolygonTestnet,\n    [RenNetwork.MainnetVDot3]: renPolygonMainnet,\n};\nconst resolvePolygonNetwork = (renNetwork) => {\n    if (!renNetwork) {\n        return PolygonConfigMap[RenNetwork.MainnetVDot3];\n    }\n    if (renNetwork.addresses) {\n        return renNetwork;\n    }\n    else {\n        const details = getRenNetworkDetails(renNetwork);\n        return details.isTestnet ? renPolygonTestnet : renPolygonMainnet;\n    }\n};\nexport class PolygonClass extends EthereumClass {\n    constructor(web3Provider, renNetwork) {\n        // To be compatible with the Ethereum chain class, the first parameter\n        // is a web3Provider and the second the RenVM network. However,\n        super(web3Provider, resolvePolygonNetwork(renNetwork));\n        this.chain = PolygonClass.chain;\n        this.name = PolygonClass.chain;\n        this.legacyName = undefined;\n        this.utils = utilsWithChainNetwork(PolygonClass.utils, () => this.renNetworkDetails);\n        this.initialize = (renNetwork) => {\n            this.renNetworkDetails =\n                this.renNetworkDetails ||\n                    PolygonConfigMap[getRenNetworkDetails(renNetwork).name];\n            if (!this.renNetworkDetails) {\n                throw new Error(`Unable to set ${this.name} network for RenVM network ${getRenNetworkDetails(renNetwork).name}. Please provide ${this.name} network details to ${this.name} constructor.`);\n            }\n            return this;\n        };\n    }\n}\nPolygonClass.chain = \"Polygon\";\nPolygonClass.utils = {\n    resolveChainNetwork: resolvePolygonNetwork,\n    addressIsValid,\n    addressExplorerLink: (address, network) => `${(Polygon.utils.resolveChainNetwork(network) ||\n        renPolygonMainnet).etherscan}/address/${address}`,\n    transactionExplorerLink: (transaction, network) => `${(Polygon.utils.resolveChainNetwork(network) ||\n        renPolygonMainnet).etherscan}/tx/${transaction}`,\n};\n// @dev Removes any static fields, except `utils`.\nexport const Polygon = Callable(PolygonClass);\n//# sourceMappingURL=polygon.js.map","import { NullLogger, } from \"@renproject/interfaces\";\nimport { assert, fixSignature, fromBase64, Ox, signatureToBuffer, toBase64, } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nimport { RenVMType } from \"./value\";\nconst decodeString = (input) => fromBase64(input).toString();\nconst decodeBytes = (input) => fromBase64(input);\nconst decodeNumber = (input) => new BigNumber(input);\n/**\n * Validate an argument returned from RenVM.\n *\n * @param name The expected name.\n * @param type The expected type.\n * @param arg The actual argument returned.\n */\nconst assertArgumentType = (name, type, arg) => {\n    assert(arg.type === type, `Expected argument ${name} of type ${type} but got ${arg.name} of type ${arg.type}`);\n    return arg.value;\n};\nconst assertAndDecodeBytes = (name, type, arg) => {\n    try {\n        return decodeBytes(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        assertArgumentType(name, type, arg));\n    }\n    catch (error) {\n        error.message = `Unable to decode parameter ${name} with value ${String(arg.value)} (type ${typeof arg.value}): ${String(error.message)}`;\n        throw error;\n    }\n};\nconst assertAndDecodeNumber = (name, type, arg) => {\n    try {\n        return decodeNumber(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        assertArgumentType(name, type, arg));\n    }\n    catch (error) {\n        error.message = `Unable to decode parameter ${name} with value ${String(arg.value)} (type ${typeof arg.value}): ${String(error.message)}`;\n        throw error;\n    }\n};\nconst assertAndDecodeAddress = (name, type, arg) => {\n    try {\n        return Ox(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        assertArgumentType(name, type, arg));\n    }\n    catch (error) {\n        error.message = `Unable to decode parameter ${name} with value ${String(arg.value)} (type ${typeof arg.value}): ${String(error.message)}`;\n        throw error;\n    }\n};\nconst defaultPayload = {\n    name: \"p\",\n    type: RenVMType.ExtEthCompatPayload,\n    value: {\n        abi: \"W10=\",\n        value: \"\",\n        fn: \"\",\n    },\n};\nconst findField = (field, response) => {\n    for (const outField of response.tx.out || []) {\n        if (outField.name === field) {\n            return outField;\n        }\n    }\n    for (const outField of response.tx.autogen) {\n        if (outField.name === field) {\n            return outField;\n        }\n    }\n    for (const outField of response.tx.in) {\n        if (outField.name === field) {\n            return outField;\n        }\n    }\n    throw new Error(`Unable to find field ${field} in response from RenVM.`);\n};\nconst onError = (getP, defaultP) => {\n    try {\n        return getP();\n    }\n    catch (error) {\n        return defaultP;\n    }\n};\nexport const unmarshalMintTx = (response, logger = NullLogger) => {\n    // Note: Numbers are decoded and re-encoded to ensure they are in the correct format.\n    const pRaw = assertArgumentType(\"p\", RenVMType.ExtEthCompatPayload, onError(() => findField(\"p\", response), defaultPayload));\n    const token = assertAndDecodeAddress(\"token\", RenVMType.ExtTypeEthCompatAddress, findField(\"token\", response));\n    const to = assertAndDecodeAddress(\"to\", RenVMType.ExtTypeEthCompatAddress, findField(\"to\", response));\n    const n = assertAndDecodeBytes(\"n\", RenVMType.B32, findField(\"n\", response));\n    const p = {\n        abi: JSON.parse(decodeString(pRaw.abi)),\n        value: decodeBytes(pRaw.value),\n        fn: decodeString(pRaw.fn),\n    };\n    const phash = assertAndDecodeBytes(\"phash\", RenVMType.B32, findField(\"phash\", response));\n    const ghash = assertAndDecodeBytes(\"ghash\", RenVMType.B32, findField(\"ghash\", response));\n    const nhash = assertAndDecodeBytes(\"nhash\", RenVMType.B32, findField(\"nhash\", response));\n    const amount = assertAndDecodeNumber(\"amount\", RenVMType.U256, findField(\"amount\", response)).toFixed();\n    const utxoRaw = assertArgumentType(\"utxo\", RenVMType.ExtTypeBtcCompatUTXO, findField(\"utxo\", response));\n    const sighash = assertAndDecodeBytes(\"sighash\", RenVMType.B32, findField(\"sighash\", response));\n    const utxo = {\n        txHash: Ox(decodeBytes(utxoRaw.txHash), { prefix: \"\" }),\n        vOut: parseInt(utxoRaw.vOut, 10),\n        scriptPubKey: utxoRaw.scriptPubKey\n            ? Ox(decodeBytes(utxoRaw.scriptPubKey), { prefix: \"\" })\n            : \"\",\n        amount: decodeNumber(utxoRaw.amount).toFixed(),\n    };\n    const out = {\n        sighash,\n        ghash,\n        nhash,\n        phash,\n        amount,\n    };\n    if (response.tx.out) {\n        const [rArg, sArg, vArg] = [\n            findField(\"r\", response),\n            findField(\"s\", response),\n            findField(\"v\", response),\n        ];\n        const r = rArg.type === RenVMType.B\n            ? assertAndDecodeBytes(\"r\", RenVMType.B, rArg)\n            : assertAndDecodeBytes(\"r\", RenVMType.B32, rArg);\n        const s = sArg.type === RenVMType.B\n            ? assertAndDecodeBytes(\"s\", RenVMType.B, sArg)\n            : assertAndDecodeBytes(\"s\", RenVMType.B32, sArg);\n        const v = vArg.type === RenVMType.B\n            ? assertAndDecodeBytes(\"v\", RenVMType.B, vArg)[0]\n            : assertAndDecodeNumber(\"v\", RenVMType.U8, vArg).toNumber();\n        const signature = signatureToBuffer(fixSignature(r, s, v, sighash, phash, amount, to, token, nhash, false, logger));\n        out.signature = signature; // r, s, v\n    }\n    return {\n        hash: toBase64(decodeBytes(response.tx.hash)),\n        txStatus: response.txStatus,\n        to: response.tx.to,\n        in: { p, token, to, n, utxo },\n        out,\n    };\n};\nexport const unmarshalBurnTx = (response) => {\n    // TODO: Check that result is burn response.\n    // assert(\n    //     parseV1Selector(response.tx.to).from === Chain.Ethereum,\n    //     `Expected burn details but got back mint details (${response.tx.hash} - ${response.tx.to})`\n    // );\n    const [refArg, toArg, amountArg] = response.tx.in;\n    const ref = assertAndDecodeNumber(\"ref\", RenVMType.U64, refArg).toFixed();\n    const toRaw = assertArgumentType(\"to\", RenVMType.B, toArg);\n    let amount;\n    try {\n        amount = assertAndDecodeNumber(\"amount\", RenVMType.U256, amountArg).toFixed();\n    }\n    catch (error) {\n        amount = assertAndDecodeNumber(\"amount\", RenVMType.U64, amountArg).toFixed();\n    }\n    const to = toRaw;\n    // response.tx.to === Tokens.ZEC.Eth2Zec ?\n    //     utils.zec.addressFrom(toRaw) :\n    //     response.tx.to === Tokens.BCH.Eth2Bch ?\n    //         utils.bch.addressFrom(toRaw) :\n    //         utils.btc.addressFrom(toRaw);\n    return {\n        hash: toBase64(decodeBytes(response.tx.hash)),\n        to: response.tx.to,\n        in: { ref, to, amount },\n        txStatus: response.txStatus,\n    };\n};\nconst unmarshalAssetFees = (fees) => {\n    const { lock, release, ...tokens } = fees;\n    // TODO: Fix type errors.\n    return {\n        lock: decodeNumber(lock),\n        release: decodeNumber(release),\n        ...Object.keys(tokens).reduce((acc, token) => ({\n            ...acc,\n            [token]: {\n                mint: decodeNumber(fees[token].mint).toNumber(),\n                burn: decodeNumber(fees[token].burn).toNumber(),\n            },\n        }), {}),\n    };\n};\nexport const unmarshalFees = (response) => {\n    const fees = {};\n    for (const key of Object.keys(response)) {\n        fees[key] = unmarshalAssetFees(response[key]);\n    }\n    return fees;\n};\n//# sourceMappingURL=unmarshal.js.map","import { fromBase64 } from \"@renproject/utils\";\nimport BN from \"bn.js\";\nimport { PackPrimitive, } from \"./pack\";\nexport const marshalPackType = (type) => {\n    switch (type) {\n        case \"nil\":\n            return 0;\n        // KindBool is the kind of all Bool values.\n        case PackPrimitive.Bool:\n            return 1;\n        // KindU8 is the kind of all U8 values.\n        case PackPrimitive.U8:\n            return 2;\n        // KindU16 is the kind of all U16 values.\n        case PackPrimitive.U16:\n            return 3;\n        // KindU32 is the kind of all U32 values.\n        case PackPrimitive.U32:\n            return 4;\n        // KindU64 is the kind of all U64 values.\n        case PackPrimitive.U64:\n            return 5;\n        // KindU128 is the kind of all U128 values.\n        case PackPrimitive.U128:\n            return 6;\n        // KindU256 is the kind of all U256 values.\n        case PackPrimitive.U256:\n            return 7;\n        // KindString is the kind of all utf8 strings.\n        case PackPrimitive.Str:\n            return 10;\n        // KindBytes is the kind of all dynamic byte arrays.\n        case PackPrimitive.Bytes:\n            return 11;\n        // KindBytes32 is the kind of all 32-byte arrays.\n        case PackPrimitive.Bytes32:\n            return 12;\n        // KindBytes65 is the kind of all 65-byte arrays.\n        case PackPrimitive.Bytes65:\n            return 13;\n        // KindStruct is the kind of all struct values. It is abstract, because it does\n        // not specify the fields in the struct.\n        case \"struct\":\n            return 20;\n        // KindList is the kind of all list values. It is abstract, because it does\n        // not specify the type of the elements in the list.\n        case \"list\":\n            return 21;\n    }\n    throw new Error(`Unknown type ${String(type)}.`);\n};\nexport const marshalUint = (value, length) => {\n    try {\n        return new BN(typeof value === \"number\" ? value : value.toString()).toArrayLike(Buffer, \"be\", length);\n    }\n    catch (error) {\n        error.message = `Unable to marshal uint${length * 8} '${value}': ${String(error.message)}`;\n        throw error;\n    }\n};\nconst marshalU = (length) => (value) => marshalUint(value, length);\nexport const marshalU8 = marshalU(8 / 8);\nexport const marshalU16 = marshalU(16 / 8);\nexport const marshalU32 = marshalU(32 / 8);\nexport const marshalU64 = marshalU(64 / 8);\nexport const marshalU128 = marshalU(128 / 8);\nexport const marshalU256 = marshalU(256 / 8);\nconst withLength = (value) => Buffer.concat([marshalU32(value.length), value]);\nexport const marshalString = (value) => {\n    return withLength(Buffer.from(value));\n};\nexport const marshalPackStructType = (type) => {\n    const length = marshalU32(type.struct.length);\n    return Buffer.concat([\n        length,\n        ...type.struct.map((field) => {\n            const keys = Object.keys(field);\n            if (keys.length === 0) {\n                throw new Error(`Invalid struct field with no entries.`);\n            }\n            if (keys.length > 1) {\n                throw new Error(`Invalid struct field with multiple entries.`);\n            }\n            const key = Object.keys(field)[0];\n            const fieldType = field[key];\n            return Buffer.concat([\n                marshalString(key),\n                marshalPackTypeDefinition(fieldType),\n            ]);\n        }),\n    ]);\n};\nexport const marshalPackTypeDefinition = (type) => {\n    if (typeof type === \"object\") {\n        return Buffer.concat([\n            Buffer.from([marshalPackType(\"struct\")]),\n            marshalPackStructType(type),\n        ]);\n    }\n    else if (typeof type === \"string\") {\n        return Buffer.from([marshalPackType(type)]);\n    }\n    throw new Error(`Unable to marshal type ${String(type)}.`);\n};\nexport const marshalPackPrimitive = (type, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) => {\n    switch (type) {\n        // Booleans\n        case PackPrimitive.Bool:\n            return marshalU8(value ? 1 : 0);\n        // Integers\n        case PackPrimitive.U8:\n            return marshalU8(value);\n        case PackPrimitive.U16:\n            return marshalU16(value);\n        case PackPrimitive.U32:\n            return marshalU32(value);\n        case PackPrimitive.U64:\n            return marshalU64(value);\n        case PackPrimitive.U128:\n            return marshalU128(value);\n        case PackPrimitive.U256:\n            return marshalU256(value);\n        // Strings\n        case PackPrimitive.Str: {\n            return marshalString(value);\n        }\n        // Bytes\n        case PackPrimitive.Bytes: {\n            return withLength(Buffer.isBuffer(value)\n                ? Buffer.from(value)\n                : // Supports base64 url format\n                    fromBase64(value));\n        }\n        case PackPrimitive.Bytes32:\n        case PackPrimitive.Bytes65:\n            return Buffer.isBuffer(value)\n                ? Buffer.from(value)\n                : // Supports base64 url format\n                    fromBase64(value);\n    }\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const marshalPackStruct = (type, value) => {\n    return Buffer.concat(type.struct.map((member) => {\n        const keys = Object.keys(member);\n        if (keys.length === 0) {\n            throw new Error(`Invalid struct member with no entries.`);\n        }\n        if (keys.length > 1) {\n            throw new Error(`Invalid struct member with multiple entries.`);\n        }\n        const key = Object.keys(member)[0];\n        const memberType = member[key];\n        try {\n            return marshalPackValue(memberType, value[key]);\n        }\n        catch (error) {\n            error.message = `Unable to marshal struct field ${key}: ${String(error.message)}`;\n            throw error;\n        }\n    }));\n};\nexport const marshalPackValue = (type, \n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvalue) => {\n    if (typeof type === \"object\") {\n        return marshalPackStruct(type, value);\n    }\n    else if (typeof type === \"string\") {\n        if (type === \"nil\")\n            return Buffer.from([]);\n        return marshalPackPrimitive(type, value);\n    }\n    throw new Error(`Unknown value type ${String(type)}${!type ? ` for value ${String(value)}` : \"\"}`);\n};\nexport const marshalTypedPackValue = ({ t, v }) => {\n    const marshalledType = marshalPackTypeDefinition(t);\n    const marshalledValue = marshalPackValue(t, v);\n    return Buffer.concat([marshalledType, marshalledValue]);\n};\n//# sourceMappingURL=marshal.js.map","export enum Chain {\n    Ethereum = \"Ethereum\",\n    BSC = \"BSC\",\n    Fantom = \"Fantom\",\n    Polygon = \"Polygon\",\n}\n\nexport const Chains = new Map<Chain, { symbol: Chain; name: string }>()\n    .set(Chain.Ethereum, {\n        symbol: Chain.Ethereum,\n        name: \"Ethereum\",\n    })\n    .set(Chain.BSC, {\n        symbol: Chain.BSC,\n        name: \"Binance Smart Chain\",\n    })\n    .set(Chain.Fantom, {\n        symbol: Chain.Fantom,\n        name: \"Fantom\",\n    })\n    .set(Chain.Polygon, {\n        symbol: Chain.Polygon,\n        name: \"Polygon\",\n    });\nexport const defaultMintChain = Chain.Ethereum;\n\nexport enum Asset {\n    BTC = \"BTC\",\n    ZEC = \"ZEC\",\n    BCH = \"BCH\",\n    FIL = \"FIL\",\n    LUNA = \"LUNA\",\n    DGB = \"DGB\",\n    DOGE = \"DOGE\",\n}\nexport let Assets = new Map<Asset, { symbol: Asset; name: string }>()\n    .set(Asset.BTC, {\n        symbol: Asset.BTC,\n        name: \"Bitcoin\",\n    })\n    .set(Asset.ZEC, {\n        symbol: Asset.ZEC,\n        name: \"Zcash\",\n    })\n    .set(Asset.BCH, {\n        symbol: Asset.BCH,\n        name: \"BitcoinCash\",\n    })\n    .set(Asset.FIL, {\n        symbol: Asset.FIL,\n        name: \"Filecoin\",\n    })\n    .set(Asset.LUNA, {\n        symbol: Asset.LUNA,\n        name: \"Luna\",\n    })\n    .set(Asset.DGB, {\n        symbol: Asset.DGB,\n        name: \"DigiByte\",\n    })\n    .set(Asset.DOGE, {\n        symbol: Asset.DOGE,\n        name: \"Dogecoin\",\n    });\n\nexport const defaultAsset = Asset.FIL;\n","export var RenVMType;\n(function (RenVMType) {\n    RenVMType[\"Address\"] = \"address\";\n    RenVMType[\"Str\"] = \"str\";\n    RenVMType[\"B32\"] = \"b32\";\n    RenVMType[\"B\"] = \"b\";\n    RenVMType[\"I8\"] = \"i8\";\n    RenVMType[\"I16\"] = \"i16\";\n    RenVMType[\"I32\"] = \"i32\";\n    RenVMType[\"I64\"] = \"i64\";\n    RenVMType[\"I128\"] = \"i128\";\n    RenVMType[\"I256\"] = \"i256\";\n    RenVMType[\"U8\"] = \"u8\";\n    RenVMType[\"U16\"] = \"u16\";\n    RenVMType[\"U32\"] = \"u32\";\n    RenVMType[\"U64\"] = \"u64\";\n    RenVMType[\"U128\"] = \"u128\";\n    RenVMType[\"U256\"] = \"u256\";\n    RenVMType[\"Record\"] = \"record\";\n    RenVMType[\"List\"] = \"list\";\n    // Ext\n    RenVMType[\"ExtTypeEthCompatAddress\"] = \"ext_ethCompatAddress\";\n    RenVMType[\"ExtTypeBtcCompatUTXO\"] = \"ext_btcCompatUTXO\";\n    RenVMType[\"ExtTypeBtcCompatUTXOs\"] = \"ext_btcCompatUTXOs\";\n    RenVMType[\"ExtTypeEthCompatTx\"] = \"ext_ethCompatTx\";\n    RenVMType[\"ExtEthCompatPayload\"] = \"ext_ethCompatPayload\";\n})(RenVMType || (RenVMType = {}));\n//# sourceMappingURL=value.js.map","import BigNumber from \"bignumber.js\";\nimport { AbiCoder } from \"web3-eth-abi\";\nimport { assertType } from \"./assert\";\n/**\n * Represents 1 second for functions that accept a parameter in milliseconds.\n */\nexport const SECONDS = 1000;\n/**\n * Pauses the thread for the specified number of milliseconds.\n *\n * @param ms The number of milliseconds to pause for.\n */\nexport const sleep = async (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n/**\n * Remove 0x prefix from a hex string. If the input doesn't have a 0x prefix,\n * it's returned unchanged.\n *\n * @param hex The hex value to be prefixed.\n */\nexport const strip0x = (hex) => {\n    // Type validation\n    assertType(\"string\", { hex });\n    return hex.substring(0, 2) === \"0x\" ? hex.slice(2) : hex;\n};\n/**\n * Add a 0x prefix to a hex value, converting to a string first. If the input\n * is already prefixed, it's returned unchanged.\n *\n * @param hex The hex value to be prefixed.\n */\nexport const Ox = (hex, { prefix } = { prefix: \"0x\" }) => {\n    const hexString = typeof hex === \"string\" ? hex : hex.toString(\"hex\");\n    return hexString.substring(0, 2) === prefix\n        ? hexString\n        : `${prefix}${hexString}`;\n};\nexport const fromHex = (hex) => {\n    assertType(\"Buffer | string\", { hex });\n    return Buffer.isBuffer(hex) ? hex : Buffer.from(strip0x(hex), \"hex\");\n};\nexport const fromBase64 = (base64) => {\n    assertType(\"Buffer | string\", {\n        base64,\n    });\n    return Buffer.isBuffer(base64) ? base64 : Buffer.from(base64, \"base64\");\n};\nexport const toBase64 = (input) => {\n    assertType(\"Buffer\", { input });\n    return input.toString(\"base64\");\n};\nexport const fromBigNumber = (bn) => {\n    const bnStr = bn.toString(16);\n    // Pad if necessary\n    return Buffer.from(bnStr.length % 2 ? \"0\" + bnStr : bnStr, \"hex\");\n};\n// Unpadded alternate base64 encoding defined in RFC 4648, commonly used in\n// URLs.\nexport const toURLBase64 = (input) => {\n    assertType(\"Buffer | string\", {\n        input,\n    });\n    return (Buffer.isBuffer(input) ? input : fromHex(input))\n        .toString(\"base64\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\")\n        .replace(/\\=+$/, \"\");\n};\nexport const toReadable = (value, decimals) => new BigNumber(value).dividedBy(new BigNumber(10).exponentiatedBy(decimals));\nexport const fromReadable = (value, decimals) => new BigNumber(value)\n    .times(new BigNumber(10).exponentiatedBy(decimals))\n    .decimalPlaces(0);\nconst hasOwnProperty = (\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nobject, property) => {\n    return object.hasOwnProperty(property);\n};\nconst invalidError = (errorMessage) => errorMessage === \"\" ||\n    errorMessage === \"null\" ||\n    errorMessage === \"undefined\";\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const extractError = (error) => {\n    if (error && typeof error === \"object\") {\n        if (hasOwnProperty(error, \"response\") && error.response) {\n            const extractedError = extractError(error.response);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n        if (hasOwnProperty(error, \"data\") && error.data) {\n            const extractedError = extractError(error.data);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n        if (hasOwnProperty(error, \"error\") && error.error) {\n            const extractedError = extractError(error.error);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n        if (hasOwnProperty(error, \"context\") && error.context) {\n            const extractedError = extractError(error.context);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n        if (hasOwnProperty(error, \"message\") && error.message) {\n            const extractedError = extractError(error.message);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n        if (hasOwnProperty(error, \"statusText\") && error.statusText) {\n            const extractedError = extractError(error.statusText);\n            if (!invalidError(extractedError)) {\n                return extractedError;\n            }\n        }\n    }\n    try {\n        if (typeof error === \"string\") {\n            if (error.slice(0, 7) === \"Error: \") {\n                error = error.slice(7);\n            }\n            return error;\n        }\n        return JSON.stringify(error);\n    }\n    catch (innerError) {\n        // Ignore JSON error\n    }\n    return String(error);\n};\nexport const retryNTimes = async (fnCall, retries, timeout = 1 * SECONDS, // in ms\nlogger) => {\n    let returnError;\n    const errorMessages = new Set();\n    for (let i = 0; retries === -1 || i < retries; i++) {\n        try {\n            return await fnCall();\n        }\n        catch (error) {\n            // Fix error message.\n            const errorMessage = extractError(error);\n            errorMessages.add(errorMessage);\n            returnError = error;\n            if (i < retries || retries === -1) {\n                await sleep(timeout);\n                if (logger) {\n                    logger.warn(error);\n                }\n            }\n        }\n    }\n    returnError.message = Array.from(errorMessages).join(\", \");\n    throw returnError;\n};\n/**\n * Generates a random hex string (prefixed with '0x').\n *\n * @param bytes The number of bytes to generate.\n */\nexport const randomBytes = (bytes) => {\n    try {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (window) {\n            const uints = new Uint32Array(bytes / 4); // 4 bytes (32 bits)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            window.crypto.getRandomValues(uints);\n            let str = \"\";\n            for (const uint of uints) {\n                str +=\n                    \"0\".repeat(8 - uint.toString(16).length) +\n                        String(uint.toString(16));\n            }\n            return fromHex(str);\n        }\n    }\n    catch (error) {\n        // Ignore error\n    }\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const crypto = require(\"crypto\");\n    return crypto.randomBytes(bytes);\n};\n/**\n * Returns a random 32 byte Buffer.\n */\nexport const randomNonce = () => randomBytes(32);\nexport const emptyNonce = () => fromHex(\"00\".repeat(32));\nexport const rawEncode = (types, parameters) => fromHex(new AbiCoder().encodeParameters(types, parameters));\n/**\n * isDefined returns true if the parameter is defined and not null.\n */\nexport const isDefined = (x) => x !== null && x !== undefined;\n//# sourceMappingURL=common.js.map","import { assertType, sha256 } from \"@renproject/utils\";\nimport { marshalString, marshalTypedPackValue } from \"./pack/marshal\";\nimport { PackPrimitive } from \"./pack/pack\";\nexport const burnParamsType = {\n    struct: [\n        {\n            amount: PackPrimitive.U256,\n        },\n        {\n            to: PackPrimitive.Str,\n        },\n        {\n            nonce: PackPrimitive.Bytes32,\n        },\n    ],\n};\nexport const mintParamsType = () => ({\n    struct: [\n        {\n            txid: PackPrimitive.Bytes,\n        },\n        {\n            txindex: PackPrimitive.U32,\n        },\n        {\n            amount: PackPrimitive.U256,\n        },\n        {\n            payload: PackPrimitive.Bytes,\n        },\n        {\n            phash: PackPrimitive.Bytes32,\n        },\n        {\n            to: PackPrimitive.Str,\n        },\n        {\n            nonce: PackPrimitive.Bytes32,\n        },\n        {\n            nhash: PackPrimitive.Bytes32,\n        },\n        {\n            gpubkey: PackPrimitive.Bytes,\n        },\n        {\n            ghash: PackPrimitive.Bytes32,\n        },\n    ],\n});\nexport const hashTransaction = (version, selector, packValue) => {\n    assertType(\"string\", { version, selector });\n    return sha256(Buffer.concat([\n        marshalString(version),\n        marshalString(selector),\n        marshalTypedPackValue(packValue),\n    ]));\n};\n//# sourceMappingURL=transaction.js.map","import { NullLogger } from \"@renproject/interfaces\";\nimport { assertType } from \"./assert\";\nimport { fromBase64, fromHex, Ox, rawEncode, toBase64, toURLBase64, } from \"./common\";\nimport { keccak256 } from \"./hash\";\n// export const generateNHash = (tx: Tx): Buffer => {\n//     const encoded = rawEncode(\n//         [\"bytes32\", \"bytes32\"],\n//         [Ox(tx.hash), Ox(tx.args.n)],\n//     );\n//     return keccak256(encoded);\n// };\n/**\n * Hash the payloads associated with a RenVM cross-chain transaction.\n *\n * @param zip An array (or spread) of parameters with with types defined.\n */\nexport const generatePHash = (zip, logger = NullLogger) => {\n    // Check if they called as hashPayload([...]) instead of hashPayload(...)\n    const args = (Array.isArray(zip[0])\n        ? zip[0]\n        : zip).filter((arg) => !arg.notInPayload);\n    const types = args.map((param) => param.type);\n    const values = args.map((param) => param.value);\n    const message = rawEncode(types, values);\n    const digest = keccak256(message);\n    logger.debug(\"pHash\", toBase64(digest), Ox(message), args);\n    return digest; // sha3 can accept a Buffer\n};\nexport const generateSHash = (selector) => {\n    const toSelector = selector.replace(/\\/.*To/, \"/to\");\n    return keccak256(Buffer.from(toSelector));\n};\nexport const generateGHash = (payload, to, tokenIdentifier, nonce, v2, logger = NullLogger) => {\n    // Type validation\n    assertType(\"Buffer\", { nonce });\n    assertType(\"string\", { to, token: tokenIdentifier });\n    const pHash = generatePHash(payload, logger);\n    const encoded = v2\n        ? Buffer.concat([pHash, fromHex(tokenIdentifier), fromHex(to), nonce])\n        : rawEncode([\"bytes32\", \"address\", \"address\", \"bytes32\"], [pHash, tokenIdentifier, to, nonce]);\n    const digest = keccak256(encoded);\n    logger.debug(\"gHash\", toBase64(digest), Ox(encoded));\n    return digest;\n};\nexport const generateNHash = (nonce, txid, txindex, v2, logger = NullLogger) => {\n    const encoded = v2\n        ? Buffer.concat([\n            nonce,\n            txid,\n            rawEncode([\"uint32\"], [txindex]).slice(-4),\n        ])\n        : rawEncode([\"bytes32\", \"bytes32\", \"uint32\"], [nonce, txid, txindex]);\n    const digest = keccak256(encoded);\n    logger.debug(\"nHash\", toBase64(digest), Ox(encoded));\n    return digest;\n};\nexport const generateSighash = (pHash, amount, to, tokenIdentifier, nonceHash, v2, logger = NullLogger) => {\n    // Type validation\n    assertType(\"string\", { to, tokenIdentifier });\n    assertType(\"Buffer\", { pHash, nonceHash });\n    const encoded = rawEncode([\n        \"bytes32\",\n        \"uint256\",\n        v2 ? \"bytes32\" : \"address\",\n        \"address\",\n        \"bytes32\",\n    ], [pHash, amount, Ox(tokenIdentifier), Ox(to), nonceHash]);\n    const digest = keccak256(encoded);\n    logger.debug(\"sigHash\", toBase64(digest), Ox(encoded));\n    return digest;\n};\nexport const renVMHashToBase64 = (txHash, v2) => {\n    // Type validation\n    assertType(\"string\", { txHash });\n    // Hex\n    if (/^(0x)?[0-9a-fA-Z]{64}$/.exec(txHash)) {\n        return (v2 ? toURLBase64 : toBase64)(fromHex(txHash));\n    }\n    // Already base64. For v2, ensure it's in URL-base64 format.\n    return v2 ? toURLBase64(fromBase64(txHash)) : txHash;\n};\nexport const generateBurnTxHash = (selector, encodedID, logger = NullLogger) => {\n    // Type validation\n    assertType(\"string\", { encodedID });\n    const message = `txHash_${selector}_${encodedID}`;\n    const digest = keccak256(Buffer.from(message));\n    logger.debug(\"Burn txHash\", toBase64(digest), message);\n    return digest;\n};\n//# sourceMappingURL=renVMHashes.js.map","import { getRenNetworkDetails, RenNetwork, } from \"@renproject/interfaces\";\nimport { assertType, extractError, fromHex, Ox, payloadToABI, utilsWithChainNetwork, } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nimport Web3 from \"web3\";\nimport { renDevnetVDot3, renMainnet, renMainnetVDot3, renTestnet, renTestnetVDot3, } from \"./networks\";\nimport { addressIsValid, extractBurnDetails, findBurnByNonce, findTransactionBySigHash, forwardWeb3Events, getGatewayAddress, getTokenAddress, ignorePromiEventError, manualPromiEvent, submitToEthereum, withDefaultAccount, } from \"./utils\";\nexport const EthereumConfigMap = {\n    [RenNetwork.Mainnet]: renMainnet,\n    [RenNetwork.Testnet]: renTestnet,\n    [RenNetwork.MainnetVDot3]: renMainnetVDot3,\n    [RenNetwork.TestnetVDot3]: renTestnetVDot3,\n    [RenNetwork.DevnetVDot3]: renDevnetVDot3,\n};\nconst isEthereumConfig = (renNetwork) => {\n    return !!renNetwork.addresses;\n};\nconst resolveNetwork = (renNetwork) => {\n    if (!renNetwork) {\n        return EthereumConfigMap[RenNetwork.Mainnet];\n    }\n    let networkConfig;\n    if (renNetwork && isEthereumConfig(renNetwork)) {\n        networkConfig = renNetwork;\n    }\n    else if (renNetwork) {\n        const networkDetails = getRenNetworkDetails(renNetwork);\n        if (EthereumConfigMap[networkDetails.name]) {\n            networkConfig = EthereumConfigMap[networkDetails.name];\n        }\n    }\n    if (!networkConfig) {\n        throw new Error(`Unrecognized network ${renNetwork}.`);\n    }\n    return networkConfig;\n};\nexport class EthereumBaseChain {\n    constructor(web3Provider, renNetwork) {\n        this.chain = EthereumBaseChain.chain;\n        this.name = EthereumBaseChain.chain;\n        this.legacyName = \"Eth\";\n        this.utils = utilsWithChainNetwork(EthereumBaseChain.utils, () => this.renNetworkDetails);\n        this.getTokenContractAddress = async (asset) => {\n            if (!this.web3 || !this.renNetworkDetails) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            return getTokenAddress(this.renNetworkDetails, this.web3, asset);\n        };\n        this.getGatewayContractAddress = async (token) => {\n            if (!this.web3 || !this.renNetworkDetails) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            const gatewayAddress = await getGatewayAddress(this.renNetworkDetails, this.web3, token);\n            if (gatewayAddress === \"0x0000000000000000000000000000000000000000\") {\n                throw new Error(`Asset not supported on mint-chain.`);\n            }\n            return gatewayAddress;\n        };\n        this.withProvider = (web3Provider) => {\n            this.web3 = new Web3(web3Provider);\n            return this;\n        };\n        /**\n         * See [LockChain.initialize].\n         */\n        this.initialize = (renNetwork) => {\n            this.renNetworkDetails =\n                this.renNetworkDetails ||\n                    EthereumConfigMap[getRenNetworkDetails(renNetwork).name];\n            if (!this.renNetworkDetails) {\n                throw new Error(`Unable to set ${this.name} network for RenVM network ${getRenNetworkDetails(renNetwork).name}. Please provide ${this.name} network details to ${this.name} constructor.`);\n            }\n            return this;\n        };\n        // Supported assets\n        this.assetIsNative = (asset) => {\n            return asset === \"ETH\";\n        };\n        /**\n         * `assetIsSupported` should return true if the asset is native to the\n         * MintChain.\n         *\n         * ```ts\n         * ethereum.assetIsSupported = asset => asset === \"ETH\";\n         * ```\n         */\n        this.assetIsSupported = async (asset) => {\n            if (this.assetIsNative(asset)) {\n                return true;\n            }\n            if (!this.web3 || !this.renNetworkDetails) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            // Check that there's a gateway contract for the asset.\n            try {\n                return !!(await this.getGatewayContractAddress(asset));\n            }\n            catch (error) {\n                if (/(Empty address returned)|(Asset not supported on mint-chain)/.exec(String((error || {}).message))) {\n                    // Ignore\n                }\n                else {\n                    console.warn(error);\n                }\n                return false;\n            }\n        };\n        /**\n         * `assetDecimals` should return the number of decimals of the asset.\n         *\n         * If the asset is not supported, an error should be thrown.\n         *\n         \n         */\n        this.assetDecimals = (asset) => {\n            if (asset === \"ETH\") {\n                return 18;\n            }\n            throw new Error(`Unsupported asset ${asset}.`);\n        };\n        this.transactionID = (transaction) => {\n            return transaction || \"\";\n        };\n        this.transactionFromID = (txid, _txindex) => Ox(txid);\n        this.transactionConfidence = async (transaction) => {\n            if (!this.web3 || !this.renNetworkDetails) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            if (transaction === null) {\n                throw new Error(`Unable to fetch transaction confidence, transaction hash: ${transaction}`);\n            }\n            const currentBlock = new BigNumber((await this.web3.eth.getBlockNumber()).toString());\n            const receipt = await this.web3.eth.getTransactionReceipt(transaction);\n            let current = 0;\n            if (receipt.blockNumber) {\n                const transactionBlock = new BigNumber(receipt.blockNumber.toString());\n                current = currentBlock.minus(transactionBlock).plus(1).toNumber();\n            }\n            return {\n                current,\n                target: this.renNetworkDetails.isTestnet ? 15 : 30,\n            };\n        };\n        this.submitMint = async (asset, contractCalls, mintTx, eventEmitter) => {\n            if (!mintTx.out) {\n                throw new Error(`No signature passed to mint submission.`);\n            }\n            if (mintTx.out.revert !== undefined) {\n                throw new Error(`Unable to submit reverted RenVM transaction.`);\n            }\n            if (!this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            const existingTransaction = await this.findTransaction(asset, mintTx.out.nhash, mintTx.out.sighash);\n            if (existingTransaction) {\n                await manualPromiEvent(this.web3, existingTransaction, eventEmitter);\n                return existingTransaction;\n            }\n            return await submitToEthereum(this.web3, contractCalls, mintTx, eventEmitter);\n        };\n        this.findTransaction = async (asset, nHash, sigHash) => {\n            if (!this.renNetworkDetails || !this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            return findTransactionBySigHash(this.renNetworkDetails, this.web3, asset, nHash, sigHash);\n        };\n        this.resolveTokenGatewayContract = async (asset) => {\n            if (!this.renNetworkDetails || !this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            return Ox(await getTokenAddress(this.renNetworkDetails, this.web3, asset));\n        };\n        /**\n         * Read a burn reference from an Ethereum transaction - or submit a\n         * transaction first if the transaction details have been provided.\n         */\n        this.findBurnTransaction = async (asset, \n        // Once of the following should not be undefined.\n        burn, eventEmitter, logger, timeout) => {\n            if (!this.renNetworkDetails || !this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            const { burnNonce, contractCalls } = burn;\n            let { transaction } = burn;\n            if (!transaction && burnNonce) {\n                return findBurnByNonce(this.renNetworkDetails, this.web3, asset, burnNonce.toString());\n            }\n            // There are three parameter configs:\n            // Situation (1): A `burnNonce` is provided\n            // Situation (2): Contract call details are provided\n            // Situation (3): A transaction is provided\n            // Handle situation (2)\n            // Make a call to the provided contract and Pass on the\n            // transaction hash.\n            if (!transaction && contractCalls) {\n                for (let i = 0; i < contractCalls.length; i++) {\n                    const contractCall = contractCalls[i];\n                    const last = i === contractCalls.length - 1;\n                    const { contractParams, contractFn, sendTo } = contractCall;\n                    const callParams = [\n                        ...(contractParams || []).map((value) => value.value),\n                    ];\n                    const ABI = payloadToABI(contractFn, contractParams);\n                    const contract = new this.web3.eth.Contract(ABI, sendTo);\n                    const txConfig = typeof contractCall === \"object\"\n                        ? contractCall.txConfig\n                        : {};\n                    const config = await withDefaultAccount(this.web3, {\n                        ...txConfig,\n                        ...{\n                            value: txConfig && txConfig.value\n                                ? txConfig.value.toString()\n                                : undefined,\n                            gasPrice: txConfig && txConfig.gasPrice\n                                ? txConfig.gasPrice.toString()\n                                : undefined,\n                        },\n                    });\n                    logger.debug(\"Calling Ethereum contract\", contractFn, sendTo, ...callParams, config);\n                    const tx = contract.methods[contractFn](...callParams).send(config);\n                    if (last) {\n                        forwardWeb3Events(tx, eventEmitter);\n                    }\n                    transaction = await new Promise((resolve, reject) => tx.on(\"transactionHash\", resolve).catch((error) => {\n                        try {\n                            if (ignorePromiEventError(error)) {\n                                logger.error(extractError(error));\n                                return;\n                            }\n                        }\n                        catch (_error) {\n                            /* Ignore _error */\n                        }\n                        reject(error);\n                    }));\n                    logger.debug(\"Transaction hash\", transaction);\n                }\n            }\n            if (!transaction) {\n                throw new Error(`Unable to find burn from provided parameters.`);\n            }\n            return extractBurnDetails(this.web3, transaction, logger, timeout);\n        };\n        this.getFees = async (asset) => {\n            if (!this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            const gatewayAddress = await this.getGatewayContractAddress(asset);\n            const mintFeeABI = {\n                constant: true,\n                inputs: [],\n                name: \"mintFee\",\n                outputs: [\n                    {\n                        internalType: \"uint16\",\n                        name: \"\",\n                        type: \"uint16\",\n                    },\n                ],\n                payable: false,\n                stateMutability: \"view\",\n                type: \"function\",\n            };\n            const burnFeeABI = {\n                constant: true,\n                inputs: [],\n                name: \"burnFee\",\n                outputs: [\n                    {\n                        internalType: \"uint16\",\n                        name: \"\",\n                        type: \"uint16\",\n                    },\n                ],\n                payable: false,\n                stateMutability: \"view\",\n                type: \"function\",\n            };\n            const gatewayContract = new this.web3.eth.Contract([mintFeeABI, burnFeeABI], gatewayAddress);\n            const mintFee = await gatewayContract.methods.mintFee().call();\n            const burnFee = await gatewayContract.methods.burnFee().call();\n            return {\n                mint: new BigNumber(mintFee.toString()).toNumber(),\n                burn: new BigNumber(burnFee.toString()).toNumber(),\n            };\n        };\n        this.getBalance = async (asset, address) => {\n            const balanceOfABI = {\n                constant: true,\n                inputs: [\n                    {\n                        internalType: \"address\",\n                        name: \"account\",\n                        type: \"address\",\n                    },\n                ],\n                name: \"balanceOf\",\n                outputs: [\n                    {\n                        internalType: \"uint256\",\n                        name: \"\",\n                        type: \"uint256\",\n                    },\n                ],\n                payable: false,\n                stateMutability: \"view\",\n                type: \"function\",\n            };\n            if (!this.web3) {\n                throw new Error(`${this.name} object not initialized - must provide network to constructor.`);\n            }\n            const tokenAddress = await this.getTokenContractAddress(asset);\n            const tokenContract = new this.web3.eth.Contract([balanceOfABI], tokenAddress);\n            const balanceRaw = await await tokenContract.methods\n                .balanceOf(address)\n                .call();\n            return new BigNumber(balanceRaw.toString());\n        };\n        this.transactionRPCFormat = (transaction, _v2) => {\n            assertType(\"string | null\", { transaction });\n            if (transaction === null) {\n                throw new Error(`Unable to encode transaction, transaction hash: ${transaction}`);\n            }\n            return {\n                txid: fromHex(transaction),\n                txindex: \"0\",\n            };\n        };\n        this.web3 = new Web3(web3Provider);\n        if (renNetwork) {\n            this.renNetworkDetails = resolveNetwork(renNetwork);\n        }\n    }\n}\nEthereumBaseChain.chain = \"Ethereum\";\nEthereumBaseChain.utils = {\n    resolveChainNetwork: resolveNetwork,\n    addressIsValid,\n    addressExplorerLink: (address, network) => `${(EthereumBaseChain.utils.resolveChainNetwork(network) ||\n        renMainnet).etherscan}/address/${address}`,\n    transactionExplorerLink: (transaction, network) => `${(EthereumBaseChain.utils.resolveChainNetwork(network) ||\n        renMainnet).etherscan}/tx/${transaction}`,\n};\nconst _ = EthereumBaseChain;\n//# sourceMappingURL=base.js.map","import { LogLevel, NullLogger } from \"@renproject/interfaces\";\nimport { extractError, retryNTimes, SECONDS } from \"@renproject/utils\";\nimport axios from \"axios\";\nconst generatePayload = (method, params) => ({\n    id: 1,\n    jsonrpc: \"2.0\",\n    method,\n    params,\n});\nexport class HttpProvider {\n    constructor(ipOrMultiaddress, logger = NullLogger) {\n        this.sendMessage = async (method, request, retry = 2, timeout = 120 * SECONDS) => {\n            const payload = generatePayload(method, request);\n            if (\n            // Check level before doing expensive JSON call.\n            typeof this.logger.level !== \"number\" ||\n                this.logger.level >= LogLevel.Debug) {\n                this.logger.debug(\"[request]\", JSON.stringify(payload, null, \"    \"));\n            }\n            try {\n                const response = await retryNTimes(async () => axios.post(this.nodeURL, payload, \n                // Use a 120 second timeout. This could be reduced, but\n                // should be done based on the method, since some requests\n                // may take a long time, especially on a slow connection.\n                { timeout }), retry, 1 * SECONDS);\n                if (response.status !== 200) {\n                    throw this.responseError(`Unexpected status code ${String(response.status)} returned from node.`, response);\n                }\n                if (response.data.error) {\n                    throw new Error(response.data.error);\n                }\n                if (response.data.result === undefined) {\n                    throw new Error(`Empty result returned from node.`);\n                }\n                if (typeof this.logger.level !== \"number\" ||\n                    this.logger.level >= LogLevel.Debug) {\n                    this.logger.debug(\"[response]\", JSON.stringify(response.data.result, null, \"    \"));\n                }\n                return response.data.result;\n            }\n            catch (error) {\n                if (error.response) {\n                    error.message = `Node returned status ${String(error.response.status)} with reason: ${extractError(error)}`;\n                }\n                throw error;\n            }\n        };\n        this.responseError = (msg, response) => {\n            const error = new Error(msg);\n            error.response = response;\n            return error;\n        };\n        this.logger = logger;\n        if (typeof ipOrMultiaddress !== \"string\") {\n            throw new Error(`Invalid node URL ${String(ipOrMultiaddress)}`);\n        }\n        if (ipOrMultiaddress.indexOf(\"://\") === -1) {\n            throw new Error(`Invalid node URL without protocol: ${ipOrMultiaddress}.`);\n        }\n        this.nodeURL = ipOrMultiaddress;\n    }\n}\n//# sourceMappingURL=httpProvider.js.map","import { assertType } from \"./assert\";\nconst mintABITemplate = {\n    constant: false,\n    inputs: [\n        {\n            name: \"_amount\",\n            type: \"uint256\",\n        },\n        {\n            name: \"_nHash\",\n            type: \"bytes32\",\n        },\n        {\n            name: \"_sig\",\n            type: \"bytes\",\n        },\n    ],\n    outputs: [],\n    payable: true,\n    stateMutability: \"payable\",\n    type: \"function\",\n};\nexport const payloadToABI = (methodName, payload) => {\n    // Type validation\n    assertType(\"string\", { methodName });\n    (payload || []).map(({ type, name }) => assertType(\"string\", { type, name }));\n    return [\n        {\n            name: methodName,\n            type: \"function\",\n            inputs: [\n                ...(payload || []).map((value) => ({\n                    type: value.type,\n                    name: value.name,\n                })),\n            ],\n            outputs: [],\n        },\n    ];\n};\nexport const payloadToMintABI = (methodName, payload) => {\n    // Type validation\n    assertType(\"string\", { methodName });\n    (payload || []).map(({ type, name }) => assertType(\"string\", { type, name }));\n    return [\n        {\n            ...mintABITemplate,\n            name: methodName,\n            inputs: [\n                ...(payload || []).map((value) => ({\n                    type: value.type,\n                    name: value.name,\n                })),\n                ...(mintABITemplate.inputs ? mintABITemplate.inputs : []),\n            ],\n        },\n    ];\n};\n//# sourceMappingURL=abi.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\n// export const Callable = <TConstructor extends Constructor>(t: TConstructor) =>\n//     t as CallableConstructor<TConstructor>;\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nexport function Callable(type) {\n    // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\n    function constructor(...args) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return new type(...args);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    constructor.prototype = type.prototype;\n    // TODO: Overwrite static values dynamically.\n    constructor.utils = type.utils;\n    constructor.asset = type.asset;\n    constructor.chain = type.chain;\n    return constructor;\n}\n//# sourceMappingURL=callableClass.js.map","export const utilsWithChainNetwork = (utils, getClassNetwork) => ({\n    ...utils,\n    addressIsValid: (address, network) => utils.addressIsValid(address, network || getClassNetwork() || \"mainnet\"),\n    addressExplorerLink: utils.addressExplorerLink\n        ? (address, network) => \n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-unnecessary-type-assertion\n        utils.addressExplorerLink(address, network || getClassNetwork() || \"mainnet\")\n        : undefined,\n    transactionExplorerLink: utils.transactionExplorerLink\n        ? (tx, network) => \n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion,@typescript-eslint/no-unnecessary-type-assertion\n        utils.transactionExplorerLink(tx, network || getClassNetwork() || \"mainnet\")\n        : undefined,\n});\n//# sourceMappingURL=chainUtils.js.map","const overrideContractCall = (contractCall, override) => {\n    const overrideParams = (override.contractParams || []).reduce((acc, param) => {\n        if (param.name) {\n            acc[param.name] = param;\n        }\n        return acc;\n    }, {});\n    let txConfig;\n    if (typeof contractCall.txConfig === \"object\" &&\n        typeof override.txConfig === \"object\") {\n        txConfig = {\n            ...contractCall.txConfig,\n            ...override.txConfig,\n        };\n    }\n    else {\n        txConfig = override.txConfig || contractCall.txConfig;\n    }\n    return {\n        ...contractCall,\n        ...override,\n        // Clone txConfig\n        txConfig,\n        // Clone contractParams\n        contractParams: (contractCall.contractParams || []).map((contractParam) => ({\n            ...contractParam,\n            ...overrideParams[contractParam.name],\n        })),\n    };\n};\nexport const overrideContractCalls = (contractCalls, override) => {\n    if (Array.isArray(override) && override.length !== contractCalls.length) {\n        throw new Error(`Contract call override must be same length as contract calls array.`);\n    }\n    return contractCalls.map((contractCall, i) => {\n        const contractCallOverride = Array.isArray(override)\n            ? // If override is an array, there should be an array for each call.\n                override[i]\n            : // If there's only one override, apply it to the last contract call.\n                i === contractCalls.length - 1\n                    ? override\n                    : // Default to empty object.\n                        {};\n        return overrideContractCall(contractCall, contractCallOverride);\n    });\n};\n//# sourceMappingURL=contractCalls.js.map","const v1SelectorRegex = /^(.*)0(.*)2(.*)$/;\nconst defaultMatch = [undefined, undefined, undefined, undefined];\n/**\n * parseV1Selector splits a RenVM contract (e.g. `BTC0Eth2Btc`) into the asset\n * (`BTC`), the origin chain (`Eth`) and the target chain (`Btc`).\n */\nexport const parseV1Selector = (selector) => {\n    // re.exec(\"BTC0Eth2Btc\") => ['BTC0Eth2Btc', 'BTC', 'Eth', 'Btc']\n    const [, asset, from, to] = v1SelectorRegex.exec(selector) || defaultMatch;\n    if (!asset || !from || !to) {\n        throw new Error(`Invalid Ren Contract \"${selector}\"`);\n    }\n    return {\n        asset: asset,\n        from: from,\n        to: to,\n    };\n};\n//# sourceMappingURL=renVMUtils.js.map","/**\n * The `value` function converts between different cryptocurrency units.\n * See `value.spec.ts` for example usage.\n */\nimport BigNumber from \"bignumber.js\";\nconst toBigNumber = (valueIn) => BigNumber.isBigNumber(valueIn)\n    ? new BigNumber(valueIn)\n    : new BigNumber(valueIn.toString());\nexport const toSmallestUnit = (value, decimals) => toBigNumber(value)\n    .times(new BigNumber(10).exponentiatedBy(decimals))\n    .decimalPlaces(0)\n    .toFixed();\nexport const fromSmallestUnit = (value, decimals) => toBigNumber(value)\n    .dividedBy(new BigNumber(10).exponentiatedBy(decimals))\n    .toFixed();\n//# sourceMappingURL=value.js.map","/* eslint-disable security/detect-object-injection */\nimport BigNumber from \"bignumber.js\";\nexport const assert = (assertion, sentence) => {\n    if (!assertion) {\n        throw new Error(`Failed assertion${sentence ? `: ${sentence}` : \"\"}`);\n    }\n    return true;\n};\n/**\n * The following is a set of rudimentary type validation functions.\n *\n * The main function is `assertType`, which accepts a type and a dictionary of\n * values.\n *\n * The type must be a string that matches the following pattern:\n *\n * ```\n * TYPE:\n *   | TYPE '|' TYPE\n *   | Array<TYPE>\n *   | TYPE[]\n *   | PRIMITIVE_TYPE\n *\n * PRIMITIVE_TYPE:\n *   | \"string\"\n *   | \"number\"\n *   | \"bigint\"\n *   | \"boolean\"\n *   | \"symbol\"\n *   | \"undefined\"\n *   | \"object\"\n *   | \"function\"\n *   | \"null\"\n *   | \"any\"\n *   | \"Buffer\"\n *   | \"BigNumber\"\n * ```\n *\n * Types are matched by a regex so '|' can't be used at multiple levels, e.g.\n * `string | Array<string | number>`.\n */\nexport const assertType = (type, objects) => {\n    if (isArrayType(type)) {\n        return assertArray(type, objects);\n    }\n    if (isUnionType(type)) {\n        return assertTypeUnion(type, objects);\n    }\n    return assertTypeCheck(is(type), objects, type);\n};\nconst typeOf = (v) => v === null\n    ? \"null\"\n    : BigNumber.isBigNumber(v)\n        ? \"BigNumber\"\n        : Buffer.isBuffer(v)\n            ? \"Buffer\"\n            : typeof v;\nconst assertTypeCheck = (type, objects, typeDescription) => {\n    for (const key of Object.keys(objects)) {\n        // eslint-disable-next-line security/detect-object-injection\n        const value = objects[key];\n        if (!type(value, key)) {\n            const readableType = Array.isArray(value) ? \"any[]\" : typeOf(value);\n            throw new Error(`Expected ${key} to be of type '${typeDescription}', instead got '${readableType}'.`);\n        }\n    }\n    return true;\n};\nconst is = (type) => (v) => type === \"any\" ? true : typeOf(v) === type;\nconst isUnionType = (unionType) => {\n    const types = unionType.split(\" | \");\n    return types.length > 1 ? types : false;\n};\nconst isArrayType = (arrayType) => {\n    // Check with simple string operations to avoid running slow RegExs if there\n    // isn't a match.\n    const isArray = arrayType.slice(0, 6) === \"Array<\" && arrayType.slice(-1) === \">\";\n    if (isArray) {\n        const arrayMatch = /^Array<(.*)>$/.exec(arrayType);\n        if (arrayMatch) {\n            const [, type] = arrayMatch;\n            return type;\n        }\n    }\n    const isBracketArray = arrayType.indexOf(\" \") === -1 && arrayType.slice(-2) === \"[]\";\n    if (isBracketArray) {\n        const bracketMatch = /^([^ ]*)\\[\\]$/.exec(arrayType);\n        if (bracketMatch) {\n            const [, type] = bracketMatch;\n            return type;\n        }\n    }\n    return false;\n};\nconst assertTypeUnion = (unionType, objects) => {\n    const types = unionType.split(\" | \");\n    return assertTypeCheck((v, key) => types.reduce((acc, type) => {\n        if (acc) {\n            return acc;\n        }\n        if (isArrayType(type)) {\n            try {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                assertArray(type, { [key]: v });\n                return true;\n            }\n            catch (error) {\n                return false;\n            }\n        }\n        return is(type)(v);\n    }, false), objects, unionType);\n};\nconst assertArray = (arrayType, objects) => {\n    const type = isArrayType(arrayType);\n    if (!type) {\n        throw new Error(`Invalid array type ${arrayType}`);\n    }\n    for (const key of Object.keys(objects)) {\n        const value = objects[key];\n        assertTypeCheck((v) => Array.isArray(v), { value }, \"any[]\");\n        for (let i = 0; i < value.length; i++) {\n            assertType(type, { [`${key}[${i}]`]: value[i] });\n        }\n    }\n    return true;\n};\nexport const assertObject = (fieldTypes, objects) => {\n    for (const key of Object.keys(objects)) {\n        const value = objects[key];\n        for (const field of Object.keys(fieldTypes)) {\n            if (typeof fieldTypes[field] === \"object\") {\n                assertObject(fieldTypes[field], {\n                    [`${key}[\"${field}\"]`]: value[field],\n                });\n            }\n            else if (typeof fieldTypes[field] === \"string\") {\n                assertType(fieldTypes[field], {\n                    [`${key}[\"${field}\"]`]: value[field],\n                });\n            }\n            else {\n                throw new Error(`Invalid object type definition ${typeof fieldTypes[field]}`);\n            }\n        }\n    }\n    return true;\n};\n//# sourceMappingURL=assert.js.map","import { getRenNetworkDetails, NullLogger, RenJSErrors, TxStatus, } from \"@renproject/interfaces\";\nimport { HttpProvider } from \"@renproject/provider\";\nimport { assertType, extractError, fromBase64, isDefined, keccak256, parseV1Selector, SECONDS, sleep, strip0x, toBase64, } from \"@renproject/utils\";\nimport { List } from \"immutable\";\nimport { RPCMethod, } from \"./methods\";\nimport { unmarshalBurnTx, unmarshalFees, unmarshalMintTx } from \"./unmarshal\";\nimport { RenVMType } from \"./value\";\nexport const generateMintTxHash = (selector, encodedID, deposit, logger = NullLogger) => {\n    // Type validation\n    assertType(\"string\", { encodedID, deposit });\n    const message = `txHash_${selector}_${encodedID}_${deposit}`;\n    const digest = keccak256(Buffer.from(message));\n    logger.debug(\"Mint txHash\", toBase64(digest), message);\n    return digest;\n};\nexport class RenVMProvider {\n    constructor(network, provider, logger = NullLogger) {\n        this.version = () => 1;\n        this.selector = ({ asset, from, to, }) => {\n            return `${asset}0${from.legacyName || from.name}2${to.legacyName || from.name}`;\n        };\n        this.queryBlock = async (blockHeight, retry) => this.sendMessage(RPCMethod.MethodQueryBlock, { blockHeight }, retry);\n        this.queryBlocks = async (blockHeight, n, retry) => this.sendMessage(RPCMethod.MethodQueryBlocks, { blockHeight, n }, retry);\n        this.submitTx = async (tx, retry) => this.sendMessage(RPCMethod.MethodSubmitTx, { tx }, retry);\n        this.queryTx = async (txHash, retry) => this.sendMessage(RPCMethod.MethodQueryTx, { txHash }, retry);\n        this.queryTxs = async (tags, page, pageSize, txStatus, retry) => this.sendMessage(RPCMethod.MethodQueryTxs, {\n            tags,\n            page: (page || 0).toString(),\n            pageSize: (pageSize || 0).toString(),\n            txStatus,\n        }, retry);\n        this.queryNumPeers = async (retry) => this.sendMessage(RPCMethod.MethodQueryNumPeers, {}, retry);\n        this.queryPeers = async (retry) => this.sendMessage(RPCMethod.MethodQueryPeers, {}, retry);\n        this.queryShards = async (retry) => this.sendMessage(RPCMethod.MethodQueryShards, {}, retry);\n        this.queryStat = async (retry) => this.sendMessage(RPCMethod.MethodQueryStat, {}, retry);\n        this.queryFees = async (retry) => this.sendMessage(RPCMethod.MethodQueryFees, {}, retry);\n        this.getFees = async () => unmarshalFees(await this.queryFees());\n        this.mintTxHash = ({ selector, gHash, outputHashFormat, }) => {\n            assertType(\"Buffer\", { gHash });\n            assertType(\"string\", { outputHashFormat });\n            return generateMintTxHash(selector, toBase64(gHash), outputHashFormat, this.logger);\n        };\n        this.submitMint = async ({ selector, nonce, output, payload, to, token, fn, fnABI, tags, }) => {\n            const { txindex, txid } = output;\n            assertType(\"Buffer\", { nonce, payload, txid });\n            assertType(\"string\", { to, token, fn, txindex });\n            const response = await this.sendMessage(RPCMethod.MethodSubmitTx, {\n                tx: {\n                    to: selector,\n                    in: [\n                        //\n                        {\n                            name: \"p\",\n                            type: RenVMType.ExtEthCompatPayload,\n                            value: {\n                                abi: toBase64(Buffer.from(JSON.stringify(fnABI))),\n                                value: toBase64(payload),\n                                fn: toBase64(Buffer.from(fn)),\n                            },\n                        },\n                        // The hash of the payload data\n                        // { name: \"phash\" as const, type: RenVMType.B32 as const, value: toBase64(pHash) },\n                        // The amount of BTC (in SATs) that has be transferred to the gateway\n                        // { name: \"amount\" as const, type: \"u64\", as const value: amount },\n                        // The ERC20 contract address on Ethereum for BTC\n                        {\n                            name: \"token\",\n                            type: RenVMType.ExtTypeEthCompatAddress,\n                            value: strip0x(token),\n                        },\n                        // The address on the Ethereum blockchain to which BTC will be transferred\n                        {\n                            name: \"to\",\n                            type: RenVMType.ExtTypeEthCompatAddress,\n                            value: strip0x(to),\n                        },\n                        // The nonce is used to randomize the gateway\n                        {\n                            name: \"n\",\n                            type: RenVMType.B32,\n                            value: toBase64(nonce),\n                        },\n                        // UTXO\n                        {\n                            name: \"utxo\",\n                            type: RenVMType.ExtTypeBtcCompatUTXO,\n                            value: {\n                                txHash: toBase64(txid),\n                                vOut: txindex,\n                            },\n                        },\n                    ],\n                },\n                tags,\n            });\n            return fromBase64(response.tx.hash);\n        };\n        this.submitBurn = async (params) => {\n            const { selector, burnNonce, tags } = params;\n            const response = await this.sendMessage(RPCMethod.MethodSubmitTx, {\n                tx: {\n                    to: selector,\n                    in: [\n                        {\n                            name: \"ref\",\n                            type: RenVMType.U64,\n                            value: burnNonce.decimalPlaces(0).toFixed(),\n                        },\n                    ],\n                },\n                tags,\n            });\n            return fromBase64(response.tx.hash);\n        };\n        this.queryMintOrBurn = async (_selector, utxoTxHash) => {\n            const response = await this.queryTx(toBase64(utxoTxHash));\n            // Unmarshal transaction.\n            const { asset, from } = parseV1Selector(response.tx.to);\n            if (asset.toUpperCase() === from.toUpperCase()) {\n                return unmarshalMintTx(response);\n            }\n            else {\n                return unmarshalBurnTx(response);\n            }\n        };\n        this.waitForTX = async (selector, utxoTxHash, onStatus, _cancelRequested, timeout) => {\n            assertType(\"Buffer\", { utxoTxHash });\n            let rawResponse;\n            while (true) {\n                if (_cancelRequested && _cancelRequested()) {\n                    throw new Error(`waitForTX cancelled`);\n                }\n                try {\n                    const result = await this.queryMintOrBurn(selector, utxoTxHash);\n                    if (result && result.txStatus === TxStatus.TxStatusDone) {\n                        rawResponse = result;\n                        break;\n                    }\n                    else if (onStatus && result && result.txStatus) {\n                        onStatus(result.txStatus);\n                    }\n                }\n                catch (error) {\n                    if (/(not found)|(not available)/.exec(String((error || {}).message))) {\n                        // ignore\n                    }\n                    else {\n                        this.logger.error(String(error));\n                        // TODO: throw unexpected errors\n                    }\n                }\n                await sleep(isDefined(timeout) ? timeout : 15 * SECONDS);\n            }\n            return rawResponse;\n        };\n        /**\n         * selectPublicKey fetches the public key for the RenVM shard handling\n         * the provided contract.\n         *\n         * @param asset The asset for which the public key should be fetched.\n         * @returns The public key hash (20 bytes) as a string.\n         */\n        this.selectPublicKey = async (_selector, asset) => {\n            // Call the ren_queryShards RPC.\n            const response = await this.queryShards(5);\n            // Prioritize primary shards.\n            const chosenShard = response.shards.sort((a, b) => a.primary && b.primary ? -1 : a.primary ? -1 : b.primary ? 1 : 0)[0];\n            if (!chosenShard) {\n                throw new Error(\"Unable to load public key from RenVM: no shards found\");\n            }\n            // Get the gateway pubKey from the gateway with the right asset within\n            // the shard with the lowest total value locked.\n            const tokenGateway = List(chosenShard.gateways)\n                .filter((gateway) => gateway.asset === asset)\n                .first(undefined);\n            if (!tokenGateway) {\n                throw new Error(`Unable to load public key from RenVM: no gateway for the asset ${asset}`);\n            }\n            // Use this gateway pubKey to build the gateway address.\n            // return hash160(\n            return fromBase64(tokenGateway.pubKey);\n        };\n        // In the future, this will be asynchronous. It returns a promise for\n        // compatibility.\n        // eslint-disable-next-line @typescript-eslint/require-await\n        this.getNetwork = async (_selector) => {\n            return this.network;\n        };\n        this.getConfirmationTarget = async (selector, _chain) => {\n            const { asset } = parseV1Selector(selector);\n            switch (this.network) {\n                case \"mainnet\":\n                    switch (asset) {\n                        case \"BTC\":\n                            return 6;\n                        case \"ZEC\":\n                            return 24;\n                        case \"BCH\":\n                            return 15;\n                        case \"ETH\":\n                            return 30;\n                    }\n                    break;\n                case \"testnet\":\n                    switch (asset) {\n                        case \"BTC\":\n                            return 2;\n                        case \"ZEC\":\n                            return 6;\n                        case \"BCH\":\n                            return 2;\n                        case \"ETH\":\n                            return 12;\n                    }\n                    break;\n            }\n            return undefined;\n        };\n        this.estimateTransactionFee = async (_selector, chain) => {\n            const fees = await this.getFees();\n            return fees[chain.legacyName\n                ? chain.legacyName.toLowerCase()\n                : chain.name.toLowerCase()];\n        };\n        if (!provider) {\n            const rpcUrl = (getRenNetworkDetails(network) || {}).lightnode;\n            try {\n                provider = new HttpProvider(rpcUrl, logger);\n            }\n            catch (error) {\n                if (/Invalid node URL/.exec(String(error && error.message))) {\n                    throw new Error(`Invalid network or provider URL: \"${(getRenNetworkDetails(network) || {}).name ||\n                        String(network)}\"`);\n                }\n                throw error;\n            }\n        }\n        this.network = network;\n        this.logger = logger;\n        this.provider = provider;\n        this.sendMessage = async (method, request, retry = 2, timeout = 120 * SECONDS) => {\n            try {\n                return await this.provider.sendMessage(method, request, retry, timeout);\n            }\n            catch (error) {\n                const errorString = extractError(error);\n                if (/(tx hash=[a-zA-Z0-9+\\/=]+ not found)/.exec(errorString)) {\n                    error.code = RenJSErrors.RenVMTransactionNotFound;\n                }\n                if (/(insufficient funds)/.exec(errorString)) {\n                    error.code = RenJSErrors.AmountTooSmall;\n                }\n                if (/(utxo spent or invalid index)/.exec(errorString)) {\n                    error.code = RenJSErrors.DepositSpentOrNotFound;\n                }\n                throw error;\n            }\n        };\n    }\n}\n//# sourceMappingURL=renVMProvider.js.map","// tslint:disable: no-console\n\n// The following are also available from a combined \"@renproject/chains\" package.\nimport { Filecoin } from \"@renproject/chains-filecoin\";\nimport { Terra } from \"@renproject/chains-terra\";\nimport {\n    BinanceSmartChain,\n    Ethereum,\n    Fantom,\n    Polygon,\n} from \"@renproject/chains-ethereum\";\nimport {\n    Bitcoin,\n    BitcoinCash,\n    DigiByte,\n    Dogecoin,\n    Zcash,\n} from \"@renproject/chains-bitcoin\";\nimport {\n    getRenNetworkDetails,\n    LockChain,\n    LogLevel,\n    MintChain,\n    SimpleLogger,\n    TxStatus,\n} from \"@renproject/interfaces\";\nimport RenJS from \"@renproject/ren\";\nimport { LockAndMintDeposit } from \"@renproject/ren/build/main/lockAndMint\";\nimport { sleep } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\n\nimport { NETWORK } from \"../network\";\nimport { Asset, Chain } from \"./chains\";\n\nexport const logLevel = LogLevel.Trace;\n\n/*******************************************************************************\n * MINTING\n ******************************************************************************/\n\n// Map a mint chain name and mint parameters to a MintChain object.\nexport const getMintChainObject = (\n    mintChain: Chain,\n    mintChainProvider: any,\n    asset: string,\n    recipientAddress?: string,\n    amount?: string\n): MintChain => {\n    // const b = Buffer.from([]);\n\n    switch (mintChain) {\n        case Chain.Ethereum:\n            let network = NETWORK;\n            if (asset && [\"BTC\", \"ZEC\", \"BCH\"].indexOf(asset) >= 0) {\n                if (network.name === \"mainnet-v0.3\") {\n                    network = getRenNetworkDetails(\"mainnet\");\n                } else if (network.name === \"testnet-v0.3\") {\n                    network = getRenNetworkDetails(\"testnet\");\n                }\n            }\n            let eth = Ethereum(mintChainProvider, network);\n            eth = recipientAddress\n                ? eth.Account({\n                      address: recipientAddress,\n                      value: amount,\n                  })\n                : eth;\n            return eth;\n        case Chain.BSC:\n            let bsc = BinanceSmartChain(\n                mintChainProvider,\n                NETWORK.isTestnet ? \"testnet\" : \"mainnet\"\n            );\n            bsc = recipientAddress\n                ? bsc.Account({\n                      address: recipientAddress,\n                      value: amount,\n                  })\n                : bsc;\n            return bsc;\n        case Chain.Fantom:\n            let fantom = Fantom(\n                mintChainProvider,\n                NETWORK.isTestnet ? \"testnet\" : \"mainnet\"\n            );\n            fantom = recipientAddress\n                ? fantom.Account({\n                      address: recipientAddress,\n                      value: amount,\n                  })\n                : fantom;\n            return fantom;\n        case Chain.Polygon:\n            let polygon = Polygon(\n                mintChainProvider,\n                NETWORK.isTestnet ? \"testnet\" : \"mainnet\"\n            );\n            polygon = recipientAddress\n                ? polygon.Account({\n                      address: recipientAddress,\n                      value: amount,\n                  })\n                : polygon;\n            return polygon;\n        default:\n            throw new Error(`Unsupported chain ${mintChain}.`);\n    }\n};\n\nexport const startMint = async (\n    renJS: RenJS,\n    mintChain: Chain,\n    mintChainProvider: any,\n    asset: Asset,\n    recipientAddress: string,\n    showAddress: (\n        address: string | { address: string; params?: string }\n    ) => void,\n    setMinimumAmount: (amount: string) => void,\n    onDeposit: (txHash: string, deposit: LockAndMintDeposit) => void\n) => {\n    let from: LockChain;\n    switch (asset) {\n        case Asset.BTC:\n            from = Bitcoin();\n            break;\n        case Asset.ZEC:\n            from = Zcash();\n            break;\n        case Asset.BCH:\n            from = BitcoinCash();\n            break;\n        case Asset.FIL:\n            from = Filecoin();\n            break;\n        case Asset.LUNA:\n            from = Terra();\n            break;\n        case Asset.DGB:\n            from = DigiByte();\n            break;\n        case Asset.DOGE:\n            from = Dogecoin();\n            break;\n        default:\n            throw new Error(`Unsupported asset ${asset}.`);\n    }\n    const to: MintChain = getMintChainObject(\n        mintChain,\n        mintChainProvider,\n        asset,\n        recipientAddress\n    );\n\n    const decimals = await from.assetDecimals(asset);\n    const fees = await renJS.getFees({\n        asset,\n        from: from,\n        to: to,\n    });\n    console.log(\"fees\", fees);\n\n    if (fees.lock) {\n        const minimumAmount = new BigNumber(fees.lock).dividedBy(\n            new BigNumber(10).exponentiatedBy(decimals)\n        );\n        setMinimumAmount(minimumAmount.toFixed());\n    }\n\n    const lockAndMint = await renJS.lockAndMint({\n        asset,\n        from: from,\n        to: to,\n    });\n\n    if (lockAndMint.gatewayAddress) {\n        showAddress(lockAndMint.gatewayAddress);\n    }\n\n    lockAndMint.on(\"deposit\", async (deposit) => {\n        const txHash = await deposit.txHash();\n        onDeposit(txHash, deposit);\n    });\n};\n\nexport enum DepositStatus {\n    DETECTED = \"Detected\",\n    CONFIRMED = \"Confirmed\",\n    SIGNED = \"Signed\",\n    DONE = \"Done\",\n    ERROR = \"Error\",\n}\n\nexport const handleDeposit = async (\n    deposit: LockAndMintDeposit,\n    onStatus: (status: DepositStatus) => void,\n    onTarget: (target: number) => void,\n    onConfirmation: (confs: number, target: number) => void,\n    onRenVMStatus: (status: TxStatus) => void,\n    onTransactionHash: (txHash: string) => void\n) => {\n    console.log(\"Step: deposit.txHash()\");\n    const hash = await deposit.txHash();\n\n    console.log(\"Step: deposit.params.to.findTransaction()\");\n    const findTransaction = await deposit.params.to.findTransaction(\n        deposit.params.asset,\n        deposit._state.nHash!,\n        Buffer.from(\"00\".repeat(32), \"hex\")\n    );\n    console.log(\"findTransaction\", findTransaction);\n    if (findTransaction) {\n        console.log(\"Step: returning\");\n        onStatus(DepositStatus.DONE);\n        return;\n    }\n\n    deposit._state.logger = new SimpleLogger(\n        logLevel,\n        `[${hash.slice(0, 6)}] `\n    );\n\n    console.log(\"calling deposit.confirmed()\");\n\n    await deposit\n        .confirmed()\n        .on(\"target\", onTarget)\n        .on(\"confirmation\", onConfirmation);\n\n    onStatus(DepositStatus.CONFIRMED);\n\n    let retries = 1;\n    let lastError;\n    while (retries) {\n        try {\n            await deposit.signed().on(\"status\", onRenVMStatus);\n            break;\n        } catch (error) {\n            console.error(error);\n            lastError = error;\n        }\n        retries--;\n        if (retries) {\n            await sleep(10);\n        }\n    }\n    if (retries === 0) {\n        throw new Error(lastError);\n    }\n\n    const mintTransaction = await deposit.findTransaction();\n    if (mintTransaction) {\n        onTransactionHash(mintTransaction as string);\n        onStatus(DepositStatus.DONE);\n        return;\n    }\n\n    onStatus(DepositStatus.SIGNED);\n};\n\nexport const submitDeposit = async (\n    deposit: LockAndMintDeposit,\n    onStatus: (status: DepositStatus) => void,\n    onTransactionHash: (txHash: string) => void\n) => {\n    await deposit.mint().on(\"transactionHash\", onTransactionHash);\n\n    onStatus(DepositStatus.DONE);\n};\n","import { NullLogger, } from \"@renproject/interfaces\";\nimport { assert, assertType, extractError, fromHex, isDefined, Ox, payloadToABI, payloadToMintABI, SECONDS, sleep, } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nimport BN from \"bn.js\";\nimport BlocknativeSdk from \"bnc-sdk\";\nimport { isValidAddress, isValidChecksumAddress } from \"ethereumjs-util\";\nimport { keccak256 as web3Keccak256 } from \"web3-utils\";\nexport const ignorePromiEventError = (error) => {\n    try {\n        return !!(error &&\n            error.message &&\n            (/Invalid block number/.exec(error.message) ||\n                /Timeout exceeded during the transaction confirmation process./.exec(error.message)));\n    }\n    catch (innerError) {\n        return false;\n    }\n};\n/**\n * Forward the events emitted by a Web3 PromiEvent to another PromiEvent.\n */\nexport const forwardWeb3Events = (src, dest) => {\n    // eslint-disable-next-line no-void\n    void src.on(\"transactionHash\", (eventReceipt) => {\n        dest.emit(\"transactionHash\", eventReceipt);\n        dest.emit(\"eth_transactionHash\", eventReceipt);\n    });\n    // eslint-disable-next-line no-void\n    void src.on(\"receipt\", (eventReceipt) => {\n        dest.emit(\"receipt\", eventReceipt);\n        dest.emit(\"eth_receipt\", eventReceipt);\n    });\n    // eslint-disable-next-line no-void\n    void src.on(\"confirmation\", (confNumber, eventReceipt) => {\n        dest.emit(\"confirmation\", confNumber, eventReceipt);\n        dest.emit(\"eth_confirmation\", confNumber, eventReceipt);\n    });\n    // Don't forward - instead these should be listened for and thrown.\n    // // eslint-disable-next-line no-void\n    // void src.on(\"error\", (error: Error) => {\n    //     dest.emit(\"error\", error);\n    // });\n};\n/**\n * eventTopics contains the Ethereum event identifiers (the first log topic) for\n * Gateway contract events.\n */\nexport const eventTopics = {\n    /**\n     * ```js\n     * event LogBurn(\n     *     bytes _to,\n     *     uint256 _amount,\n     *     uint256 indexed _n,\n     *     bytes indexed _indexedTo\n     *  );\n     * ```\n     */\n    LogBurn: web3Keccak256(\"LogBurn(bytes,uint256,uint256,bytes)\"),\n    /**\n     * ```js\n     * event LogMint(\n     *     address indexed _to,\n     *     uint256 _amount,\n     *     uint256 indexed _n,\n     *     bytes32 indexed _signedMessageHash\n     * );\n     * ```\n     */\n    LogMint: web3Keccak256(\"LogMint(address,uint256,uint256,bytes32)\"),\n};\n/**\n * Waits for the receipt of a transaction to be available, retrying every 3\n * seconds until it is.\n *\n * @param web3 A web3 instance.\n * @param txHash The hash of the transaction being read.\n */\nexport const waitForReceipt = async (web3, txHash, logger, timeout) => \n// eslint-disable-next-line @typescript-eslint/no-misused-promises\nnew Promise(async (resolve, reject) => {\n    assertType(\"string\", { txHash });\n    let blocknative;\n    try {\n        // Initialize Blocknative SDK.\n        blocknative = new BlocknativeSdk({\n            dappId: \"6b3d07f1-b158-4cf1-99ec-919b11fe3654\",\n            networkId: await web3.eth.net.getId(),\n        });\n        const { emitter } = blocknative.transaction(txHash);\n        emitter.on(\"txSpeedUp\", (state) => {\n            if (state\n                .hash) {\n                txHash = Ox(state.hash);\n            }\n        });\n        emitter.on(\"txCancel\", () => {\n            reject(new Error(\"Ethereum transaction was cancelled.\"));\n        });\n    }\n    catch (error) {\n        // Ignore blocknative error.\n    }\n    // Wait for confirmation\n    let receipt;\n    while (!receipt || !receipt.blockHash) {\n        if (logger) {\n            logger.debug(`Fetching transaction receipt: ${txHash}`);\n        }\n        receipt = await web3.eth.getTransactionReceipt(txHash);\n        if (receipt && receipt.blockHash) {\n            break;\n        }\n        await sleep(isDefined(timeout) ? timeout : 15 * SECONDS);\n    }\n    try {\n        // Destroy blocknative SDK.\n        if (blocknative) {\n            blocknative.unsubscribe(txHash);\n            blocknative.destroy();\n        }\n    }\n    catch (error) {\n        // Ignore blocknative error.\n    }\n    // Status might be undefined - so check against `false` explicitly.\n    if (receipt.status === false) {\n        reject(new Error(`Transaction was reverted. { \"transactionHash\": \"${txHash}\" }`));\n        return;\n    }\n    resolve(receipt);\n    return;\n});\nexport const parseBurnEvent = (web3, event) => {\n    assert(event.topics[0] === eventTopics.LogBurn);\n    const { _to, _amount, _n } = web3.eth.abi.decodeLog([\n        {\n            indexed: false,\n            name: \"_to\",\n            type: \"bytes\",\n        },\n        {\n            indexed: false,\n            name: \"_amount\",\n            type: \"uint256\",\n        },\n        {\n            indexed: true,\n            name: \"_n\",\n            type: \"uint256\",\n        },\n        {\n            indexed: true,\n            name: \"_indexedTo\",\n            type: \"bytes\",\n        },\n    ], event.data, event.topics.slice(1));\n    return {\n        transaction: event.transactionHash,\n        amount: new BigNumber(_amount.toString()),\n        to: fromHex(_to).toString(),\n        nonce: new BigNumber(_n.toString()),\n    };\n};\nexport const extractBurnDetails = async (web3, txHash, logger, timeout) => {\n    assertType(\"string\", { txHash });\n    const receipt = await waitForReceipt(web3, txHash, logger, timeout);\n    if (!receipt.logs) {\n        throw Error(\"No events found in transaction\");\n    }\n    const burnDetails = receipt.logs\n        .filter((event) => event.topics[0] === eventTopics.LogBurn)\n        .map((event) => parseBurnEvent(web3, event));\n    if (burnDetails.length > 1) {\n        // WARNING: More than one burn found.\n    }\n    if (burnDetails.length) {\n        return burnDetails[0];\n    }\n    throw Error(\"No reference ID found in logs\");\n};\nexport const getGatewayAddress = async (network, web3, asset) => {\n    try {\n        const getGatewayBySymbol = {\n            constant: true,\n            inputs: [\n                {\n                    internalType: \"string\",\n                    name: \"_tokenSymbol\",\n                    type: \"string\",\n                },\n            ],\n            name: \"getGatewayBySymbol\",\n            outputs: [\n                {\n                    internalType: \"contract IGateway\",\n                    name: \"\",\n                    type: \"address\",\n                },\n            ],\n            payable: false,\n            stateMutability: \"view\",\n            type: \"function\",\n        };\n        const registry = new web3.eth.Contract([getGatewayBySymbol], network.addresses.GatewayRegistry);\n        const registryAddress = await registry.methods\n            .getGatewayBySymbol(asset)\n            .call();\n        if (!registryAddress) {\n            throw new Error(`Empty address returned.`);\n        }\n        return registryAddress;\n    }\n    catch (error) {\n        (error || {}).message = `Error looking up ${asset} gateway address${error.message ? `: ${String(error.message)}` : \".\"}`;\n        throw error;\n    }\n};\nexport const findBurnByNonce = async (network, web3, asset, nonce) => {\n    const gatewayAddress = await getGatewayAddress(network, web3, asset);\n    const nonceBuffer = Buffer.isBuffer(nonce)\n        ? nonce\n        : new BN(nonce).toArrayLike(Buffer, \"be\", 32);\n    const burnEvents = await web3.eth.getPastLogs({\n        address: gatewayAddress,\n        fromBlock: \"1\",\n        toBlock: \"latest\",\n        topics: [eventTopics.LogBurn, Ox(nonceBuffer)],\n    });\n    if (!burnEvents.length) {\n        throw Error(`Burn not found for nonce ${Ox(nonceBuffer)}`);\n    }\n    if (burnEvents.length > 1) {\n        // WARNING: More than one burn with the same nonce.\n    }\n    return parseBurnEvent(web3, burnEvents[0]);\n};\nexport const defaultAccountError = \"No accounts found in Web3 wallet.\";\nexport const withDefaultAccount = async (web3, config) => {\n    if (!config.from) {\n        if (web3.eth.defaultAccount) {\n            config.from = web3.eth.defaultAccount;\n        }\n        else {\n            const accounts = await web3.eth.getAccounts();\n            if (accounts.length === 0) {\n                throw new Error(defaultAccountError);\n            }\n            config.from = accounts[0];\n        }\n    }\n    return config;\n};\n/**\n * Bind a promiEvent to an Ethereum transaction hash, sending confirmation\n * events. Web3 may export a similar function, which should be used instead if\n * it exists.\n *\n * @param web3 A Web3 instance for watching for confirmations.\n * @param txHash The Ethereum transaction has as a hex string.\n * @param promiEvent The existing promiEvent to forward events to.\n */\nexport const manualPromiEvent = async (web3, txHash, promiEvent) => {\n    assertType(\"string\", { txHash });\n    const receipt = await web3.eth.getTransactionReceipt(txHash);\n    promiEvent.emit(\"transactionHash\", txHash);\n    const emitConfirmation = async () => {\n        const currentBlock = await web3.eth.getBlockNumber();\n        promiEvent.emit(\"confirmation\", Math.max(0, currentBlock - receipt.blockNumber), \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        receipt);\n    };\n    // The following section should be revised to properly\n    // register the event emitter to the transaction's\n    // confirmations, so that on(\"confirmation\") works\n    // as expected. This code branch only occurs if a\n    // completed transfer is passed to RenJS again, which\n    // should not usually happen.\n    // Emit confirmation now and in 1s, since a common use\n    // case may be to have the following code, which doesn't\n    // work if we emit the txHash and confirmations\n    // with no time in between:\n    //\n    // ```js\n    // const txHash = await new Promise((resolve, reject) => lockAndMint.on(\"transactionHash\", resolve).catch(reject));\n    // lockAndMint.on(\"confirmation\", () => { /* do something */ });\n    // ```\n    await emitConfirmation();\n    setTimeout(() => {\n        emitConfirmation().catch(console.error);\n    }, 1000);\n    return receipt;\n};\nexport const getTokenAddress = async (network, web3, asset) => {\n    try {\n        const getTokenBySymbolABI = {\n            constant: true,\n            inputs: [\n                {\n                    internalType: \"string\",\n                    name: \"_tokenSymbol\",\n                    type: \"string\",\n                },\n            ],\n            name: \"getTokenBySymbol\",\n            outputs: [\n                {\n                    internalType: \"contract IERC20\",\n                    name: \"\",\n                    type: \"address\",\n                },\n            ],\n            payable: false,\n            stateMutability: \"view\",\n            type: \"function\",\n        };\n        const registry = new web3.eth.Contract([getTokenBySymbolABI], network.addresses.GatewayRegistry);\n        const tokenAddress = await registry.methods\n            .getTokenBySymbol(asset)\n            .call();\n        if (!tokenAddress) {\n            throw new Error(`Empty address returned.`);\n        }\n        return tokenAddress;\n    }\n    catch (error) {\n        (error || {}).message = `Error looking up ${asset} token address${error.message ? `: ${String(error.message)}` : \".\"}`;\n        throw error;\n    }\n};\nexport const findTransactionBySigHash = async (network, web3, asset, nHash, sigHash, blockLimit) => {\n    let status;\n    try {\n        const gatewayAddress = await getGatewayAddress(network, web3, asset);\n        const statusABI = {\n            constant: true,\n            inputs: [\n                {\n                    internalType: \"bytes32\",\n                    name: \"\",\n                    type: \"bytes32\",\n                },\n            ],\n            name: \"status\",\n            outputs: [\n                {\n                    internalType: \"bool\",\n                    name: \"\",\n                    type: \"bool\",\n                },\n            ],\n            payable: false,\n            stateMutability: \"view\",\n            type: \"function\",\n        };\n        const gatewayContract = new web3.eth.Contract([statusABI], gatewayAddress);\n        let fromBlock = 1;\n        let toBlock = \"latest\";\n        if (blockLimit) {\n            toBlock = new BigNumber((await web3.eth.getBlockNumber()).toString()).toNumber();\n            fromBlock = toBlock - blockLimit + 1;\n        }\n        if (sigHash) {\n            // We can skip the `status` check and call `getPastLogs` directly - for now both are called in case\n            // the contract\n            status = await gatewayContract.methods.status(Ox(sigHash)).call();\n            if (!status) {\n                return undefined;\n            }\n            const oldMintEvents = await web3.eth.getPastLogs({\n                address: gatewayAddress,\n                fromBlock,\n                toBlock,\n                topics: [\n                    eventTopics.LogMint,\n                    null,\n                    null,\n                    Ox(sigHash),\n                ],\n            });\n            if (oldMintEvents.length) {\n                return oldMintEvents[0].transactionHash;\n            }\n        }\n        const newMintEvents = await web3.eth.getPastLogs({\n            address: gatewayAddress,\n            fromBlock,\n            toBlock,\n            topics: [eventTopics.LogMint, null, null, Ox(nHash)],\n        });\n        if (newMintEvents.length) {\n            return newMintEvents[0].transactionHash;\n        }\n    }\n    catch (error) {\n        console.warn(error);\n        // Continue with transaction\n    }\n    if (status) {\n        // The sigHash has already been used, but no transaction was found.\n        // Possible due to a restriction on the number logs that can be fetched,\n        // which is the case on BSC.\n        return \"\";\n    }\n    return;\n};\nexport const submitToEthereum = async (web3, contractCalls, mintTx, eventEmitter, \n// config?: { [key: string]: unknown },\nlogger = NullLogger) => {\n    if (!mintTx.out) {\n        throw new Error(`No result available from RenVM transaction.`);\n    }\n    if (mintTx.out.revert !== undefined) {\n        throw new Error(`Unable to submit reverted RenVM transaction.`);\n    }\n    if (!mintTx.out.signature) {\n        throw new Error(`No signature available from RenVM transaction.`);\n    }\n    let tx;\n    for (let i = 0; i < contractCalls.length; i++) {\n        const contractCall = contractCalls[i];\n        const last = i === contractCalls.length - 1;\n        const { contractParams, contractFn, sendTo } = contractCall;\n        const callParams = last\n            ? [\n                ...(contractParams || []).map((value) => value.value),\n                Ox(new BigNumber(mintTx.out.amount).toString(16)),\n                Ox(mintTx.out.nhash),\n                Ox(mintTx.out.signature),\n            ]\n            : (contractParams || []).map((value) => value.value);\n        const ABI = last\n            ? payloadToMintABI(contractFn, contractParams || [])\n            : payloadToABI(contractFn, contractParams || []);\n        const contract = new web3.eth.Contract(ABI, sendTo);\n        const txConfig = typeof contractCall === \"object\"\n            ? contractCall.txConfig\n            : {};\n        const config = await withDefaultAccount(web3, {\n            ...txConfig,\n            ...{\n                value: txConfig && txConfig.value\n                    ? txConfig.value.toString()\n                    : undefined,\n                gasPrice: txConfig && txConfig.gasPrice\n                    ? txConfig.gasPrice.toString()\n                    : undefined,\n            },\n        });\n        logger.debug(\"Calling Ethereum contract\", contractFn, sendTo, ...callParams, config);\n        tx = contract.methods[contractFn](...callParams).send(config);\n        if (last && tx !== undefined) {\n            forwardWeb3Events(tx, eventEmitter);\n        }\n    }\n    return await new Promise((innerResolve, reject) => {\n        if (tx === undefined) {\n            throw new Error(`Must provide contract call.`);\n        }\n        tx.once(\"confirmation\", (_confirmations, receipt) => {\n            innerResolve(receipt.transactionHash);\n        }).catch((error) => {\n            try {\n                if (ignorePromiEventError(error)) {\n                    logger.error(extractError(error));\n                    return;\n                }\n            }\n            catch (_error) {\n                /* Ignore _error */\n            }\n            reject(error);\n        });\n    });\n};\nexport const addressIsValid = (address) => {\n    if (/^.+\\.eth$/.exec(address)) {\n        return true;\n    }\n    if (/^0x[a-f0-9]{40}$/.exec(address)) {\n        return isValidAddress(address);\n    }\n    if (/^0x[a-fA-F0-9]{40}$/.exec(address)) {\n        return isValidChecksumAddress(address);\n    }\n    return false;\n};\n//# sourceMappingURL=utils.js.map","import { LogLevel, NullLogger } from \"@renproject/interfaces\";\nimport BigNumber from \"bignumber.js\";\nimport { assertType } from \"./assert\";\nimport { fromHex, Ox } from \"./common\";\nimport { generateSighash } from \"./renVMHashes\";\nexport const signatureToBuffer = (sig) => Buffer.concat([sig.r, sig.s, Buffer.from([sig.v])]);\nconst switchV = (v) => (v === 27 ? 28 : 27); // 28 - (v - 27);\nconst to32Bytes = (bn) => fromHex((\"0\".repeat(64) + bn.toString(16)).slice(-64));\nexport const secp256k1n = new BigNumber(\"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141\", 16);\nexport const fixSignatureSimple = (r, s, v) => {\n    assertType(\"Buffer\", { r, s });\n    let sBN = new BigNumber(Ox(s), 16);\n    let vFixed = ((v || 0) % 27) + 27;\n    // For a given key, there are two valid signatures for each signed message.\n    // We always take the one with the lower `s`.\n    // secp256k1n/2 = 57896044618658097711785492504343953926418782139537452191302581570759080747168.5\n    if (sBN.gt(secp256k1n.div(2))) {\n        // Take s = -s % secp256k1n\n        sBN = secp256k1n.minus(sBN);\n        // Switch v\n        vFixed = switchV(vFixed);\n    }\n    return {\n        r,\n        s: to32Bytes(sBN),\n        v: vFixed,\n    };\n};\nexport const fixSignature = (r, s, v, sigHash, pHash, amount, to, tokenIdentifier, nHash, v2, logger = NullLogger) => {\n    // Type validation\n    assertType(\"string\", { amount, to, tokenIdentifier });\n    assertType(\"Buffer\", { r, s, sigHash, pHash, nHash });\n    if (typeof logger.level !== \"number\" || logger.level >= LogLevel.Warn) {\n        const expectedSighash = generateSighash(pHash, amount, to, tokenIdentifier, nHash, v2, logger);\n        if (Ox(sigHash) !== Ox(expectedSighash)) {\n            logger.warn(`Warning: unexpected signature hash returned from RenVM. Expected ${Ox(expectedSighash)}, got ${Ox(sigHash)}.`);\n        }\n    }\n    // TODO: Fix code below to check against proper mintAuthority\n    // // Currently, the wrong `v` value may be returned from RenVM. We recover the\n    // // address to see if we need to switch `v`. This can be removed once RenVM\n    // // has been updated.\n    // const recovered = {\n    //     [v]: pubToAddress(ecrecover(\n    //         fromHex(response.autogen.sighash)),\n    //         v,\n    //         fromHex(r),\n    //         s.toArrayLike(Buffer, \"be\", 32),\n    //     )),\n    //     [switchV(v)]: pubToAddress(ecrecover(\n    //         fromHex(response.autogen.sighash),\n    //         switchV(v),\n    //         fromHex(r),\n    //         s.toArrayLike(Buffer, \"be\", 32),\n    //     )),\n    // };\n    // const expected = fromHex(.network.renVM.mintAuthority);\n    // if (recovered[v].equals(expected)) {\n    //     // Do nothing\n    // } else if (recovered[switchV(v)].equals(expected)) {\n    //     console.info(\"[info][ren-js] switching v value\");\n    //     v = switchV(v);\n    // } else {\n    //     throw new Error(`Invalid signature - unable to recover mint authority from signature (Expected ${Ox(expected)}, got ${Ox(recovered[v])})`);\n    // }\n    return fixSignatureSimple(r, s, v);\n};\n//# sourceMappingURL=signatureUtils.js.map","import {\n    getRenNetworkDetails,\n    RenNetwork,\n    RenNetworkDetails,\n} from \"@renproject/interfaces\";\nimport { Chain } from \"./lib/chains\";\n\nexport const NETWORK: RenNetworkDetails = getRenNetworkDetails(\n    RenNetwork.TestnetVDot3\n);\n\nexport const getNetwork = (chain: Chain, token: string, isTestnet: boolean) => {\n    const legacy =\n        (token === \"BTC\" || token === \"ZEC\" || token === \"BCH\") &&\n        chain === Chain.Ethereum;\n\n    return NETWORK.isTestnet\n        ? legacy\n            ? RenNetwork.Testnet\n            : RenNetwork.TestnetVDot3\n        : legacy\n        ? RenNetwork.Mainnet\n        : RenNetwork.MainnetVDot3;\n};\n","export var RenJSErrors;\n(function (RenJSErrors) {\n    RenJSErrors[\"RenVMTransactionNotFound\"] = \"REN_RENVM_TRANSACTION_NOT_FOUND\";\n    RenJSErrors[\"DepositSpentOrNotFound\"] = \"REN_DEPOSIT_SPENT_OR_NOT_FOUND\";\n    RenJSErrors[\"AmountTooSmall\"] = \"REN_AMOUNT_TOO_SMALL\";\n})(RenJSErrors || (RenJSErrors = {}));\n//# sourceMappingURL=errors.js.map","/* eslint-disable no-console */\nimport BigNumber from \"bignumber.js\";\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Error\"] = 0] = \"Error\";\n    LogLevel[LogLevel[\"Warn\"] = 1] = \"Warn\";\n    LogLevel[LogLevel[\"Log\"] = 2] = \"Log\";\n    LogLevel[LogLevel[\"Info\"] = 3] = \"Info\";\n    LogLevel[LogLevel[\"Debug\"] = 4] = \"Debug\";\n    LogLevel[LogLevel[\"Trace\"] = 5] = \"Trace\";\n})(LogLevel || (LogLevel = {}));\nconst stringToLogLevel = (level) => {\n    switch (level) {\n        case \"error\":\n        case LogLevel.Error:\n            return 0;\n        case \"warn\":\n        case LogLevel.Warn:\n            return 1;\n        case \"warn\":\n        case LogLevel.Log:\n            return 2;\n        case \"info\":\n        case LogLevel.Info:\n            return 3;\n        case \"debug\":\n        case LogLevel.Debug:\n            return 4;\n        case \"trace\":\n        case LogLevel.Trace:\n            return 5;\n        default:\n            return 1;\n    }\n};\nconst logLevelName = (level) => {\n    switch (stringToLogLevel(level)) {\n        case LogLevel.Error:\n            return \"ERROR\";\n        case LogLevel.Warn:\n            return \"WARN\";\n        case LogLevel.Log:\n            return \"WARN\";\n        case LogLevel.Info:\n            return \"INFO\";\n        case LogLevel.Debug:\n            return \"DEBUG\";\n        case LogLevel.Trace:\n            return \"TRACE\";\n    }\n};\nconst toString = (value) => {\n    try {\n        if (BigNumber.isBigNumber(value)) {\n            return value.toFixed();\n        }\n        return value;\n    }\n    catch (error) {\n        try {\n            return String(value);\n        }\n        catch (errorInner) {\n            return \"\";\n        }\n    }\n};\nconst printWithPrefix = (l, prefix, ...args) => {\n    if (prefix) {\n        l(prefix, ...args);\n    }\n    else {\n        l(...args);\n    }\n};\n/**\n * SimpleLogger is a implementation of the Logger interface that also supports\n * setting the log level.\n *\n * @export\n * @class SimpleLogger\n */\nexport class SimpleLogger {\n    constructor(level = LogLevel.Warn, logPrefix, debugPrefix) {\n        this.logPrefix = () => \"\";\n        this.debugPrefix = (level) => `[RenJS][${logLevelName(level)}]`;\n        this.trace = (message, ...optionalParams) => {\n            if (this.level >= LogLevel.Trace) {\n                if (optionalParams.length && typeof message === \"string\") {\n                    console.group((this.debugPrefix(LogLevel.Trace) || \"\") + message);\n                    console.trace(...optionalParams.map(toString));\n                    console.groupEnd();\n                }\n                else {\n                    printWithPrefix(console.trace, this.debugPrefix(LogLevel.Trace), toString(message), ...optionalParams.map(toString));\n                }\n            }\n        };\n        this.debug = (message, ...optionalParams) => {\n            if (this.level >= LogLevel.Debug) {\n                if (optionalParams.length && typeof message === \"string\") {\n                    console.group((this.debugPrefix(LogLevel.Debug) || \"\") + message);\n                    console.debug(...optionalParams.map(toString));\n                    console.groupEnd();\n                }\n                else {\n                    printWithPrefix(console.debug, this.debugPrefix(LogLevel.Debug), toString(message), ...optionalParams.map(toString));\n                }\n            }\n        };\n        this.info = (...optionalParams) => {\n            if (this.level >= LogLevel.Info) {\n                printWithPrefix(console.info, this.logPrefix(LogLevel.Info), ...optionalParams.map(toString));\n            }\n        };\n        this.log = (...optionalParams) => {\n            if (this.level >= LogLevel.Log) {\n                printWithPrefix(console.log, this.logPrefix(LogLevel.Log), ...optionalParams.map(toString));\n            }\n        };\n        this.warn = (...optionalParams) => {\n            if (this.level >= LogLevel.Warn) {\n                printWithPrefix(console.warn, this.logPrefix(LogLevel.Warn), ...optionalParams.map(toString));\n            }\n        };\n        this.error = (...optionalParams) => {\n            if (this.level >= LogLevel.Error) {\n                printWithPrefix(console.error, this.logPrefix(LogLevel.Error), ...optionalParams.map(toString));\n            }\n        };\n        this.level = level;\n        if (logPrefix) {\n            const logPrefixFn = typeof logPrefix === \"string\" ? () => logPrefix : logPrefix;\n            this.logPrefix = logPrefixFn;\n            this.debugPrefix = logPrefixFn;\n        }\n        if (debugPrefix) {\n            const debugPrefixFn = typeof debugPrefix === \"string\"\n                ? () => debugPrefix\n                : debugPrefix;\n            this.debugPrefix = debugPrefixFn;\n        }\n    }\n}\nexport const NullLogger = {\n    level: -1,\n    trace: (_message, ..._optionalParams) => { },\n    debug: (_message, ..._optionalParams) => { },\n    info: (_message, ..._optionalParams) => { },\n    log: (_message, ..._optionalParams) => { },\n    warn: (_message, ..._optionalParams) => { },\n    error: (_message, ..._optionalParams) => { },\n};\n//# sourceMappingURL=logger.js.map","// Modified from web3-core-method\n/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/**\n * @file PromiEvent.js\n * @author Fabian Vogelsteller <fabian@ethereum.org>, Samuel Furter <samuel@ethereum.org>\n * @date 2018\n */\n/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types */\nimport { EventEmitter } from \"events\";\nexport class InternalPromiEvent {\n    /**\n     * @constructor\n     */\n    constructor() {\n        this.promise = new Promise((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        this._cancelled = false;\n        this.eventEmitter = new EventEmitter();\n        return new Proxy(this, {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            get: this.proxyHandler,\n        });\n    }\n    /**\n     * Proxy handler to call the promise or eventEmitter methods\n     */\n    proxyHandler(target, name) {\n        if (name === \"resolve\" || name === \"reject\") {\n            // eslint-disable-next-line security/detect-object-injection\n            return target[name];\n        }\n        if (name === \"then\") {\n            return target.promise.then.bind(target.promise);\n        }\n        if (name === \"catch\") {\n            return target.promise.catch.bind(target.promise);\n        }\n        if (name === \"_cancel\") {\n            return () => {\n                this._cancelled = true;\n            };\n        }\n        if (name === \"_isCancelled\") {\n            return () => this._cancelled === true;\n        }\n        if (name === \"_resume\") {\n            return () => {\n                this._cancelled = false;\n            };\n        }\n        // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n        if (target.eventEmitter[name]) {\n            // eslint-disable-next-line security/detect-object-injection, @typescript-eslint/no-unsafe-member-access\n            return target.eventEmitter[name];\n        }\n        return;\n    }\n}\nexport const newPromiEvent = () => new InternalPromiEvent();\n//# sourceMappingURL=promiEvent.js.map","export var LockAndMintStatus;\n(function (LockAndMintStatus) {\n    LockAndMintStatus[\"Committed\"] = \"mint_committed\";\n    LockAndMintStatus[\"Deposited\"] = \"mint_deposited\";\n    LockAndMintStatus[\"Confirmed\"] = \"mint_confirmed\";\n    LockAndMintStatus[\"SubmittedToRenVM\"] = \"mint_submittedToRenVM\";\n    LockAndMintStatus[\"ReturnedFromRenVM\"] = \"mint_returnedFromRenVM\";\n    LockAndMintStatus[\"SubmittedToLockChain\"] = \"mint_submittedToLockChain\";\n    LockAndMintStatus[\"ConfirmedOnLockChain\"] = \"mint_confirmedOnLockChain\";\n    // Backwards compatibility\n    LockAndMintStatus[\"SubmittedToEthereum\"] = \"mint_submittedToEthereum\";\n    LockAndMintStatus[\"ConfirmedOnEthereum\"] = \"mint_confirmedOnEthereum\";\n})(LockAndMintStatus || (LockAndMintStatus = {}));\nexport var BurnAndReleaseStatus;\n(function (BurnAndReleaseStatus) {\n    BurnAndReleaseStatus[\"Committed\"] = \"burn_committed\";\n    BurnAndReleaseStatus[\"SubmittedToLockChain\"] = \"burn_submittedToLockChain\";\n    BurnAndReleaseStatus[\"ConfirmedOnLockChain\"] = \"burn_confirmedOnLockChain\";\n    BurnAndReleaseStatus[\"SubmittedToRenVM\"] = \"burn_submittedToRenVM\";\n    BurnAndReleaseStatus[\"ReturnedFromRenVM\"] = \"burn_returnedFromRenVM\";\n    BurnAndReleaseStatus[\"NoBurnFound\"] = \"burn_noBurnFound\";\n    // Backwards compatibility\n    BurnAndReleaseStatus[\"SubmittedToEthereum\"] = \"burn_submittedToEthereum\";\n    BurnAndReleaseStatus[\"ConfirmedOnEthereum\"] = \"burn_confirmedOnEthereum\";\n})(BurnAndReleaseStatus || (BurnAndReleaseStatus = {}));\nexport var TxStatus;\n(function (TxStatus) {\n    // TxStatusNil is used for transactions that have not been seen, or are\n    // otherwise unknown.\n    TxStatus[\"TxStatusNil\"] = \"nil\";\n    // TxStatusConfirming is used for transactions that are currently waiting\n    // for their underlying blockchain transactions to be confirmed.\n    TxStatus[\"TxStatusConfirming\"] = \"confirming\";\n    // TxStatusPending is used for transactions that are waiting for consensus\n    // to be reached on when the transaction should be executed.\n    TxStatus[\"TxStatusPending\"] = \"pending\";\n    // TxStatusExecuting is used for transactions that are currently being\n    // executed.\n    TxStatus[\"TxStatusExecuting\"] = \"executing\";\n    // TxStatusReverted is used for transactions that were reverted during\n    // execution.\n    TxStatus[\"TxStatusReverted\"] = \"reverted\";\n    // TxStatusDone is used for transactions that have been successfully\n    // executed.\n    TxStatus[\"TxStatusDone\"] = \"done\";\n})(TxStatus || (TxStatus = {}));\nexport const TxStatusIndex = {\n    [TxStatus.TxStatusNil]: 0,\n    [TxStatus.TxStatusConfirming]: 1,\n    [TxStatus.TxStatusPending]: 2,\n    [TxStatus.TxStatusExecuting]: 3,\n    [TxStatus.TxStatusReverted]: 4,\n    [TxStatus.TxStatusDone]: 5,\n};\n//# sourceMappingURL=types.js.map","// export * as v1 caused issues with some installations.\nimport * as v1import from \"./v1/index\";\nimport * as v2import from \"./v2/index\";\nexport * from \"./combinedProvider\";\nexport const v1 = v1import;\nexport const v2 = v2import;\n//# sourceMappingURL=index.js.map","import { getRenNetworkDetails, newPromiEvent, NullLogger, } from \"@renproject/interfaces\";\nimport { assertObject, assertType, fromBase64, generateBurnTxHash, generateGHash, generateNHash, generatePHash, generateSHash, isDefined, Ox, renVMHashToBase64, retryNTimes, SECONDS, toBase64, toURLBase64, } from \"@renproject/utils\";\nimport BN from \"bn.js\";\nimport BigNumber from \"bignumber.js\";\nexport var BurnAndReleaseStatus;\n(function (BurnAndReleaseStatus) {\n    BurnAndReleaseStatus[\"Pending\"] = \"pending\";\n    BurnAndReleaseStatus[\"Burned\"] = \"burned\";\n    BurnAndReleaseStatus[\"Released\"] = \"released\";\n    BurnAndReleaseStatus[\"Reverted\"] = \"reverted\";\n})(BurnAndReleaseStatus || (BurnAndReleaseStatus = {}));\nexport class BurnAndRelease {\n    /** @hidden */\n    constructor(renVM, params, config = {}) {\n        this.validateParams = () => {\n            assertObject({\n                from: \"object | undefined\",\n                to: \"object\",\n                transaction: \"any | undefined\",\n                burnNonce: \"string | number | undefined\",\n                contractCalls: \"any[] | undefined\",\n                asset: \"string\",\n                txHash: \"string | undefined\",\n                nonce: \"Buffer | string | undefined\",\n                tags: \"string[] | undefined\",\n            }, { params: this.params });\n            if (this.params.contractCalls) {\n                this.params.contractCalls.map((contractCall) => {\n                    assertType(\"string\", {\n                        sendTo: contractCall.sendTo,\n                        contractFn: contractCall.contractFn,\n                    });\n                });\n            }\n        };\n        /** @hidden */\n        this._initialize = async () => {\n            this._state.renNetwork =\n                this._state.renNetwork ||\n                    getRenNetworkDetails(await this.renVM.getNetwork(this._state.selector));\n            if (this.params.from && !this.params.from.renNetwork) {\n                await this.params.from.initialize(this._state.renNetwork);\n            }\n            if (!this.params.to.renNetwork) {\n                await this.params.to.initialize(this._state.renNetwork);\n            }\n            const burnPayload = this.params.to.burnPayload && (await this.params.to.burnPayload());\n            const overwriteParams = this.params.from &&\n                this.params.from.getBurnParams &&\n                (await this.params.from.getBurnParams(this.params.asset, burnPayload));\n            this.params = {\n                ...overwriteParams,\n                ...this.params,\n            };\n            if (this.renVM.version(this._state.selector) >= 2) {\n                this._state.gPubKey = await this.renVM.selectPublicKey(this._state.selector, this.params.to.name);\n            }\n            return this;\n        };\n        /**\n         * TODO: Refresh the BurnAndRelease status by checking the status of the\n         * mint-chain transaction and the RenVM transaction.\n         *\n         * ```ts\n         * await burnAndRelease.refreshStatus();\n         * // > \"released\"\n         * ```\n         */\n        // eslint-disable-next-line @typescript-eslint/require-await\n        this.refreshStatus = async () => {\n            return this.status;\n        };\n        this.confirmationTarget = async () => {\n            if (isDefined(this._state.targetConfirmations)) {\n                return this._state.targetConfirmations;\n            }\n            let target;\n            const getConfirmationTarget = this.renVM.getConfirmationTarget;\n            if (getConfirmationTarget) {\n                target = await retryNTimes(async () => getConfirmationTarget(this._state.selector, this.params.from), 2);\n            }\n            this._state.targetConfirmations = isDefined(target) ? target : 6;\n            return this._state.targetConfirmations;\n        };\n        /**\n         * Read a burn reference from an Ethereum transaction - or submit a\n         * transaction first if the transaction details have been provided.\n         */\n        this.burn = () => {\n            const promiEvent = newPromiEvent();\n            (async () => {\n                if (this.params.txHash) {\n                    return this;\n                }\n                if (!this.params.from) {\n                    throw new Error(`Must either provide field \\`to\\` or field \\`txHash\\`.`);\n                }\n                const { asset, transaction, burnNonce, contractCalls, } = this.params;\n                this.burnDetails = await this.params.from.findBurnTransaction(asset, {\n                    transaction,\n                    burnNonce,\n                    contractCalls,\n                }, promiEvent, this._state.logger, this._state.config.networkDelay);\n                this.status = BurnAndReleaseStatus.Burned;\n                return this;\n            })()\n                .then(promiEvent.resolve)\n                .catch(promiEvent.reject);\n            return promiEvent;\n        };\n        /**\n         * `txHash` returns the RenVM transaction hash, which is distinct from the\n         * lock or mint chain transaction hashes. It can be used to query the\n         * burn-and-release details from RenVM once they've been submitted to it.\n         *\n         * The RenVM txHash is a URL-base64 string.\n         *\n         * ```ts\n         * burnAndRelease.txHash();\n         * // > \"QNM87rNDuxx54H7VK7D_NAU0u_mjk09-G25IJZL1QrI\"\n         * ```\n         */\n        this.txHash = () => {\n            const txHash = this.params.txHash;\n            if (txHash) {\n                return renVMHashToBase64(txHash, this.renVM.version(this._state.selector) >= 2);\n            }\n            if (!this.params.from) {\n                throw new Error(`Must either provide field \\`to\\` or field \\`txHash\\`.`);\n            }\n            if (!this.burnDetails) {\n                throw new Error(\"Must call `burn` before calling `txHash`.\");\n            }\n            if (this.renVM.version(this._state.selector) >= 2 &&\n                this.renVM.burnTxHash) {\n                const { transaction, amount, to, nonce } = this.burnDetails;\n                const payload = Buffer.from([]);\n                const pHash = generatePHash([], this._state.logger);\n                const { txid, txindex } = this.params.from.transactionRPCFormat(transaction, true);\n                const nonceBuffer = new BN(nonce.toFixed()).toArrayLike(Buffer, \"be\", 32);\n                const nHash = generateNHash(nonceBuffer, txid, txindex, this.renVM.version(this._state.selector) >= 2, this._state.logger);\n                const sHash = generateSHash(`${this.params.asset}/to${this.params.to.name}`);\n                const gHash = generateGHash([], Ox(this.params.to.addressStringToBytes(to)), Ox(sHash), nonceBuffer, this.renVM.version(this._state.selector) >= 2, this._state.logger);\n                const { gPubKey } = this._state;\n                if (!gPubKey) {\n                    throw new Error(`BurnAndRelease object must be initialized.`);\n                }\n                return toURLBase64(this.renVM.burnTxHash({\n                    selector: this._state.selector,\n                    gHash,\n                    gPubKey,\n                    nHash,\n                    nonce: nonceBuffer,\n                    output: {\n                        txid,\n                        txindex,\n                    },\n                    amount: amount.toFixed(),\n                    payload,\n                    pHash,\n                    to: to.toString(),\n                }));\n            }\n            else {\n                return toBase64(generateBurnTxHash(this._state.selector, this.burnDetails.nonce.toFixed(), this._state.logger));\n            }\n        };\n        /**\n         * queryTx requests the status of the burn from RenVM.\n         */\n        this.queryTx = async () => {\n            const burnTransaction = await this.renVM.queryMintOrBurn(this._state.selector, fromBase64(this.txHash()));\n            this._state.queryTxResult = burnTransaction;\n            return burnTransaction;\n        };\n        /**\n         * submit queries RenVM for the status of the burn until the funds are\n         * released.\n         */\n        this.release = () => {\n            const promiEvent = newPromiEvent();\n            (async () => {\n                if (!this.burnDetails && !this.params.txHash) {\n                    throw new Error(\"Must call `burn` before calling `release`.\");\n                }\n                const txHash = this.txHash();\n                if (!this.params.txHash && this.burnDetails) {\n                    if (!this.params.from) {\n                        throw new Error(`Must either provide field \\`to\\` or field \\`txHash\\`.`);\n                    }\n                    if (this.params.tags && this.params.tags.length > 1) {\n                        throw new Error(\"Providing multiple tags is not supported yet.\");\n                    }\n                    const tags = this.params.tags && this.params.tags.length\n                        ? [this.params.tags[0]]\n                        : [];\n                    const { transaction, amount, to, nonce } = this.burnDetails;\n                    try {\n                        let returnedTxHash;\n                        if (this.renVM.version(this._state.selector) >= 2) {\n                            assertType(\"string\", { to });\n                            const { gPubKey } = this._state;\n                            if (!gPubKey) {\n                                throw new Error(`BurnAndRelease object must be initialized.`);\n                            }\n                            const payload = Buffer.from([]);\n                            const pHash = generatePHash([], this._state.logger);\n                            const { txid, txindex, } = this.params.from.transactionRPCFormat(transaction, true);\n                            const nonceBuffer = new BN(nonce.toFixed()).toArrayLike(Buffer, \"be\", 32);\n                            const nHash = generateNHash(nonceBuffer, txid, txindex, this.renVM.version(this._state.selector) >= 2, this._state.logger);\n                            const sHash = generateSHash(`${this.params.asset}/to${this.params.to.name}`);\n                            const gHash = generateGHash([], Ox(this.params.to.addressStringToBytes(to)), Ox(sHash), nonceBuffer, this.renVM.version(this._state.selector) >= 2, this._state.logger);\n                            returnedTxHash = toURLBase64(await this.renVM.submitBurn({\n                                selector: this._state.selector,\n                                tags,\n                                gHash,\n                                gPubKey,\n                                nHash,\n                                nonce: nonceBuffer,\n                                output: {\n                                    txid,\n                                    txindex,\n                                },\n                                amount: amount.toFixed(),\n                                payload,\n                                pHash,\n                                to: to.toString(),\n                                // from v1\n                                burnNonce: new BigNumber(0),\n                            }));\n                        }\n                        else {\n                            returnedTxHash = toBase64(await this.renVM.submitBurn({\n                                selector: this._state.selector,\n                                tags,\n                                burnNonce: nonce,\n                                // for v2\n                                gHash: Buffer.from([]),\n                                gPubKey: Buffer.from([]),\n                                nHash: Buffer.from([]),\n                                nonce: Buffer.from([]),\n                                output: { txid: Buffer.from([]), txindex: \"\" },\n                                amount: \"\",\n                                payload: Buffer.from([]),\n                                pHash: Buffer.from([]),\n                                to: \"\",\n                            }));\n                        }\n                        if (txHash && txHash !== returnedTxHash) {\n                            this._state.logger.warn(`Unexpected txHash returned from RenVM. Received: ${returnedTxHash}, expected: ${txHash}`);\n                        }\n                    }\n                    catch (error) {\n                        // TODO: Check against already being submitted.\n                        throw error;\n                    }\n                }\n                // const txHash = await this.renVMNetwork.submitTokenFromEthereum(this.params.sendToken, burnNonce);\n                promiEvent.emit(\"txHash\", txHash);\n                this._state.logger.debug(\"txHash:\", txHash);\n                const response = await this.renVM.waitForTX(this._state.selector, fromBase64(txHash), (status) => {\n                    promiEvent.emit(\"status\", status);\n                    this._state.logger.debug(\"transaction status:\", status);\n                }, () => promiEvent._isCancelled(), this._state.config.networkDelay);\n                if (response.out && response.out.revert !== undefined) {\n                    this.status = BurnAndReleaseStatus.Reverted;\n                    this.revertReason = response.out.revert.toString();\n                    throw new Error(this.revertReason);\n                }\n                else {\n                    this.status = BurnAndReleaseStatus.Released;\n                    if (response.out &&\n                        this.renVM.version(this._state.selector) >= 2) {\n                        let transaction;\n                        try {\n                            if (response.out.txid) {\n                                const txid = response.out.txid;\n                                transaction = await this.params.to.transactionFromID(txid, \"\", true);\n                            }\n                            else if (response.out.outpoint) {\n                                const { hash, index } = response.out.outpoint;\n                                transaction = await this.params.to.transactionFromID(hash, index.toFixed(), true);\n                            }\n                        }\n                        catch (error) {\n                            this._state.logger.debug(error);\n                        }\n                        if (transaction) {\n                            this.releaseTransaction = transaction;\n                            promiEvent.emit(\"transaction\", transaction);\n                        }\n                    }\n                }\n                return response;\n            })()\n                .then(promiEvent.resolve)\n                .catch(promiEvent.reject);\n            return promiEvent;\n        };\n        this.params = params;\n        this.renVM = renVM;\n        this._state = {\n            logger: config.logger || NullLogger,\n            selector: this.renVM.selector(this.params),\n            targetConfirmations: undefined,\n            config: {\n                ...config,\n                networkDelay: config.networkDelay || 15 * SECONDS,\n            },\n        };\n        this.validateParams();\n        this.status = this.params.txHash\n            ? BurnAndReleaseStatus.Burned\n            : BurnAndReleaseStatus.Pending;\n        {\n            // Debug log\n            const { ...restOfParams } = this.params;\n            this._state.logger.debug(\"burnAndRelease created:\", restOfParams);\n        }\n    }\n}\n//# sourceMappingURL=burnAndRelease.js.map","import { retryNTimes, SECONDS } from \"@renproject/utils\";\nimport { DepositStatus } from \"./lockAndMint\";\n/**\n * See [[RenJS.defaultDepositHandler]].\n */\nconst createDepositHandler = (retries = -1) => {\n    const fn = async (deposit) => {\n        // Loop until the deposit status is `Submitted`.\n        while (deposit.status !== DepositStatus.Submitted) {\n            switch (deposit.status) {\n                // The deposit has been seen, but not enough confirmations have\n                // passed yet.\n                case DepositStatus.Detected:\n                    await retryNTimes(async () => {\n                        deposit._state.logger.log(`Calling .confirmed`);\n                        await deposit\n                            .confirmed()\n                            .on(\"target\", (target) => {\n                            deposit._state.logger.log(`Waiting for ${target} confirmations`);\n                        })\n                            .on(\"confirmation\", (confs, target) => {\n                            deposit._state.logger.log(`${confs}/${target} confirmations`);\n                        });\n                    }, retries, 10 * SECONDS, deposit._state.logger);\n                    break;\n                // The deposit as been seen and confirmed, but it hasn't been\n                // signed by RenVM yet.\n                case DepositStatus.Confirmed:\n                    await retryNTimes(async () => {\n                        try {\n                            deposit._state.logger.log(`Calling .signed`);\n                            await deposit\n                                .signed()\n                                .on(\"txHash\", (status) => {\n                                deposit._state.logger.log(`RenVM hash: ${status}`);\n                            })\n                                .on(\"status\", (status) => {\n                                deposit._state.logger.log(`status: ${status}`);\n                            });\n                        }\n                        catch (error) {\n                            if (deposit.status === DepositStatus.Reverted) {\n                                return;\n                            }\n                            throw error;\n                        }\n                    }, retries, 10 * SECONDS, deposit._state.logger);\n                    break;\n                // The mint has been signed by RenVM and can be submitted to\n                // the mint-chain.\n                case DepositStatus.Signed:\n                    await retryNTimes(async () => {\n                        try {\n                            deposit._state.logger.log(`Calling .mint`);\n                            await deposit\n                                .mint()\n                                .on(\"transactionHash\", (txHash) => {\n                                deposit._state.logger.log(`txHash: ${deposit.params.to.utils\n                                    .transactionExplorerLink\n                                    ? deposit.params.to.utils.transactionExplorerLink(txHash) || String(txHash)\n                                    : String(txHash)}`);\n                            });\n                        }\n                        catch (error) {\n                            // Ethereum revert message.\n                            if (/(execution reverted)|(Transaction has been reverted)/.exec(error.message || String(error))) {\n                                deposit.status = DepositStatus.Reverted;\n                                deposit.revertReason =\n                                    error.message || String(error);\n                                return;\n                            }\n                            throw error;\n                        }\n                    }, retries, 10 * SECONDS, deposit._state.logger);\n                    break;\n                // RenVM wasn't able to sign the mint. Potential causes can be\n                // found in `deposit.revertReason`.\n                case DepositStatus.Reverted:\n                    throw new Error(`RenVM transaction reverted${deposit.revertReason\n                        ? \": \" + deposit.revertReason\n                        : \"\"}`);\n            }\n        }\n    };\n    fn.withRetries = (newRetries) => createDepositHandler(newRetries);\n    return fn;\n};\n/**\n * See [[RenJS.defaultDepositHandler]].\n */\nexport const defaultDepositHandler = createDepositHandler();\n//# sourceMappingURL=defaultDepositHandler.js.map","// tslint:disable: no-console react-this-binding-issue\n\nimport * as React from \"react\";\n\nimport RenJS from \"@renproject/ren\";\nimport { LockAndMintDeposit } from \"@renproject/ren/build/main/lockAndMint\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { Loading } from \"@renproject/react-components\";\n\nimport { Asset, Chain } from \"../lib/chains\";\nimport { NETWORK } from \"../network\";\nimport { ReactComponent as MetaMaskLogo } from \"./styles/metamask.svg\";\n\ninterface Props {\n    asset: Asset;\n    mintChain: Chain;\n    renJS: RenJS;\n    mintChainProvider: any | null | undefined;\n    startMint: (\n        renJS: RenJS,\n        mintChain: Chain,\n        mintChainProvider: any,\n        asset: Asset,\n        recipientAddress: string,\n        showAddress: (\n            address: string | { address: string; params?: string }\n        ) => void,\n        setMinimumAmount: (amount: string) => void,\n        onDeposit: (txHash: string, deposit: LockAndMintDeposit) => void\n    ) => Promise<void>;\n    connectMintChain: () => void;\n    addDeposit: (txHash: string, deposit: LockAndMintDeposit) => void;\n    getDefaultMintChainAddress: () => Promise<string> | string;\n    addressIsValid: (address: string) => boolean;\n}\n\nconst ClickToCopy = ({ text }: { text: string }) => {\n    const [copied, setCopied] = React.useState(false);\n    const onClick = React.useCallback(() => {\n        if (copied) {\n            return;\n        }\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2 * 1000);\n    }, [setCopied, copied]);\n    return (\n        <CopyToClipboard text={text} onClick={onClick}>\n            <span\n                onClick={onClick}\n                className={`copy ${copied ? \"copied\" : \"\"}`}\n            >\n                {copied ? \"Copied\" : text}\n            </span>\n        </CopyToClipboard>\n    );\n};\n\nexport const MintForm: React.FC<Props> = ({\n    asset,\n    mintChain,\n    renJS,\n    mintChainProvider,\n    startMint,\n    connectMintChain,\n    addDeposit,\n    getDefaultMintChainAddress,\n    addressIsValid,\n}) => {\n    const [errorMessage, setErrorMessage] = React.useState(\n        null as string | null\n    );\n\n    const [recipientAddress, setRecipientAddress] = React.useState<\n        string | null\n    >(null);\n\n    const [generatingAddress, setGeneratingAddress] = React.useState(false);\n    const [depositAddress, setDepositAddress] = React.useState<\n        string | { address: string; params?: string; memo?: string } | null\n    >(null);\n\n    const [minimumAmount, setMinimumAmount] = React.useState<string | null>(\n        null\n    );\n\n    const onSubmit = React.useCallback(\n        async (event: React.FormEvent<HTMLFormElement>) => {\n            event.preventDefault();\n            setGeneratingAddress(true);\n            setDepositAddress(null);\n\n            if (!mintChainProvider) {\n                return;\n            }\n\n            if (!recipientAddress) {\n                setErrorMessage(`Please enter a valid ${mintChain} address.`);\n                return;\n            }\n            setErrorMessage(null);\n            try {\n                await startMint(\n                    renJS,\n                    mintChain,\n                    mintChainProvider,\n                    asset,\n                    recipientAddress,\n                    setDepositAddress,\n                    setMinimumAmount,\n                    addDeposit\n                );\n            } catch (error) {\n                console.error(error);\n                setErrorMessage(\n                    String(\n                        error.message || error.error || JSON.stringify(error)\n                    )\n                );\n            }\n            setGeneratingAddress(false);\n        },\n        [\n            asset,\n            renJS,\n            recipientAddress,\n            mintChainProvider,\n            addDeposit,\n            mintChain,\n            startMint,\n        ]\n    );\n\n    const useMetaMaskAccount = React.useCallback(async () => {\n        if (!mintChainProvider) {\n            setErrorMessage(\"Please use a Web3 browser\");\n            return;\n        }\n        try {\n            setRecipientAddress(await getDefaultMintChainAddress());\n        } catch (error) {\n            console.error(error);\n        }\n    }, [mintChainProvider, setRecipientAddress, getDefaultMintChainAddress]);\n\n    const validAddress: boolean = React.useMemo(\n        () => (recipientAddress ? addressIsValid(recipientAddress) : false),\n        [recipientAddress, addressIsValid]\n    );\n\n    return (\n        <form\n            onSubmit={onSubmit}\n            className={generatingAddress ? \"disabled\" : \"\"}\n        >\n            <div className=\"send\">\n                <input\n                    className=\"no-right-border\"\n                    value={recipientAddress || \"\"}\n                    onChange={(e) => {\n                        setRecipientAddress(e.target.value);\n                    }}\n                    placeholder={`Recipient (${\n                        NETWORK.isTestnet ? \"testnet\" : \"\"\n                    } ${mintChain} address)`}\n                />\n                <div\n                    role=\"button\"\n                    className={`box box-action no-left-border ${\n                        !mintChainProvider ? \"disabled\" : \"\"\n                    }`}\n                    onClick={mintChainProvider ? useMetaMaskAccount : undefined}\n                >\n                    <MetaMaskLogo />\n                </div>\n            </div>\n            <div className=\"send\">\n                {mintChainProvider ? (\n                    <button\n                        disabled={generatingAddress || !validAddress}\n                        type=\"submit\"\n                        className={`button blue ${\n                            generatingAddress || !validAddress ? \"disabled\" : \"\"\n                        }`}\n                    >\n                        {generatingAddress ? <Loading alt={true} /> : <>Mint</>}\n                    </button>\n                ) : (\n                    <button\n                        type=\"button\"\n                        className={`button light-blue`}\n                        onClick={connectMintChain}\n                    >\n                        Connect {mintChain} wallet\n                    </button>\n                )}\n            </div>\n            {depositAddress ? (\n                <>\n                    <div className=\"deposit-address\">\n                        Deposit{\" \"}\n                        {minimumAmount ? <>at least {minimumAmount}</> : null}{\" \"}\n                        <b>{asset}</b> to\n                        {typeof depositAddress === \"string\" ? (\n                            <p>\n                                <b>Address:</b>{\" \"}\n                                <ClickToCopy text={depositAddress} />\n                            </p>\n                        ) : (\n                            <>\n                                <p>\n                                    <b>Address:</b>{\" \"}\n                                    <ClickToCopy\n                                        text={depositAddress.address}\n                                    />\n                                </p>\n                                {depositAddress.params ? (\n                                    <div>\n                                        <b>Params:</b>\n                                        <p>\n                                            Base64:{\" \"}\n                                            <ClickToCopy\n                                                text={depositAddress.params}\n                                            />\n                                        </p>\n                                        <p>\n                                            Hex:{\" \"}\n                                            <ClickToCopy\n                                                text={Buffer.from(\n                                                    depositAddress.params,\n                                                    \"base64\"\n                                                ).toString(\"hex\")}\n                                            />\n                                        </p>\n                                    </div>\n                                ) : null}\n                                {depositAddress.memo ? (\n                                    <div>\n                                        <b>Params:</b>\n                                        <p>\n                                            <ClickToCopy\n                                                text={depositAddress.memo}\n                                            />\n                                        </p>\n                                    </div>\n                                ) : null}\n                            </>\n                        )}\n                    </div>\n                    <div className=\"deposit-loading\">\n                        Watching for deposits...{\" \"}\n                        <Loading style={{ display: \"inline-block\" }} />\n                    </div>\n                </>\n            ) : null}\n\n            {errorMessage ? <p className=\"box red\">{errorMessage}</p> : <></>}\n        </form>\n    );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"style\", {\n  type: \"text/css\"\n}, \"\\n\\t.metamask-st0{fill:#161616;stroke:#161616;}\\n\\t.metamask-st1{fill:#E4761B;stroke:#E4761B;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st2{fill:#763D16;stroke:#763D16;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st3{fill:#F6851B;stroke:#F6851B;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st4{fill:#E2761B;stroke:#E2761B;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st5{fill:#CD6116;stroke:#CD6116;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st6{fill:#C0AD9E;stroke:#C0AD9E;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st7{fill:#D7C1B3;stroke:#D7C1B3;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st8{fill:#E4751F;stroke:#E4751F;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st9{fill:#233447;stroke:#233447;stroke-linecap:round;stroke-linejoin:round;}\\n\\t.metamask-st10{fill:#161616;stroke:#161616;stroke-linecap:round;stroke-linejoin:round;}\\n\");\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st0\",\n  points: \"277.3,145.6 272.3,142 280.3,134.7 274.2,129.9 282.2,123.8 276.9,119.8 285.3,79 272.7,41.1  191.6,71.4 124.1,71.4 43,41.1 30.4,79 38.9,119.8 33.5,123.8 41.5,129.9 35.4,134.7 43.4,142 38.4,145.6 49.9,159.1 32.5,213.3  48.6,268.6 105.3,253 116.3,262 138.7,277.5 177,277.5 199.4,262 210.4,253 267.1,268.6 283.3,213.3 265.8,159.1 \"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"105.3,253 48.6,268.6 32.5,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"283.3,213.3 267.1,268.6 210.4,253  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"265.8,159.1 213.5,143.8 231.8,139  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"49.9,159.1 84,139 102.2,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"43.4,142 41.5,129.9 84,139  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"272.3,142 231.8,139 274.2,129.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"272.3,142 265.8,159.1 231.8,139  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"43.4,142 84,139 49.9,159.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"231.8,139 276.9,119.8 274.2,129.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"84,139 41.5,129.9 38.9,119.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"124.1,71.4 191.6,71.4 176.5,112.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"176.5,112.5 139.2,112.5 124.1,71.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"276.9,119.8 231.8,139 231,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"102.2,143.8 84,139 84.7,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"84.7,87.4 84,139 38.9,119.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"231,87.4 231.8,139 213.5,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"139.2,112.5 43,41.1 124.1,71.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st4\",\n  points: \"272.7,41.1 176.5,112.5 191.6,71.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"210.4,253 236.9,213.3 283.3,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"32.5,213.3 78.9,213.3 105.3,253  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"229.3,167.7 283.3,213.3 236.9,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"86.4,167.7 32.5,213.3 49.9,159.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"78.9,213.3 32.5,213.3 86.4,167.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"229.3,167.7 265.8,159.1 283.3,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"84.7,87.4 139.2,112.5 102.2,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"213.5,143.8 176.5,112.5 231,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"265.8,159.1 272.3,142 277.3,145.6  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"49.9,159.1 38.4,145.6 43.4,142  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"272.3,142 274.2,129.9 280.3,134.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"43.4,142 35.4,134.7 41.5,129.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"33.5,123.8 38.9,119.8 41.5,129.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"282.2,123.8 274.2,129.9 276.9,119.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"49.9,159.1 102.2,143.8 86.4,167.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"265.8,159.1 229.3,167.7 213.5,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"38.9,119.8 30.4,79 84.7,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"231,87.4 285.3,79 276.9,119.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"102.2,143.8 139.2,112.5 142.6,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"213.5,143.8 229.3,167.7 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"173.1,170.2 176.5,112.5 213.5,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"142.6,170.2 86.4,167.7 102.2,143.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"272.7,41.1 285.3,79 231,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"43,41.1 139.2,112.5 84.7,87.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"231,87.4 176.5,112.5 272.7,41.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st2\",\n  points: \"84.7,87.4 30.4,79 43,41.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"105.3,253 78.9,213.3 110,213.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"210.4,253 205.7,213.7 236.9,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"173.1,170.2 142.6,170.2 139.2,112.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"139.2,112.5 176.5,112.5 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"116.3,262 105.3,253 136.8,267.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"178.9,267.9 210.4,253 199.4,262  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st7\",\n  points: \"136.6,258.6 136.8,267.9 105.3,253  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st7\",\n  points: \"179.2,258.6 210.4,253 178.9,267.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"86.4,167.7 110,213.7 78.9,213.3  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"236.9,213.3 205.7,213.7 229.3,167.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st8\",\n  points: \"86.4,167.7 109.2,190.8 110,213.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st8\",\n  points: \"229.3,167.7 205.7,213.7 206.6,190.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st7\",\n  points: \"105.3,253 139.2,236.5 136.6,258.6  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st7\",\n  points: \"210.4,253 179.2,258.6 176.5,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"139.2,236.5 105.3,253 110,213.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st1\",\n  points: \"176.5,236.5 205.7,213.7 210.4,253  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"173.1,170.2 229.3,167.7 206.6,190.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"109.2,190.8 86.4,167.7 142.6,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"142.6,170.2 129.1,181.7 109.2,190.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"206.6,190.8 186.6,181.7 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"205.7,213.7 178.3,199.1 206.6,190.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"110,213.7 109.2,190.8 137.4,199.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st9\",\n  points: \"137.4,199.1 109.2,190.8 129.1,181.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st9\",\n  points: \"178.3,199.1 186.6,181.7 206.6,190.8  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"186.6,181.7 178.3,199.1 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st5\",\n  points: \"129.1,181.7 142.6,170.2 137.4,199.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"199.4,262 177,277.5 178.9,267.9  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"136.8,267.9 138.7,277.5 116.3,262  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st4\",\n  points: \"178.3,199.1 171.8,188.4 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st8\",\n  points: \"137.4,199.1 142.6,170.2 143.9,188.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"173.1,170.2 171.8,188.4 143.9,188.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"143.9,188.4 142.6,170.2 173.1,170.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"178.3,199.1 205.7,213.7 176.5,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"139.2,236.5 110,213.7 137.4,199.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"137.4,199.1 144,233.2 139.2,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"176.5,236.5 171.7,233.2 178.3,199.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st8\",\n  points: \"171.8,188.4 178.3,199.1 171.7,233.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st8\",\n  points: \"143.9,188.4 144,233.2 137.4,199.1  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"143.9,188.4 171.8,188.4 171.7,233.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st3\",\n  points: \"171.7,233.2 144,233.2 143.9,188.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"179.2,258.6 178.9,267.9 177,277.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"138.7,277.5 136.8,267.9 136.6,258.6  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"136.6,258.6 139,256.4 138.7,277.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"177,277.5 176.7,256.4 179.2,258.6  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"138.7,277.5 139,256.4 176.7,256.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st6\",\n  points: \"176.7,256.4 177,277.5 138.7,277.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"176.5,236.5 179.2,258.6 176.7,256.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"139,256.4 136.6,258.6 139.2,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"139.2,236.5 140.7,241.2 139,256.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"176.7,256.4 175,241.2 176.5,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"143.7,237.7 140.7,241.2 139.2,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"176.5,236.5 175,241.2 172,237.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"172,237.7 171.7,233.2 176.5,236.5  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"139.2,236.5 144,233.2 143.7,237.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"171.7,233.2 172,237.7 143.7,237.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"143.7,237.7 144,233.2 171.7,233.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"140.7,241.2 175,241.2 176.7,256.4  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"176.7,256.4 139,256.4 140.7,241.2  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"140.7,241.2 143.7,237.7 172,237.7  \"\n}), /*#__PURE__*/React.createElement(\"polygon\", {\n  className: \"metamask-st10\",\n  points: \"172,237.7 175,241.2 140.7,241.2  \"\n}));\n\nfunction SvgMetamask(_ref, svgRef) {\n  let title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 318.6 318.6\",\n    style: {\n      enableBackground: \"new 0 0 318.6 318.6\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4);\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgMetamask);\nexport default __webpack_public_path__ + \"static/media/metamask.6e0c3a5c.svg\";\nexport { ForwardRef as ReactComponent };","export var RenVMType;\n(function (RenVMType) {\n    RenVMType[\"Address\"] = \"address\";\n    RenVMType[\"Str\"] = \"str\";\n    RenVMType[\"B32\"] = \"b32\";\n    RenVMType[\"B\"] = \"b\";\n    RenVMType[\"I8\"] = \"i8\";\n    RenVMType[\"I16\"] = \"i16\";\n    RenVMType[\"I32\"] = \"i32\";\n    RenVMType[\"I64\"] = \"i64\";\n    RenVMType[\"I128\"] = \"i128\";\n    RenVMType[\"I256\"] = \"i256\";\n    RenVMType[\"U8\"] = \"u8\";\n    RenVMType[\"U16\"] = \"u16\";\n    RenVMType[\"U32\"] = \"u32\";\n    RenVMType[\"U64\"] = \"u64\";\n    RenVMType[\"U128\"] = \"u128\";\n    RenVMType[\"U256\"] = \"u256\";\n    RenVMType[\"Record\"] = \"record\";\n    RenVMType[\"List\"] = \"list\";\n    // Ext\n    RenVMType[\"ExtTypeEthCompatAddress\"] = \"ext_ethCompatAddress\";\n    RenVMType[\"ExtTypeBtcCompatUTXO\"] = \"ext_btcCompatUTXO\";\n    RenVMType[\"ExtTypeBtcCompatUTXOs\"] = \"ext_btcCompatUTXOs\";\n    RenVMType[\"ExtTypeEthCompatTx\"] = \"ext_ethCompatTx\";\n    RenVMType[\"ExtEthCompatPayload\"] = \"ext_ethCompatPayload\";\n})(RenVMType || (RenVMType = {}));\n//# sourceMappingURL=value.js.map","export var RPCMethod;\n(function (RPCMethod) {\n    // MethodSubmitTx submits a new transaction to the Darknode for acceptance\n    // into the transaction pool.\n    RPCMethod[\"SubmitTx\"] = \"ren_submitTx\";\n    // MethodQueryTx returns the latest information about a transaction\n    // identified by a transaction hash.\n    RPCMethod[\"QueryTx\"] = \"ren_queryTx\";\n    // MethodQueryTxs returns pages of transactions with optional filtering by\n    // status and tags.\n    RPCMethod[\"QueryTxs\"] = \"ren_queryTxs\";\n    // MethodQueryBlock returns a block identified by the block height.\n    RPCMethod[\"QueryBlock\"] = \"ren_queryBlock\";\n    // MethodQueryBlocks returns recently committed blocks.\n    RPCMethod[\"QueryBlocks\"] = \"ren_queryBlocks\";\n    // MethodQueryConfig returns the node configuration.\n    RPCMethod[\"QueryConfig\"] = \"ren_queryConfig\";\n    // MethodQueryState returns the contract state.\n    RPCMethod[\"QueryState\"] = \"ren_queryState\";\n})(RPCMethod || (RPCMethod = {}));\n// The following lines will throw a type error if RenVMResponses or RenVMParams\n// aren't defined for all RPC methods.\n// type _responsesCheck = RenVMResponses[RPCMethod];\n// type _paramsCheck = RenVMParams[RPCMethod];\n() => { };\n() => { };\n//# sourceMappingURL=methods.js.map","import { assert, fixSignatureSimple, signatureToBuffer, } from \"@renproject/utils\";\nimport { unmarshalTypedPackValue } from \"./pack/pack\";\nexport const unmarshalMintTx = (response) => {\n    // Note: Numbers are decoded and re-encoded to ensure they are in the correct format.\n    assert(/\\/to/.exec(response.tx.selector) !== null, `Expected mint details but got back burn details (${response.tx.hash} - ${response.tx.selector})`);\n    let out;\n    const inValue = unmarshalTypedPackValue(response.tx.in);\n    if (response.tx.out) {\n        out = unmarshalTypedPackValue(response.tx.out);\n        // Temporary fix to support v0.4.\n        if (out.revert && out.revert.length === 0) {\n            out.revert = undefined;\n        }\n        if (out.sig) {\n            const [r, s, v] = [\n                out.sig.slice(0, 32),\n                out.sig.slice(32, 64),\n                out.sig[64] % 27,\n            ];\n            out.signature = signatureToBuffer(fixSignatureSimple(r, s, v));\n            out.nhash = inValue.nhash;\n        }\n    }\n    return {\n        hash: response.tx.hash,\n        txStatus: response.txStatus,\n        to: response.tx.selector,\n        in: inValue,\n        out,\n    };\n};\nexport const unmarshalBurnTx = (response) => {\n    assert(/\\/from/.exec(response.tx.selector) !== null, `Expected burn details but got back mint details (${response.tx.hash} - ${response.tx.selector})`);\n    let out;\n    if (response.tx.out) {\n        out = unmarshalTypedPackValue(response.tx.out);\n    }\n    return {\n        hash: response.tx.hash,\n        to: response.tx.selector,\n        in: unmarshalTypedPackValue(response.tx.in),\n        txStatus: response.txStatus,\n        out,\n    };\n};\n// const unmarshalAssetFees = (fees: Fees): RenVMAssetFees => {\n//     const { lock, release, ...tokens } = fees;\n//     // TODO: Fix type errors.\n//     return ({\n//         lock: decodeNumber(lock).toNumber(),\n//         release: decodeNumber(release).toNumber(),\n//         ...Object.keys(tokens).reduce(\n//             (acc, token) => ({\n//                 ...acc,\n//                 [token]: {\n//                     mint: decodeNumber(fees[token].mint).toNumber(),\n//                     burn: decodeNumber(fees[token].burn).toNumber(),\n//                 },\n//             }),\n//             {},\n//         ),\n//     } as unknown) as RenVMAssetFees;\n// };\n// export const unmarshalFees = (response: ResponseQueryFees): RenVMFees => {\n//     const fees = {};\n//     for (const key of Object.keys(response)) {\n//         fees[key] = unmarshalAssetFees(response[key]);\n//     }\n//     return fees;\n// };\n//# sourceMappingURL=unmarshal.js.map","import { getRenNetworkDetails, NullLogger, TxStatus, } from \"@renproject/interfaces\";\nimport { HttpProvider } from \"@renproject/provider\";\nimport { assertType, fromBase64, isDefined, SECONDS, sleep, toURLBase64, } from \"@renproject/utils\";\nimport BigNumber from \"bignumber.js\";\nimport { RPCMethod, } from \"./methods\";\nimport { hashTransaction, mintParamsType, } from \"./transaction\";\nimport { unmarshalBurnTx, unmarshalMintTx } from \"./unmarshal\";\nexport const resolveV2Contract = ({ asset, from, to, }) => {\n    if (from.assetIsNative &&\n        from.assetIsNative(asset)) {\n        return `${asset}/to${to.name}`;\n    }\n    if (to.assetIsNative &&\n        to.assetIsNative(asset)) {\n        return `${asset}/from${from.name}`;\n    }\n    return `${asset}/from${from.name}To${to.name}`;\n};\nexport class RenVMProvider {\n    constructor(network, provider, logger = NullLogger) {\n        this.version = () => 2;\n        this.selector = (params) => {\n            return resolveV2Contract(params);\n        };\n        this.queryBlock = async (blockHeight, retry) => this.sendMessage(RPCMethod.QueryBlock, { blockHeight }, retry);\n        this.queryBlocks = async (blockHeight, n, retry) => this.sendMessage(RPCMethod.QueryBlocks, { blockHeight, n }, retry);\n        this.submitTx = async (tx, retry) => this.sendMessage(RPCMethod.SubmitTx, { tx }, retry);\n        this.queryTx = async (txHash, retry) => this.sendMessage(RPCMethod.QueryTx, { txHash }, retry);\n        this.queryTxs = async (tags, page, pageSize, txStatus, retry) => this.sendMessage(RPCMethod.QueryTxs, {\n            tags,\n            page: (page || 0).toString(),\n            pageSize: (pageSize || 0).toString(),\n            txStatus,\n        }, retry);\n        this.queryConfig = async (retry) => this.sendMessage(RPCMethod.QueryConfig, {}, retry);\n        this.queryState = async (retry) => this.sendMessage(RPCMethod.QueryState, {}, retry);\n        this.buildTransaction = ({ selector, gHash, gPubKey, nHash, nonce, output, amount, payload, pHash, to, }) => {\n            assertType(\"Buffer\", {\n                gHash,\n                gPubKey,\n                nHash,\n                nonce,\n                payload,\n                pHash,\n                txid: output.txid,\n            });\n            assertType(\"string\", { to, amount, txindex: output.txindex });\n            const version = \"1\";\n            const txIn = {\n                t: mintParamsType(),\n                v: {\n                    txid: toURLBase64(output.txid),\n                    txindex: output.txindex,\n                    ghash: toURLBase64(gHash),\n                    gpubkey: toURLBase64(gPubKey),\n                    nhash: toURLBase64(nHash),\n                    nonce: toURLBase64(nonce),\n                    payload: toURLBase64(payload),\n                    phash: toURLBase64(pHash),\n                    to,\n                    amount,\n                },\n            };\n            return {\n                hash: toURLBase64(hashTransaction(version, selector, txIn)),\n                selector: selector,\n                version,\n                // TODO: Fix types\n                in: txIn,\n            };\n        };\n        this.mintTxHash = (params) => {\n            return fromBase64(this.buildTransaction(params).hash);\n        };\n        this.submitMint = async (params) => {\n            const tx = this.buildTransaction(params);\n            await this.submitTx(tx);\n            return fromBase64(tx.hash);\n        };\n        this.burnTxHash = this.mintTxHash;\n        this.submitBurn = this.submitMint;\n        /**\n         * Queries the result of a RenVM transaction and unmarshals the result into\n         * a [[LockAndMintTransaction]] or [[BurnAndReleaseTransaction]].\n         *\n         * @param renVMTxHash The transaction hash as a Buffer.\n         */\n        this.queryMintOrBurn = async (_selector, renVMTxHash) => {\n            try {\n                const response = await this.queryTx(toURLBase64(renVMTxHash));\n                // Unmarshal transaction.\n                // TODO: Improve mint/burn detection. Currently checks if the format\n                // is `ASSET/toChain` or `ASSET/fromChainToChain`. It may return\n                // a false positive if the chain name contains `To`.\n                const isMint = /((\\/to)|(To))/.exec(response.tx.selector);\n                if (isMint) {\n                    return unmarshalMintTx(response);\n                }\n                else {\n                    return unmarshalBurnTx(response);\n                }\n            }\n            catch (error) {\n                throw error;\n            }\n        };\n        /**\n         * Fetches the result of a RenVM transaction on a repeated basis until the\n         * transaction's status is `\"done\"`.\n         *\n         * @param utxoTxHash The transaction hash as a Buffer.\n         * @param onStatus A callback called each time the status of the transaction\n         * is refreshed - even if it hasn't changed.\n         * @param _cancelRequested A function that returns `true` to cancel the\n         * loop.\n         */\n        this.waitForTX = async (selector, utxoTxHash, onStatus, _cancelRequested, timeout) => {\n            assertType(\"Buffer\", { utxoTxHash });\n            let rawResponse;\n            while (true) {\n                if (_cancelRequested && _cancelRequested()) {\n                    throw new Error(`waitForTX cancelled.`);\n                }\n                try {\n                    const result = await this.queryMintOrBurn(selector, utxoTxHash);\n                    if (result && result.txStatus === TxStatus.TxStatusDone) {\n                        rawResponse = result;\n                        break;\n                    }\n                    else if (onStatus && result && result.txStatus) {\n                        onStatus(result.txStatus);\n                    }\n                }\n                catch (error) {\n                    if (/(not found)|(not available)/.exec(String((error || {}).message))) {\n                        // ignore\n                    }\n                    else {\n                        this.logger.error(String(error));\n                        // TODO: throw unexpected errors\n                    }\n                }\n                await sleep(isDefined(timeout) ? timeout : 15 * SECONDS);\n            }\n            return rawResponse;\n        };\n        /**\n         * selectPublicKey fetches the public key for the RenVM shard handling\n         * the provided contract.\n         *\n         * @param chain The chain for which the public key should be fetched.\n         * @returns The public key hash (20 bytes) as a string.\n         */\n        this.selectPublicKey = async (_selector, chain) => {\n            // Call the ren_queryShards RPC.\n            const response = await this.queryState(5);\n            return fromBase64(response.state[chain].pubKey);\n        };\n        // In the future, this will be asynchronous. It returns a promise for\n        // compatibility.\n        // eslint-disable-next-line @typescript-eslint/require-await\n        this.getNetwork = async (_selector) => {\n            return this.network;\n        };\n        this.getConfirmationTarget = async (_selector, chain) => {\n            const renVMConfig = await this.sendMessage(RPCMethod.QueryConfig, {});\n            return parseInt(renVMConfig.confirmations[chain.name], 10);\n        };\n        this.estimateTransactionFee = async (_selector, chain) => {\n            const renVMState = await this.sendMessage(RPCMethod.QueryState, {});\n            if (!renVMState.state[chain.name]) {\n                throw new Error(`No fee details found for ${chain.name}`);\n            }\n            const { gasLimit, gasCap } = renVMState.state[chain.name];\n            const fee = new BigNumber(gasLimit).times(new BigNumber(gasCap));\n            return {\n                lock: fee,\n                release: fee,\n            };\n        };\n        if (!provider || typeof provider === \"string\") {\n            const rpcUrl = provider || (getRenNetworkDetails(network) || {}).lightnode;\n            try {\n                provider = new HttpProvider(rpcUrl, logger);\n            }\n            catch (error) {\n                if (/Invalid node URL/.exec(String(error && error.message))) {\n                    throw new Error(`Invalid network or provider URL: \"${(getRenNetworkDetails(network) || {}).name ||\n                        String(network)}\"`);\n                }\n                throw error;\n            }\n        }\n        this.network = network;\n        this.logger = logger;\n        this.provider = provider;\n        this.sendMessage = this.provider.sendMessage;\n    }\n}\n//# sourceMappingURL=renVMProvider.js.map","import { getRenNetworkDetails, NullLogger, RenNetwork, } from \"@renproject/interfaces\";\nimport { RenVMProvider as V1Provider } from \"./v1\";\nimport { RenVMProvider as V2Provider } from \"./v2\";\nconst isV1Selector = (selector) => {\n    return ([\n        \"BTC0Btc2Eth\",\n        \"BTC0Eth2Btc\",\n        \"ZEC0Zec2Eth\",\n        \"ZEC0Eth2Zec\",\n        \"BCH0Bch2Eth\",\n        \"BCH0Eth2Bch\",\n    ].indexOf(selector) >= 0);\n};\nexport class CombinedProvider {\n    constructor(network, logger = NullLogger) {\n        this.selector = (params) => {\n            const v1Selector = this.v1 && this.v1.selector(params);\n            return v1Selector && isV1Selector(v1Selector)\n                ? v1Selector\n                : this.v2.selector(params);\n        };\n        this.version = (selector) => (isV1Selector(selector) ? 1 : 2);\n        this.mintTxHash = (params) => this.v1 && isV1Selector(params.selector)\n            ? this.v1.mintTxHash(params)\n            : this.v2.mintTxHash(params);\n        this.submitMint = (params) => this.v1 && isV1Selector(params.selector)\n            ? this.v1.submitMint(params)\n            : this.v2.submitMint(params);\n        this.burnTxHash = (params) => {\n            if (isV1Selector(params.selector)) {\n                throw new Error(`Fetching burn txHash is not supported for ${params.selector}`);\n            }\n            return this.v2.burnTxHash(params);\n        };\n        this.submitBurn = (params) => this.v1 && isV1Selector(params.selector)\n            ? this.v1.submitBurn(params)\n            : this.v2.submitBurn(params);\n        this.queryMintOrBurn = (selector, utxoTxHash) => this.v1 && isV1Selector(selector)\n            ? this.v1.queryMintOrBurn(selector, utxoTxHash)\n            : this.v2.queryMintOrBurn(selector, utxoTxHash);\n        this.waitForTX = (selector, utxoTxHash, onStatus, cancelRequested, timeout) => this.v1 && isV1Selector(selector)\n            ? this.v1.waitForTX(selector, utxoTxHash, onStatus, cancelRequested, timeout)\n            : this.v2.waitForTX(selector, utxoTxHash, onStatus, cancelRequested, timeout);\n        /**\n         * selectPublicKey fetches the key for the RenVM shard handling\n         * the provided contract.\n         *\n         * @returns The key hash (20 bytes) as a string.\n         */\n        this.selectPublicKey = (selector, assetOrChain) => this.v1 && isV1Selector(selector)\n            ? this.v1.selectPublicKey(selector, assetOrChain)\n            : this.v2.selectPublicKey(selector, assetOrChain);\n        /**\n         * Used to query what network a custom provider is connected to. LockAndMint\n         * and BurnAndRelease use this to configure their chain parameters.\n         */\n        this.getNetwork = (selector) => this.v1 && isV1Selector(selector)\n            ? this.v1.getNetwork(selector)\n            : this.v2.getNetwork(selector);\n        this.getConfirmationTarget = async (selector, chain) => this.v1 && isV1Selector(selector)\n            ? this.v1.getConfirmationTarget(selector, chain)\n            : this.v2.getConfirmationTarget(selector, chain);\n        this.estimateTransactionFee = async (selector, chain) => this.v1 && isV1Selector(selector)\n            ? this.v1.estimateTransactionFee(selector, chain)\n            : this.v2.estimateTransactionFee(selector, chain);\n        this.network = getRenNetworkDetails(network);\n        let v1Network;\n        let v2Network;\n        switch (this.network.name) {\n            case RenNetwork.Mainnet:\n            case RenNetwork.Mainnet:\n            case RenNetwork.MainnetVDot3:\n            case RenNetwork.MainnetVDot3:\n                v1Network = RenNetwork.Mainnet;\n                v2Network = RenNetwork.MainnetVDot3;\n                break;\n            case RenNetwork.Testnet:\n            case RenNetwork.Testnet:\n            case RenNetwork.TestnetVDot3:\n            case RenNetwork.TestnetVDot3:\n                v1Network = RenNetwork.Testnet;\n                v2Network = RenNetwork.TestnetVDot3;\n                break;\n            case RenNetwork.DevnetVDot3:\n            case RenNetwork.DevnetVDot3:\n                v2Network = RenNetwork.DevnetVDot3;\n                break;\n            default:\n                v1Network = network;\n                v2Network = network;\n        }\n        if (v1Network) {\n            this.v1 = new V1Provider(v1Network, undefined, logger);\n        }\n        this.v2 = new V2Provider(v2Network, undefined, logger);\n        // Default to the v2 network.\n        this.sendMessage = this.v2.sendMessage;\n    }\n}\n//# sourceMappingURL=combinedProvider.js.map","export var RPCMethod;\n(function (RPCMethod) {\n    // MethodSubmitTx submits a new transaction to the Darknode for acceptance\n    // into the transaction pool.\n    RPCMethod[\"MethodSubmitTx\"] = \"ren_submitTx\";\n    // MethodQueryTx returns the latest information about a transaction\n    // identified by a transaction hash.\n    RPCMethod[\"MethodQueryTx\"] = \"ren_queryTx\";\n    // MethodQueryTxs returns pages of transactions with optional filtering by\n    // status and tags.\n    RPCMethod[\"MethodQueryTxs\"] = \"ren_queryTxs\";\n    // MethodQueryBlock returns a block identified by the block height.\n    RPCMethod[\"MethodQueryBlock\"] = \"ren_queryBlock\";\n    // MethodQueryBlocks returns recently committed blocks.\n    RPCMethod[\"MethodQueryBlocks\"] = \"ren_queryBlocks\";\n    // MethodQueryNumPeers returns the number of known peers.\n    RPCMethod[\"MethodQueryNumPeers\"] = \"ren_queryNumPeers\";\n    // MethodQueryPeers returns a random subset of known peers.\n    RPCMethod[\"MethodQueryPeers\"] = \"ren_queryPeers\";\n    // MethodQueryShards returns information about the currently online/offline\n    // Shards.\n    RPCMethod[\"MethodQueryShards\"] = \"ren_queryShards\";\n    // MethodQueryStat returns status information about the Darknode. This\n    // information cannot be verified.\n    RPCMethod[\"MethodQueryStat\"] = \"ren_queryStat\";\n    // MethodQueryFees returns information about the current RenVM fees and\n    // underlying blockchain fees. This information cannot be verified.\n    RPCMethod[\"MethodQueryFees\"] = \"ren_queryFees\";\n})(RPCMethod || (RPCMethod = {}));\n// The following lines will throw a type error if RenVMResponses or RenVMParams\n// aren't defined for all RPC methods.\n// type _responsesCheck = RenVMResponses[RPCMethod];\n// type _paramsCheck = RenVMParams[RPCMethod];\n() => { };\n() => { };\n//# sourceMappingURL=methods.js.map"],"sourceRoot":""}